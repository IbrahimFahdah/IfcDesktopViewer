!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var r=e();for(var n in r)("object"==typeof exports?exports:t)[n]=r[n]}}(self,(()=>(()=>{"use strict";var t={887:(t,e,r)=>{r.r(e),r.d(e,{glMatrix:()=>n,mat2:()=>i,mat2d:()=>a,mat3:()=>o,mat4:()=>s,quat:()=>l,quat2:()=>h,vec2:()=>f,vec3:()=>u,vec4:()=>c});var n={};r.r(n),r.d(n,{ARRAY_TYPE:()=>A,EPSILON:()=>d,RANDOM:()=>p,equals:()=>g,setMatrixArrayType:()=>v,toRadian:()=>m});var i={};r.r(i),r.d(i,{LDU:()=>U,add:()=>D,adjoint:()=>O,clone:()=>T,copy:()=>C,create:()=>E,determinant:()=>_,equals:()=>H,exactEquals:()=>V,frob:()=>w,fromRotation:()=>L,fromScaling:()=>x,fromValues:()=>b,identity:()=>R,invert:()=>F,mul:()=>q,multiply:()=>P,multiplyScalar:()=>k,multiplyScalarAndAdd:()=>X,rotate:()=>N,scale:()=>S,set:()=>M,str:()=>B,sub:()=>W,subtract:()=>G,transpose:()=>y});var a={};r.r(a),r.d(a,{add:()=>ct,clone:()=>j,copy:()=>Q,create:()=>z,determinant:()=>$,equals:()=>At,exactEquals:()=>dt,frob:()=>ut,fromRotation:()=>it,fromScaling:()=>at,fromTranslation:()=>ot,fromValues:()=>Y,identity:()=>K,invert:()=>J,mul:()=>pt,multiply:()=>tt,multiplyScalar:()=>ht,multiplyScalarAndAdd:()=>ft,rotate:()=>et,scale:()=>rt,set:()=>Z,str:()=>st,sub:()=>vt,subtract:()=>lt,translate:()=>nt});var o={};r.r(o),r.d(o,{add:()=>Ht,adjoint:()=>yt,clone:()=>gt,copy:()=>Et,create:()=>It,determinant:()=>Ft,equals:()=>zt,exactEquals:()=>Wt,frob:()=>Vt,fromMat2d:()=>Bt,fromMat4:()=>mt,fromQuat:()=>wt,fromRotation:()=>Lt,fromScaling:()=>xt,fromTranslation:()=>St,fromValues:()=>Tt,identity:()=>Rt,invert:()=>Mt,mul:()=>jt,multiply:()=>Ot,multiplyScalar:()=>Xt,multiplyScalarAndAdd:()=>qt,normalFromMat4:()=>Ut,projection:()=>Dt,rotate:()=>Pt,scale:()=>Nt,set:()=>Ct,str:()=>Gt,sub:()=>Qt,subtract:()=>kt,translate:()=>_t,transpose:()=>bt});var s={};r.r(s),r.d(s,{add:()=>De,adjoint:()=>ne,clone:()=>Yt,copy:()=>Zt,create:()=>Kt,determinant:()=>ie,equals:()=>Xe,exactEquals:()=>ke,frob:()=>Ue,fromQuat:()=>Me,fromQuat2:()=>ge,fromRotation:()=>Ae,fromRotationTranslation:()=>me,fromRotationTranslationScale:()=>Re,fromRotationTranslationScaleOrigin:()=>be,fromScaling:()=>de,fromTranslation:()=>fe,fromValues:()=>Jt,fromXRotation:()=>pe,fromYRotation:()=>ve,fromZRotation:()=>Ie,frustum:()=>ye,getRotation:()=>Ce,getScaling:()=>Te,getTranslation:()=>Ee,identity:()=>te,invert:()=>re,lookAt:()=>xe,mul:()=>qe,multiply:()=>ae,multiplyScalar:()=>Ve,multiplyScalarAndAdd:()=>He,ortho:()=>Se,orthoNO:()=>Ne,orthoZO:()=>Le,perspective:()=>Oe,perspectiveFromFieldOfView:()=>Pe,perspectiveNO:()=>Fe,perspectiveZO:()=>_e,rotate:()=>ue,rotateX:()=>ce,rotateY:()=>le,rotateZ:()=>he,scale:()=>se,set:()=>$t,str:()=>we,sub:()=>We,subtract:()=>Ge,targetTo:()=>Be,translate:()=>oe,transpose:()=>ee});var u={};r.r(u),r.d(u,{add:()=>Je,angle:()=>Fr,bezier:()=>gr,ceil:()=>rr,clone:()=>je,copy:()=>Ye,create:()=>ze,cross:()=>vr,dist:()=>wr,distance:()=>cr,div:()=>Br,divide:()=>er,dot:()=>pr,equals:()=>Nr,exactEquals:()=>Pr,floor:()=>nr,forEach:()=>Vr,fromValues:()=>Ke,hermite:()=>mr,inverse:()=>dr,len:()=>Dr,length:()=>Qe,lerp:()=>Ir,max:()=>ar,min:()=>ir,mul:()=>xr,multiply:()=>tr,negate:()=>fr,normalize:()=>Ar,random:()=>Er,rotateX:()=>br,rotateY:()=>Mr,rotateZ:()=>yr,round:()=>or,scale:()=>sr,scaleAndAdd:()=>ur,set:()=>Ze,sqrDist:()=>Ur,sqrLen:()=>Gr,squaredDistance:()=>lr,squaredLength:()=>hr,str:()=>_r,sub:()=>Lr,subtract:()=>$e,transformMat3:()=>Cr,transformMat4:()=>Tr,transformQuat:()=>Rr,zero:()=>Or});var c={};r.r(c),r.d(c,{add:()=>zr,ceil:()=>Yr,clone:()=>kr,copy:()=>qr,create:()=>Hr,cross:()=>fn,dist:()=>bn,distance:()=>nn,div:()=>Rn,divide:()=>Kr,dot:()=>hn,equals:()=>En,exactEquals:()=>gn,floor:()=>Zr,forEach:()=>On,fromValues:()=>Xr,inverse:()=>cn,len:()=>yn,length:()=>on,lerp:()=>dn,max:()=>$r,min:()=>Jr,mul:()=>Cn,multiply:()=>Qr,negate:()=>un,normalize:()=>ln,random:()=>An,round:()=>tn,scale:()=>en,scaleAndAdd:()=>rn,set:()=>Wr,sqrDist:()=>Mn,sqrLen:()=>Fn,squaredDistance:()=>an,squaredLength:()=>sn,str:()=>mn,sub:()=>Tn,subtract:()=>jr,transformMat4:()=>pn,transformQuat:()=>vn,zero:()=>In});var l={};r.r(l),r.d(l,{add:()=>ai,calculateW:()=>Dn,clone:()=>ei,conjugate:()=>Wn,copy:()=>ni,create:()=>_n,dot:()=>ui,equals:()=>vi,exactEquals:()=>pi,exp:()=>Gn,fromEuler:()=>jn,fromMat3:()=>zn,fromValues:()=>ri,getAngle:()=>Ln,getAxisAngle:()=>Sn,identity:()=>Pn,invert:()=>qn,len:()=>hi,length:()=>li,lerp:()=>ci,ln:()=>Vn,mul:()=>oi,multiply:()=>xn,normalize:()=>Ai,pow:()=>Hn,random:()=>Xn,rotateX:()=>Bn,rotateY:()=>wn,rotateZ:()=>Un,rotationTo:()=>Ii,scale:()=>si,set:()=>ii,setAxes:()=>gi,setAxisAngle:()=>Nn,slerp:()=>kn,sqlerp:()=>mi,sqrLen:()=>di,squaredLength:()=>fi,str:()=>Qn});var h={};r.r(h),r.d(h,{add:()=>Xi,clone:()=>Ti,conjugate:()=>Yi,copy:()=>Oi,create:()=>Ei,dot:()=>ji,equals:()=>ia,exactEquals:()=>na,fromMat4:()=>Fi,fromRotation:()=>yi,fromRotationTranslation:()=>bi,fromRotationTranslationValues:()=>Ri,fromTranslation:()=>Mi,fromValues:()=>Ci,getDual:()=>Si,getReal:()=>Ni,getTranslation:()=>Bi,identity:()=>_i,invert:()=>Ki,len:()=>Ji,length:()=>Zi,lerp:()=>Qi,mul:()=>Wi,multiply:()=>qi,normalize:()=>ea,rotateAroundAxis:()=>ki,rotateByQuatAppend:()=>Vi,rotateByQuatPrepend:()=>Hi,rotateX:()=>Ui,rotateY:()=>Di,rotateZ:()=>Gi,scale:()=>zi,set:()=>Pi,setDual:()=>xi,setReal:()=>Li,sqrLen:()=>ta,squaredLength:()=>$i,str:()=>ra,translate:()=>wi});var f={};r.r(f),r.d(f,{add:()=>la,angle:()=>Ua,ceil:()=>Aa,clone:()=>oa,copy:()=>ua,create:()=>aa,cross:()=>_a,dist:()=>za,distance:()=>Ta,div:()=>Wa,divide:()=>da,dot:()=>Oa,equals:()=>Ha,exactEquals:()=>Va,floor:()=>pa,forEach:()=>Ka,fromValues:()=>sa,inverse:()=>ya,len:()=>ka,length:()=>Ra,lerp:()=>Pa,max:()=>Ia,min:()=>va,mul:()=>qa,multiply:()=>fa,negate:()=>Ma,normalize:()=>Fa,random:()=>Na,rotate:()=>wa,round:()=>ma,scale:()=>ga,scaleAndAdd:()=>Ea,set:()=>ca,sqrDist:()=>ja,sqrLen:()=>Qa,squaredDistance:()=>Ca,squaredLength:()=>ba,str:()=>Ga,sub:()=>Xa,subtract:()=>ha,transformMat2:()=>Sa,transformMat2d:()=>La,transformMat3:()=>xa,transformMat4:()=>Ba,zero:()=>Da});var d=1e-6,A="undefined"!=typeof Float32Array?Float32Array:Array,p=Math.random;function v(t){A=t}var I=Math.PI/180;function m(t){return t*I}function g(t,e){return Math.abs(t-e)<=d*Math.max(1,Math.abs(t),Math.abs(e))}function E(){var t=new A(4);return A!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t}function T(t){var e=new A(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function C(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function R(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function b(t,e,r,n){var i=new A(4);return i[0]=t,i[1]=e,i[2]=r,i[3]=n,i}function M(t,e,r,n,i){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t}function y(t,e){if(t===e){var r=e[1];t[1]=e[2],t[2]=r}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t}function F(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=r*a-i*n;return o?(o=1/o,t[0]=a*o,t[1]=-n*o,t[2]=-i*o,t[3]=r*o,t):null}function O(t,e){var r=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=r,t}function _(t){return t[0]*t[3]-t[2]*t[1]}function P(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=r[0],u=r[1],c=r[2],l=r[3];return t[0]=n*s+a*u,t[1]=i*s+o*u,t[2]=n*c+a*l,t[3]=i*c+o*l,t}function N(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=Math.sin(r),u=Math.cos(r);return t[0]=n*u+a*s,t[1]=i*u+o*s,t[2]=n*-s+a*u,t[3]=i*-s+o*u,t}function S(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=r[0],u=r[1];return t[0]=n*s,t[1]=i*s,t[2]=a*u,t[3]=o*u,t}function L(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=-r,t[3]=n,t}function x(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t}function B(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function w(t){return Math.hypot(t[0],t[1],t[2],t[3])}function U(t,e,r,n){return t[2]=n[2]/n[0],r[0]=n[0],r[1]=n[1],r[3]=n[3]-t[2]*r[1],[t,e,r]}function D(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t}function G(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t}function V(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function H(t,e){var r=t[0],n=t[1],i=t[2],a=t[3],o=e[0],s=e[1],u=e[2],c=e[3];return Math.abs(r-o)<=d*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(n-s)<=d*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(i-u)<=d*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(a-c)<=d*Math.max(1,Math.abs(a),Math.abs(c))}function k(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t}function X(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var q=P,W=G;function z(){var t=new A(6);return A!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t}function j(t){var e=new A(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function Q(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function K(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function Y(t,e,r,n,i,a){var o=new A(6);return o[0]=t,o[1]=e,o[2]=r,o[3]=n,o[4]=i,o[5]=a,o}function Z(t,e,r,n,i,a,o){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t[4]=a,t[5]=o,t}function J(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=e[4],s=e[5],u=r*a-n*i;return u?(u=1/u,t[0]=a*u,t[1]=-n*u,t[2]=-i*u,t[3]=r*u,t[4]=(i*s-a*o)*u,t[5]=(n*o-r*s)*u,t):null}function $(t){return t[0]*t[3]-t[1]*t[2]}function tt(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],c=r[0],l=r[1],h=r[2],f=r[3],d=r[4],A=r[5];return t[0]=n*c+a*l,t[1]=i*c+o*l,t[2]=n*h+a*f,t[3]=i*h+o*f,t[4]=n*d+a*A+s,t[5]=i*d+o*A+u,t}function et(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],c=Math.sin(r),l=Math.cos(r);return t[0]=n*l+a*c,t[1]=i*l+o*c,t[2]=n*-c+a*l,t[3]=i*-c+o*l,t[4]=s,t[5]=u,t}function rt(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],c=r[0],l=r[1];return t[0]=n*c,t[1]=i*c,t[2]=a*l,t[3]=o*l,t[4]=s,t[5]=u,t}function nt(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],c=r[0],l=r[1];return t[0]=n,t[1]=i,t[2]=a,t[3]=o,t[4]=n*c+a*l+s,t[5]=i*c+o*l+u,t}function it(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=-r,t[3]=n,t[4]=0,t[5]=0,t}function at(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function ot(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function st(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function ut(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)}function ct(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t}function lt(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t}function ht(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t}function ft(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t}function dt(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function At(t,e){var r=t[0],n=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=e[0],c=e[1],l=e[2],h=e[3],f=e[4],A=e[5];return Math.abs(r-u)<=d*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(n-c)<=d*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(i-l)<=d*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(a-h)<=d*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(o-f)<=d*Math.max(1,Math.abs(o),Math.abs(f))&&Math.abs(s-A)<=d*Math.max(1,Math.abs(s),Math.abs(A))}var pt=tt,vt=lt;function It(){var t=new A(9);return A!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function mt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function gt(t){var e=new A(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function Et(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function Tt(t,e,r,n,i,a,o,s,u){var c=new A(9);return c[0]=t,c[1]=e,c[2]=r,c[3]=n,c[4]=i,c[5]=a,c[6]=o,c[7]=s,c[8]=u,c}function Ct(t,e,r,n,i,a,o,s,u,c){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t[4]=a,t[5]=o,t[6]=s,t[7]=u,t[8]=c,t}function Rt(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function bt(t,e){if(t===e){var r=e[1],n=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=r,t[5]=e[7],t[6]=n,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function Mt(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=e[4],s=e[5],u=e[6],c=e[7],l=e[8],h=l*o-s*c,f=-l*a+s*u,d=c*a-o*u,A=r*h+n*f+i*d;return A?(A=1/A,t[0]=h*A,t[1]=(-l*n+i*c)*A,t[2]=(s*n-i*o)*A,t[3]=f*A,t[4]=(l*r-i*u)*A,t[5]=(-s*r+i*a)*A,t[6]=d*A,t[7]=(-c*r+n*u)*A,t[8]=(o*r-n*a)*A,t):null}function yt(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=e[4],s=e[5],u=e[6],c=e[7],l=e[8];return t[0]=o*l-s*c,t[1]=i*c-n*l,t[2]=n*s-i*o,t[3]=s*u-a*l,t[4]=r*l-i*u,t[5]=i*a-r*s,t[6]=a*c-o*u,t[7]=n*u-r*c,t[8]=r*o-n*a,t}function Ft(t){var e=t[0],r=t[1],n=t[2],i=t[3],a=t[4],o=t[5],s=t[6],u=t[7],c=t[8];return e*(c*a-o*u)+r*(-c*i+o*s)+n*(u*i-a*s)}function Ot(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],c=e[6],l=e[7],h=e[8],f=r[0],d=r[1],A=r[2],p=r[3],v=r[4],I=r[5],m=r[6],g=r[7],E=r[8];return t[0]=f*n+d*o+A*c,t[1]=f*i+d*s+A*l,t[2]=f*a+d*u+A*h,t[3]=p*n+v*o+I*c,t[4]=p*i+v*s+I*l,t[5]=p*a+v*u+I*h,t[6]=m*n+g*o+E*c,t[7]=m*i+g*s+E*l,t[8]=m*a+g*u+E*h,t}function _t(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],c=e[6],l=e[7],h=e[8],f=r[0],d=r[1];return t[0]=n,t[1]=i,t[2]=a,t[3]=o,t[4]=s,t[5]=u,t[6]=f*n+d*o+c,t[7]=f*i+d*s+l,t[8]=f*a+d*u+h,t}function Pt(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],c=e[6],l=e[7],h=e[8],f=Math.sin(r),d=Math.cos(r);return t[0]=d*n+f*o,t[1]=d*i+f*s,t[2]=d*a+f*u,t[3]=d*o-f*n,t[4]=d*s-f*i,t[5]=d*u-f*a,t[6]=c,t[7]=l,t[8]=h,t}function Nt(t,e,r){var n=r[0],i=r[1];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function St(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function Lt(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=-r,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function xt(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Bt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function wt(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=r+r,s=n+n,u=i+i,c=r*o,l=n*o,h=n*s,f=i*o,d=i*s,A=i*u,p=a*o,v=a*s,I=a*u;return t[0]=1-h-A,t[3]=l-I,t[6]=f+v,t[1]=l+I,t[4]=1-c-A,t[7]=d-p,t[2]=f-v,t[5]=d+p,t[8]=1-c-h,t}function Ut(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=e[4],s=e[5],u=e[6],c=e[7],l=e[8],h=e[9],f=e[10],d=e[11],A=e[12],p=e[13],v=e[14],I=e[15],m=r*s-n*o,g=r*u-i*o,E=r*c-a*o,T=n*u-i*s,C=n*c-a*s,R=i*c-a*u,b=l*p-h*A,M=l*v-f*A,y=l*I-d*A,F=h*v-f*p,O=h*I-d*p,_=f*I-d*v,P=m*_-g*O+E*F+T*y-C*M+R*b;return P?(P=1/P,t[0]=(s*_-u*O+c*F)*P,t[1]=(u*y-o*_-c*M)*P,t[2]=(o*O-s*y+c*b)*P,t[3]=(i*O-n*_-a*F)*P,t[4]=(r*_-i*y+a*M)*P,t[5]=(n*y-r*O-a*b)*P,t[6]=(p*R-v*C+I*T)*P,t[7]=(v*E-A*R-I*g)*P,t[8]=(A*C-p*E+I*m)*P,t):null}function Dt(t,e,r){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/r,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function Gt(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function Vt(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])}function Ht(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t}function kt(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t}function Xt(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t}function qt(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t[6]=e[6]+r[6]*n,t[7]=e[7]+r[7]*n,t[8]=e[8]+r[8]*n,t}function Wt(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function zt(t,e){var r=t[0],n=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],c=t[7],l=t[8],h=e[0],f=e[1],A=e[2],p=e[3],v=e[4],I=e[5],m=e[6],g=e[7],E=e[8];return Math.abs(r-h)<=d*Math.max(1,Math.abs(r),Math.abs(h))&&Math.abs(n-f)<=d*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(i-A)<=d*Math.max(1,Math.abs(i),Math.abs(A))&&Math.abs(a-p)<=d*Math.max(1,Math.abs(a),Math.abs(p))&&Math.abs(o-v)<=d*Math.max(1,Math.abs(o),Math.abs(v))&&Math.abs(s-I)<=d*Math.max(1,Math.abs(s),Math.abs(I))&&Math.abs(u-m)<=d*Math.max(1,Math.abs(u),Math.abs(m))&&Math.abs(c-g)<=d*Math.max(1,Math.abs(c),Math.abs(g))&&Math.abs(l-E)<=d*Math.max(1,Math.abs(l),Math.abs(E))}var jt=Ot,Qt=kt;function Kt(){var t=new A(16);return A!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function Yt(t){var e=new A(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Zt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Jt(t,e,r,n,i,a,o,s,u,c,l,h,f,d,p,v){var I=new A(16);return I[0]=t,I[1]=e,I[2]=r,I[3]=n,I[4]=i,I[5]=a,I[6]=o,I[7]=s,I[8]=u,I[9]=c,I[10]=l,I[11]=h,I[12]=f,I[13]=d,I[14]=p,I[15]=v,I}function $t(t,e,r,n,i,a,o,s,u,c,l,h,f,d,A,p,v){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t[4]=a,t[5]=o,t[6]=s,t[7]=u,t[8]=c,t[9]=l,t[10]=h,t[11]=f,t[12]=d,t[13]=A,t[14]=p,t[15]=v,t}function te(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ee(t,e){if(t===e){var r=e[1],n=e[2],i=e[3],a=e[6],o=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=a,t[11]=e[14],t[12]=i,t[13]=o,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function re(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=e[4],s=e[5],u=e[6],c=e[7],l=e[8],h=e[9],f=e[10],d=e[11],A=e[12],p=e[13],v=e[14],I=e[15],m=r*s-n*o,g=r*u-i*o,E=r*c-a*o,T=n*u-i*s,C=n*c-a*s,R=i*c-a*u,b=l*p-h*A,M=l*v-f*A,y=l*I-d*A,F=h*v-f*p,O=h*I-d*p,_=f*I-d*v,P=m*_-g*O+E*F+T*y-C*M+R*b;return P?(P=1/P,t[0]=(s*_-u*O+c*F)*P,t[1]=(i*O-n*_-a*F)*P,t[2]=(p*R-v*C+I*T)*P,t[3]=(f*C-h*R-d*T)*P,t[4]=(u*y-o*_-c*M)*P,t[5]=(r*_-i*y+a*M)*P,t[6]=(v*E-A*R-I*g)*P,t[7]=(l*R-f*E+d*g)*P,t[8]=(o*O-s*y+c*b)*P,t[9]=(n*y-r*O-a*b)*P,t[10]=(A*C-p*E+I*m)*P,t[11]=(h*E-l*C-d*m)*P,t[12]=(s*M-o*F-u*b)*P,t[13]=(r*F-n*M+i*b)*P,t[14]=(p*g-A*T-v*m)*P,t[15]=(l*T-h*g+f*m)*P,t):null}function ne(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=e[4],s=e[5],u=e[6],c=e[7],l=e[8],h=e[9],f=e[10],d=e[11],A=e[12],p=e[13],v=e[14],I=e[15];return t[0]=s*(f*I-d*v)-h*(u*I-c*v)+p*(u*d-c*f),t[1]=-(n*(f*I-d*v)-h*(i*I-a*v)+p*(i*d-a*f)),t[2]=n*(u*I-c*v)-s*(i*I-a*v)+p*(i*c-a*u),t[3]=-(n*(u*d-c*f)-s*(i*d-a*f)+h*(i*c-a*u)),t[4]=-(o*(f*I-d*v)-l*(u*I-c*v)+A*(u*d-c*f)),t[5]=r*(f*I-d*v)-l*(i*I-a*v)+A*(i*d-a*f),t[6]=-(r*(u*I-c*v)-o*(i*I-a*v)+A*(i*c-a*u)),t[7]=r*(u*d-c*f)-o*(i*d-a*f)+l*(i*c-a*u),t[8]=o*(h*I-d*p)-l*(s*I-c*p)+A*(s*d-c*h),t[9]=-(r*(h*I-d*p)-l*(n*I-a*p)+A*(n*d-a*h)),t[10]=r*(s*I-c*p)-o*(n*I-a*p)+A*(n*c-a*s),t[11]=-(r*(s*d-c*h)-o*(n*d-a*h)+l*(n*c-a*s)),t[12]=-(o*(h*v-f*p)-l*(s*v-u*p)+A*(s*f-u*h)),t[13]=r*(h*v-f*p)-l*(n*v-i*p)+A*(n*f-i*h),t[14]=-(r*(s*v-u*p)-o*(n*v-i*p)+A*(n*u-i*s)),t[15]=r*(s*f-u*h)-o*(n*f-i*h)+l*(n*u-i*s),t}function ie(t){var e=t[0],r=t[1],n=t[2],i=t[3],a=t[4],o=t[5],s=t[6],u=t[7],c=t[8],l=t[9],h=t[10],f=t[11],d=t[12],A=t[13],p=t[14],v=t[15];return(e*o-r*a)*(h*v-f*p)-(e*s-n*a)*(l*v-f*A)+(e*u-i*a)*(l*p-h*A)+(r*s-n*o)*(c*v-f*d)-(r*u-i*o)*(c*p-h*d)+(n*u-i*s)*(c*A-l*d)}function ae(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],c=e[6],l=e[7],h=e[8],f=e[9],d=e[10],A=e[11],p=e[12],v=e[13],I=e[14],m=e[15],g=r[0],E=r[1],T=r[2],C=r[3];return t[0]=g*n+E*s+T*h+C*p,t[1]=g*i+E*u+T*f+C*v,t[2]=g*a+E*c+T*d+C*I,t[3]=g*o+E*l+T*A+C*m,g=r[4],E=r[5],T=r[6],C=r[7],t[4]=g*n+E*s+T*h+C*p,t[5]=g*i+E*u+T*f+C*v,t[6]=g*a+E*c+T*d+C*I,t[7]=g*o+E*l+T*A+C*m,g=r[8],E=r[9],T=r[10],C=r[11],t[8]=g*n+E*s+T*h+C*p,t[9]=g*i+E*u+T*f+C*v,t[10]=g*a+E*c+T*d+C*I,t[11]=g*o+E*l+T*A+C*m,g=r[12],E=r[13],T=r[14],C=r[15],t[12]=g*n+E*s+T*h+C*p,t[13]=g*i+E*u+T*f+C*v,t[14]=g*a+E*c+T*d+C*I,t[15]=g*o+E*l+T*A+C*m,t}function oe(t,e,r){var n,i,a,o,s,u,c,l,h,f,d,A,p=r[0],v=r[1],I=r[2];return e===t?(t[12]=e[0]*p+e[4]*v+e[8]*I+e[12],t[13]=e[1]*p+e[5]*v+e[9]*I+e[13],t[14]=e[2]*p+e[6]*v+e[10]*I+e[14],t[15]=e[3]*p+e[7]*v+e[11]*I+e[15]):(n=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],c=e[6],l=e[7],h=e[8],f=e[9],d=e[10],A=e[11],t[0]=n,t[1]=i,t[2]=a,t[3]=o,t[4]=s,t[5]=u,t[6]=c,t[7]=l,t[8]=h,t[9]=f,t[10]=d,t[11]=A,t[12]=n*p+s*v+h*I+e[12],t[13]=i*p+u*v+f*I+e[13],t[14]=a*p+c*v+d*I+e[14],t[15]=o*p+l*v+A*I+e[15]),t}function se(t,e,r){var n=r[0],i=r[1],a=r[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*a,t[9]=e[9]*a,t[10]=e[10]*a,t[11]=e[11]*a,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function ue(t,e,r,n){var i,a,o,s,u,c,l,h,f,A,p,v,I,m,g,E,T,C,R,b,M,y,F,O,_=n[0],P=n[1],N=n[2],S=Math.hypot(_,P,N);return S<d?null:(_*=S=1/S,P*=S,N*=S,i=Math.sin(r),o=1-(a=Math.cos(r)),s=e[0],u=e[1],c=e[2],l=e[3],h=e[4],f=e[5],A=e[6],p=e[7],v=e[8],I=e[9],m=e[10],g=e[11],E=_*_*o+a,T=P*_*o+N*i,C=N*_*o-P*i,R=_*P*o-N*i,b=P*P*o+a,M=N*P*o+_*i,y=_*N*o+P*i,F=P*N*o-_*i,O=N*N*o+a,t[0]=s*E+h*T+v*C,t[1]=u*E+f*T+I*C,t[2]=c*E+A*T+m*C,t[3]=l*E+p*T+g*C,t[4]=s*R+h*b+v*M,t[5]=u*R+f*b+I*M,t[6]=c*R+A*b+m*M,t[7]=l*R+p*b+g*M,t[8]=s*y+h*F+v*O,t[9]=u*y+f*F+I*O,t[10]=c*y+A*F+m*O,t[11]=l*y+p*F+g*O,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function ce(t,e,r){var n=Math.sin(r),i=Math.cos(r),a=e[4],o=e[5],s=e[6],u=e[7],c=e[8],l=e[9],h=e[10],f=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=a*i+c*n,t[5]=o*i+l*n,t[6]=s*i+h*n,t[7]=u*i+f*n,t[8]=c*i-a*n,t[9]=l*i-o*n,t[10]=h*i-s*n,t[11]=f*i-u*n,t}function le(t,e,r){var n=Math.sin(r),i=Math.cos(r),a=e[0],o=e[1],s=e[2],u=e[3],c=e[8],l=e[9],h=e[10],f=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*i-c*n,t[1]=o*i-l*n,t[2]=s*i-h*n,t[3]=u*i-f*n,t[8]=a*n+c*i,t[9]=o*n+l*i,t[10]=s*n+h*i,t[11]=u*n+f*i,t}function he(t,e,r){var n=Math.sin(r),i=Math.cos(r),a=e[0],o=e[1],s=e[2],u=e[3],c=e[4],l=e[5],h=e[6],f=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=a*i+c*n,t[1]=o*i+l*n,t[2]=s*i+h*n,t[3]=u*i+f*n,t[4]=c*i-a*n,t[5]=l*i-o*n,t[6]=h*i-s*n,t[7]=f*i-u*n,t}function fe(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function de(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Ae(t,e,r){var n,i,a,o=r[0],s=r[1],u=r[2],c=Math.hypot(o,s,u);return c<d?null:(o*=c=1/c,s*=c,u*=c,n=Math.sin(e),a=1-(i=Math.cos(e)),t[0]=o*o*a+i,t[1]=s*o*a+u*n,t[2]=u*o*a-s*n,t[3]=0,t[4]=o*s*a-u*n,t[5]=s*s*a+i,t[6]=u*s*a+o*n,t[7]=0,t[8]=o*u*a+s*n,t[9]=s*u*a-o*n,t[10]=u*u*a+i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function pe(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ve(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Ie(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function me(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=n+n,u=i+i,c=a+a,l=n*s,h=n*u,f=n*c,d=i*u,A=i*c,p=a*c,v=o*s,I=o*u,m=o*c;return t[0]=1-(d+p),t[1]=h+m,t[2]=f-I,t[3]=0,t[4]=h-m,t[5]=1-(l+p),t[6]=A+v,t[7]=0,t[8]=f+I,t[9]=A-v,t[10]=1-(l+d),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function ge(t,e){var r=new A(3),n=-e[0],i=-e[1],a=-e[2],o=e[3],s=e[4],u=e[5],c=e[6],l=e[7],h=n*n+i*i+a*a+o*o;return h>0?(r[0]=2*(s*o+l*n+u*a-c*i)/h,r[1]=2*(u*o+l*i+c*n-s*a)/h,r[2]=2*(c*o+l*a+s*i-u*n)/h):(r[0]=2*(s*o+l*n+u*a-c*i),r[1]=2*(u*o+l*i+c*n-s*a),r[2]=2*(c*o+l*a+s*i-u*n)),me(t,e,r),t}function Ee(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function Te(t,e){var r=e[0],n=e[1],i=e[2],a=e[4],o=e[5],s=e[6],u=e[8],c=e[9],l=e[10];return t[0]=Math.hypot(r,n,i),t[1]=Math.hypot(a,o,s),t[2]=Math.hypot(u,c,l),t}function Ce(t,e){var r=new A(3);Te(r,e);var n=1/r[0],i=1/r[1],a=1/r[2],o=e[0]*n,s=e[1]*i,u=e[2]*a,c=e[4]*n,l=e[5]*i,h=e[6]*a,f=e[8]*n,d=e[9]*i,p=e[10]*a,v=o+l+p,I=0;return v>0?(I=2*Math.sqrt(v+1),t[3]=.25*I,t[0]=(h-d)/I,t[1]=(f-u)/I,t[2]=(s-c)/I):o>l&&o>p?(I=2*Math.sqrt(1+o-l-p),t[3]=(h-d)/I,t[0]=.25*I,t[1]=(s+c)/I,t[2]=(f+u)/I):l>p?(I=2*Math.sqrt(1+l-o-p),t[3]=(f-u)/I,t[0]=(s+c)/I,t[1]=.25*I,t[2]=(h+d)/I):(I=2*Math.sqrt(1+p-o-l),t[3]=(s-c)/I,t[0]=(f+u)/I,t[1]=(h+d)/I,t[2]=.25*I),t}function Re(t,e,r,n){var i=e[0],a=e[1],o=e[2],s=e[3],u=i+i,c=a+a,l=o+o,h=i*u,f=i*c,d=i*l,A=a*c,p=a*l,v=o*l,I=s*u,m=s*c,g=s*l,E=n[0],T=n[1],C=n[2];return t[0]=(1-(A+v))*E,t[1]=(f+g)*E,t[2]=(d-m)*E,t[3]=0,t[4]=(f-g)*T,t[5]=(1-(h+v))*T,t[6]=(p+I)*T,t[7]=0,t[8]=(d+m)*C,t[9]=(p-I)*C,t[10]=(1-(h+A))*C,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function be(t,e,r,n,i){var a=e[0],o=e[1],s=e[2],u=e[3],c=a+a,l=o+o,h=s+s,f=a*c,d=a*l,A=a*h,p=o*l,v=o*h,I=s*h,m=u*c,g=u*l,E=u*h,T=n[0],C=n[1],R=n[2],b=i[0],M=i[1],y=i[2],F=(1-(p+I))*T,O=(d+E)*T,_=(A-g)*T,P=(d-E)*C,N=(1-(f+I))*C,S=(v+m)*C,L=(A+g)*R,x=(v-m)*R,B=(1-(f+p))*R;return t[0]=F,t[1]=O,t[2]=_,t[3]=0,t[4]=P,t[5]=N,t[6]=S,t[7]=0,t[8]=L,t[9]=x,t[10]=B,t[11]=0,t[12]=r[0]+b-(F*b+P*M+L*y),t[13]=r[1]+M-(O*b+N*M+x*y),t[14]=r[2]+y-(_*b+S*M+B*y),t[15]=1,t}function Me(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=r+r,s=n+n,u=i+i,c=r*o,l=n*o,h=n*s,f=i*o,d=i*s,A=i*u,p=a*o,v=a*s,I=a*u;return t[0]=1-h-A,t[1]=l+I,t[2]=f-v,t[3]=0,t[4]=l-I,t[5]=1-c-A,t[6]=d+p,t[7]=0,t[8]=f+v,t[9]=d-p,t[10]=1-c-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ye(t,e,r,n,i,a,o){var s=1/(r-e),u=1/(i-n),c=1/(a-o);return t[0]=2*a*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*a*u,t[6]=0,t[7]=0,t[8]=(r+e)*s,t[9]=(i+n)*u,t[10]=(o+a)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*a*2*c,t[15]=0,t}function Fe(t,e,r,n,i){var a,o=1/Math.tan(e/2);return t[0]=o/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(a=1/(n-i),t[10]=(i+n)*a,t[14]=2*i*n*a):(t[10]=-1,t[14]=-2*n),t}var Oe=Fe;function _e(t,e,r,n,i){var a,o=1/Math.tan(e/2);return t[0]=o/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(a=1/(n-i),t[10]=i*a,t[14]=i*n*a):(t[10]=-1,t[14]=-n),t}function Pe(t,e,r,n){var i=Math.tan(e.upDegrees*Math.PI/180),a=Math.tan(e.downDegrees*Math.PI/180),o=Math.tan(e.leftDegrees*Math.PI/180),s=Math.tan(e.rightDegrees*Math.PI/180),u=2/(o+s),c=2/(i+a);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(o-s)*u*.5,t[9]=(i-a)*c*.5,t[10]=n/(r-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*r/(r-n),t[15]=0,t}function Ne(t,e,r,n,i,a,o){var s=1/(e-r),u=1/(n-i),c=1/(a-o);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+r)*s,t[13]=(i+n)*u,t[14]=(o+a)*c,t[15]=1,t}var Se=Ne;function Le(t,e,r,n,i,a,o){var s=1/(e-r),u=1/(n-i),c=1/(a-o);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=c,t[11]=0,t[12]=(e+r)*s,t[13]=(i+n)*u,t[14]=a*c,t[15]=1,t}function xe(t,e,r,n){var i,a,o,s,u,c,l,h,f,A,p=e[0],v=e[1],I=e[2],m=n[0],g=n[1],E=n[2],T=r[0],C=r[1],R=r[2];return Math.abs(p-T)<d&&Math.abs(v-C)<d&&Math.abs(I-R)<d?te(t):(l=p-T,h=v-C,f=I-R,i=g*(f*=A=1/Math.hypot(l,h,f))-E*(h*=A),a=E*(l*=A)-m*f,o=m*h-g*l,(A=Math.hypot(i,a,o))?(i*=A=1/A,a*=A,o*=A):(i=0,a=0,o=0),s=h*o-f*a,u=f*i-l*o,c=l*a-h*i,(A=Math.hypot(s,u,c))?(s*=A=1/A,u*=A,c*=A):(s=0,u=0,c=0),t[0]=i,t[1]=s,t[2]=l,t[3]=0,t[4]=a,t[5]=u,t[6]=h,t[7]=0,t[8]=o,t[9]=c,t[10]=f,t[11]=0,t[12]=-(i*p+a*v+o*I),t[13]=-(s*p+u*v+c*I),t[14]=-(l*p+h*v+f*I),t[15]=1,t)}function Be(t,e,r,n){var i=e[0],a=e[1],o=e[2],s=n[0],u=n[1],c=n[2],l=i-r[0],h=a-r[1],f=o-r[2],d=l*l+h*h+f*f;d>0&&(l*=d=1/Math.sqrt(d),h*=d,f*=d);var A=u*f-c*h,p=c*l-s*f,v=s*h-u*l;return(d=A*A+p*p+v*v)>0&&(A*=d=1/Math.sqrt(d),p*=d,v*=d),t[0]=A,t[1]=p,t[2]=v,t[3]=0,t[4]=h*v-f*p,t[5]=f*A-l*v,t[6]=l*p-h*A,t[7]=0,t[8]=l,t[9]=h,t[10]=f,t[11]=0,t[12]=i,t[13]=a,t[14]=o,t[15]=1,t}function we(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function Ue(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function De(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t[9]=e[9]+r[9],t[10]=e[10]+r[10],t[11]=e[11]+r[11],t[12]=e[12]+r[12],t[13]=e[13]+r[13],t[14]=e[14]+r[14],t[15]=e[15]+r[15],t}function Ge(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t[9]=e[9]-r[9],t[10]=e[10]-r[10],t[11]=e[11]-r[11],t[12]=e[12]-r[12],t[13]=e[13]-r[13],t[14]=e[14]-r[14],t[15]=e[15]-r[15],t}function Ve(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t[9]=e[9]*r,t[10]=e[10]*r,t[11]=e[11]*r,t[12]=e[12]*r,t[13]=e[13]*r,t[14]=e[14]*r,t[15]=e[15]*r,t}function He(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t[6]=e[6]+r[6]*n,t[7]=e[7]+r[7]*n,t[8]=e[8]+r[8]*n,t[9]=e[9]+r[9]*n,t[10]=e[10]+r[10]*n,t[11]=e[11]+r[11]*n,t[12]=e[12]+r[12]*n,t[13]=e[13]+r[13]*n,t[14]=e[14]+r[14]*n,t[15]=e[15]+r[15]*n,t}function ke(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function Xe(t,e){var r=t[0],n=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],c=t[7],l=t[8],h=t[9],f=t[10],A=t[11],p=t[12],v=t[13],I=t[14],m=t[15],g=e[0],E=e[1],T=e[2],C=e[3],R=e[4],b=e[5],M=e[6],y=e[7],F=e[8],O=e[9],_=e[10],P=e[11],N=e[12],S=e[13],L=e[14],x=e[15];return Math.abs(r-g)<=d*Math.max(1,Math.abs(r),Math.abs(g))&&Math.abs(n-E)<=d*Math.max(1,Math.abs(n),Math.abs(E))&&Math.abs(i-T)<=d*Math.max(1,Math.abs(i),Math.abs(T))&&Math.abs(a-C)<=d*Math.max(1,Math.abs(a),Math.abs(C))&&Math.abs(o-R)<=d*Math.max(1,Math.abs(o),Math.abs(R))&&Math.abs(s-b)<=d*Math.max(1,Math.abs(s),Math.abs(b))&&Math.abs(u-M)<=d*Math.max(1,Math.abs(u),Math.abs(M))&&Math.abs(c-y)<=d*Math.max(1,Math.abs(c),Math.abs(y))&&Math.abs(l-F)<=d*Math.max(1,Math.abs(l),Math.abs(F))&&Math.abs(h-O)<=d*Math.max(1,Math.abs(h),Math.abs(O))&&Math.abs(f-_)<=d*Math.max(1,Math.abs(f),Math.abs(_))&&Math.abs(A-P)<=d*Math.max(1,Math.abs(A),Math.abs(P))&&Math.abs(p-N)<=d*Math.max(1,Math.abs(p),Math.abs(N))&&Math.abs(v-S)<=d*Math.max(1,Math.abs(v),Math.abs(S))&&Math.abs(I-L)<=d*Math.max(1,Math.abs(I),Math.abs(L))&&Math.abs(m-x)<=d*Math.max(1,Math.abs(m),Math.abs(x))}var qe=ae,We=Ge;function ze(){var t=new A(3);return A!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function je(t){var e=new A(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Qe(t){var e=t[0],r=t[1],n=t[2];return Math.hypot(e,r,n)}function Ke(t,e,r){var n=new A(3);return n[0]=t,n[1]=e,n[2]=r,n}function Ye(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Ze(t,e,r,n){return t[0]=e,t[1]=r,t[2]=n,t}function Je(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t}function $e(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t}function tr(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t}function er(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t}function rr(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function nr(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function ir(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t}function ar(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t}function or(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function sr(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t}function ur(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t}function cr(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2];return Math.hypot(r,n,i)}function lr(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2];return r*r+n*n+i*i}function hr(t){var e=t[0],r=t[1],n=t[2];return e*e+r*r+n*n}function fr(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function dr(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function Ar(t,e){var r=e[0],n=e[1],i=e[2],a=r*r+n*n+i*i;return a>0&&(a=1/Math.sqrt(a)),t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a,t}function pr(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function vr(t,e,r){var n=e[0],i=e[1],a=e[2],o=r[0],s=r[1],u=r[2];return t[0]=i*u-a*s,t[1]=a*o-n*u,t[2]=n*s-i*o,t}function Ir(t,e,r,n){var i=e[0],a=e[1],o=e[2];return t[0]=i+n*(r[0]-i),t[1]=a+n*(r[1]-a),t[2]=o+n*(r[2]-o),t}function mr(t,e,r,n,i,a){var o=a*a,s=o*(2*a-3)+1,u=o*(a-2)+a,c=o*(a-1),l=o*(3-2*a);return t[0]=e[0]*s+r[0]*u+n[0]*c+i[0]*l,t[1]=e[1]*s+r[1]*u+n[1]*c+i[1]*l,t[2]=e[2]*s+r[2]*u+n[2]*c+i[2]*l,t}function gr(t,e,r,n,i,a){var o=1-a,s=o*o,u=a*a,c=s*o,l=3*a*s,h=3*u*o,f=u*a;return t[0]=e[0]*c+r[0]*l+n[0]*h+i[0]*f,t[1]=e[1]*c+r[1]*l+n[1]*h+i[1]*f,t[2]=e[2]*c+r[2]*l+n[2]*h+i[2]*f,t}function Er(t,e){e=e||1;var r=2*p()*Math.PI,n=2*p()-1,i=Math.sqrt(1-n*n)*e;return t[0]=Math.cos(r)*i,t[1]=Math.sin(r)*i,t[2]=n*e,t}function Tr(t,e,r){var n=e[0],i=e[1],a=e[2],o=r[3]*n+r[7]*i+r[11]*a+r[15];return o=o||1,t[0]=(r[0]*n+r[4]*i+r[8]*a+r[12])/o,t[1]=(r[1]*n+r[5]*i+r[9]*a+r[13])/o,t[2]=(r[2]*n+r[6]*i+r[10]*a+r[14])/o,t}function Cr(t,e,r){var n=e[0],i=e[1],a=e[2];return t[0]=n*r[0]+i*r[3]+a*r[6],t[1]=n*r[1]+i*r[4]+a*r[7],t[2]=n*r[2]+i*r[5]+a*r[8],t}function Rr(t,e,r){var n=r[0],i=r[1],a=r[2],o=r[3],s=e[0],u=e[1],c=e[2],l=i*c-a*u,h=a*s-n*c,f=n*u-i*s,d=i*f-a*h,A=a*l-n*f,p=n*h-i*l,v=2*o;return l*=v,h*=v,f*=v,d*=2,A*=2,p*=2,t[0]=s+l+d,t[1]=u+h+A,t[2]=c+f+p,t}function br(t,e,r,n){var i=[],a=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],a[0]=i[0],a[1]=i[1]*Math.cos(n)-i[2]*Math.sin(n),a[2]=i[1]*Math.sin(n)+i[2]*Math.cos(n),t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t}function Mr(t,e,r,n){var i=[],a=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],a[0]=i[2]*Math.sin(n)+i[0]*Math.cos(n),a[1]=i[1],a[2]=i[2]*Math.cos(n)-i[0]*Math.sin(n),t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t}function yr(t,e,r,n){var i=[],a=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],a[0]=i[0]*Math.cos(n)-i[1]*Math.sin(n),a[1]=i[0]*Math.sin(n)+i[1]*Math.cos(n),a[2]=i[2],t[0]=a[0]+r[0],t[1]=a[1]+r[1],t[2]=a[2]+r[2],t}function Fr(t,e){var r=t[0],n=t[1],i=t[2],a=e[0],o=e[1],s=e[2],u=Math.sqrt(r*r+n*n+i*i)*Math.sqrt(a*a+o*o+s*s),c=u&&pr(t,e)/u;return Math.acos(Math.min(Math.max(c,-1),1))}function Or(t){return t[0]=0,t[1]=0,t[2]=0,t}function _r(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function Pr(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function Nr(t,e){var r=t[0],n=t[1],i=t[2],a=e[0],o=e[1],s=e[2];return Math.abs(r-a)<=d*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(n-o)<=d*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(i-s)<=d*Math.max(1,Math.abs(i),Math.abs(s))}var Sr,Lr=$e,xr=tr,Br=er,wr=cr,Ur=lr,Dr=Qe,Gr=hr,Vr=(Sr=ze(),function(t,e,r,n,i,a){var o,s;for(e||(e=3),r||(r=0),s=n?Math.min(n*e+r,t.length):t.length,o=r;o<s;o+=e)Sr[0]=t[o],Sr[1]=t[o+1],Sr[2]=t[o+2],i(Sr,Sr,a),t[o]=Sr[0],t[o+1]=Sr[1],t[o+2]=Sr[2];return t});function Hr(){var t=new A(4);return A!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function kr(t){var e=new A(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function Xr(t,e,r,n){var i=new A(4);return i[0]=t,i[1]=e,i[2]=r,i[3]=n,i}function qr(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function Wr(t,e,r,n,i){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t}function zr(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t}function jr(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t}function Qr(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t[3]=e[3]*r[3],t}function Kr(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t[3]=e[3]/r[3],t}function Yr(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function Zr(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function Jr(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t[3]=Math.min(e[3],r[3]),t}function $r(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t[3]=Math.max(e[3],r[3]),t}function tn(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function en(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t}function rn(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t}function nn(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2],a=e[3]-t[3];return Math.hypot(r,n,i,a)}function an(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2],a=e[3]-t[3];return r*r+n*n+i*i+a*a}function on(t){var e=t[0],r=t[1],n=t[2],i=t[3];return Math.hypot(e,r,n,i)}function sn(t){var e=t[0],r=t[1],n=t[2],i=t[3];return e*e+r*r+n*n+i*i}function un(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function cn(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function ln(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=r*r+n*n+i*i+a*a;return o>0&&(o=1/Math.sqrt(o)),t[0]=r*o,t[1]=n*o,t[2]=i*o,t[3]=a*o,t}function hn(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function fn(t,e,r,n){var i=r[0]*n[1]-r[1]*n[0],a=r[0]*n[2]-r[2]*n[0],o=r[0]*n[3]-r[3]*n[0],s=r[1]*n[2]-r[2]*n[1],u=r[1]*n[3]-r[3]*n[1],c=r[2]*n[3]-r[3]*n[2],l=e[0],h=e[1],f=e[2],d=e[3];return t[0]=h*c-f*u+d*s,t[1]=-l*c+f*o-d*a,t[2]=l*u-h*o+d*i,t[3]=-l*s+h*a-f*i,t}function dn(t,e,r,n){var i=e[0],a=e[1],o=e[2],s=e[3];return t[0]=i+n*(r[0]-i),t[1]=a+n*(r[1]-a),t[2]=o+n*(r[2]-o),t[3]=s+n*(r[3]-s),t}function An(t,e){var r,n,i,a,o,s;e=e||1;do{o=(r=2*p()-1)*r+(n=2*p()-1)*n}while(o>=1);do{s=(i=2*p()-1)*i+(a=2*p()-1)*a}while(s>=1);var u=Math.sqrt((1-o)/s);return t[0]=e*r,t[1]=e*n,t[2]=e*i*u,t[3]=e*a*u,t}function pn(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3];return t[0]=r[0]*n+r[4]*i+r[8]*a+r[12]*o,t[1]=r[1]*n+r[5]*i+r[9]*a+r[13]*o,t[2]=r[2]*n+r[6]*i+r[10]*a+r[14]*o,t[3]=r[3]*n+r[7]*i+r[11]*a+r[15]*o,t}function vn(t,e,r){var n=e[0],i=e[1],a=e[2],o=r[0],s=r[1],u=r[2],c=r[3],l=c*n+s*a-u*i,h=c*i+u*n-o*a,f=c*a+o*i-s*n,d=-o*n-s*i-u*a;return t[0]=l*c+d*-o+h*-u-f*-s,t[1]=h*c+d*-s+f*-o-l*-u,t[2]=f*c+d*-u+l*-s-h*-o,t[3]=e[3],t}function In(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function mn(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function gn(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function En(t,e){var r=t[0],n=t[1],i=t[2],a=t[3],o=e[0],s=e[1],u=e[2],c=e[3];return Math.abs(r-o)<=d*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(n-s)<=d*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(i-u)<=d*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(a-c)<=d*Math.max(1,Math.abs(a),Math.abs(c))}var Tn=jr,Cn=Qr,Rn=Kr,bn=nn,Mn=an,yn=on,Fn=sn,On=function(){var t=Hr();return function(e,r,n,i,a,o){var s,u;for(r||(r=4),n||(n=0),u=i?Math.min(i*r+n,e.length):e.length,s=n;s<u;s+=r)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],t[3]=e[s+3],a(t,t,o),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2],e[s+3]=t[3];return e}}();function _n(){var t=new A(4);return A!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function Pn(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function Nn(t,e,r){r*=.5;var n=Math.sin(r);return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=Math.cos(r),t}function Sn(t,e){var r=2*Math.acos(e[3]),n=Math.sin(r/2);return n>d?(t[0]=e[0]/n,t[1]=e[1]/n,t[2]=e[2]/n):(t[0]=1,t[1]=0,t[2]=0),r}function Ln(t,e){var r=ui(t,e);return Math.acos(2*r*r-1)}function xn(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=r[0],u=r[1],c=r[2],l=r[3];return t[0]=n*l+o*s+i*c-a*u,t[1]=i*l+o*u+a*s-n*c,t[2]=a*l+o*c+n*u-i*s,t[3]=o*l-n*s-i*u-a*c,t}function Bn(t,e,r){r*=.5;var n=e[0],i=e[1],a=e[2],o=e[3],s=Math.sin(r),u=Math.cos(r);return t[0]=n*u+o*s,t[1]=i*u+a*s,t[2]=a*u-i*s,t[3]=o*u-n*s,t}function wn(t,e,r){r*=.5;var n=e[0],i=e[1],a=e[2],o=e[3],s=Math.sin(r),u=Math.cos(r);return t[0]=n*u-a*s,t[1]=i*u+o*s,t[2]=a*u+n*s,t[3]=o*u-i*s,t}function Un(t,e,r){r*=.5;var n=e[0],i=e[1],a=e[2],o=e[3],s=Math.sin(r),u=Math.cos(r);return t[0]=n*u+i*s,t[1]=i*u-n*s,t[2]=a*u+o*s,t[3]=o*u-a*s,t}function Dn(t,e){var r=e[0],n=e[1],i=e[2];return t[0]=r,t[1]=n,t[2]=i,t[3]=Math.sqrt(Math.abs(1-r*r-n*n-i*i)),t}function Gn(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=Math.sqrt(r*r+n*n+i*i),s=Math.exp(a),u=o>0?s*Math.sin(o)/o:0;return t[0]=r*u,t[1]=n*u,t[2]=i*u,t[3]=s*Math.cos(o),t}function Vn(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=Math.sqrt(r*r+n*n+i*i),s=o>0?Math.atan2(o,a)/o:0;return t[0]=r*s,t[1]=n*s,t[2]=i*s,t[3]=.5*Math.log(r*r+n*n+i*i+a*a),t}function Hn(t,e,r){return Vn(t,e),si(t,t,r),Gn(t,t),t}function kn(t,e,r,n){var i,a,o,s,u,c=e[0],l=e[1],h=e[2],f=e[3],A=r[0],p=r[1],v=r[2],I=r[3];return(a=c*A+l*p+h*v+f*I)<0&&(a=-a,A=-A,p=-p,v=-v,I=-I),1-a>d?(i=Math.acos(a),o=Math.sin(i),s=Math.sin((1-n)*i)/o,u=Math.sin(n*i)/o):(s=1-n,u=n),t[0]=s*c+u*A,t[1]=s*l+u*p,t[2]=s*h+u*v,t[3]=s*f+u*I,t}function Xn(t){var e=p(),r=p(),n=p(),i=Math.sqrt(1-e),a=Math.sqrt(e);return t[0]=i*Math.sin(2*Math.PI*r),t[1]=i*Math.cos(2*Math.PI*r),t[2]=a*Math.sin(2*Math.PI*n),t[3]=a*Math.cos(2*Math.PI*n),t}function qn(t,e){var r=e[0],n=e[1],i=e[2],a=e[3],o=r*r+n*n+i*i+a*a,s=o?1/o:0;return t[0]=-r*s,t[1]=-n*s,t[2]=-i*s,t[3]=a*s,t}function Wn(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function zn(t,e){var r,n=e[0]+e[4]+e[8];if(n>0)r=Math.sqrt(n+1),t[3]=.5*r,r=.5/r,t[0]=(e[5]-e[7])*r,t[1]=(e[6]-e[2])*r,t[2]=(e[1]-e[3])*r;else{var i=0;e[4]>e[0]&&(i=1),e[8]>e[3*i+i]&&(i=2);var a=(i+1)%3,o=(i+2)%3;r=Math.sqrt(e[3*i+i]-e[3*a+a]-e[3*o+o]+1),t[i]=.5*r,r=.5/r,t[3]=(e[3*a+o]-e[3*o+a])*r,t[a]=(e[3*a+i]+e[3*i+a])*r,t[o]=(e[3*o+i]+e[3*i+o])*r}return t}function jn(t,e,r,n){var i=.5*Math.PI/180;e*=i,r*=i,n*=i;var a=Math.sin(e),o=Math.cos(e),s=Math.sin(r),u=Math.cos(r),c=Math.sin(n),l=Math.cos(n);return t[0]=a*u*l-o*s*c,t[1]=o*s*l+a*u*c,t[2]=o*u*c-a*s*l,t[3]=o*u*l+a*s*c,t}function Qn(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}var Kn,Yn,Zn,Jn,$n,ti,ei=kr,ri=Xr,ni=qr,ii=Wr,ai=zr,oi=xn,si=en,ui=hn,ci=dn,li=on,hi=li,fi=sn,di=fi,Ai=ln,pi=gn,vi=En,Ii=(Kn=ze(),Yn=Ke(1,0,0),Zn=Ke(0,1,0),function(t,e,r){var n=pr(e,r);return n<-.999999?(vr(Kn,Yn,e),Dr(Kn)<1e-6&&vr(Kn,Zn,e),Ar(Kn,Kn),Nn(t,Kn,Math.PI),t):n>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(vr(Kn,e,r),t[0]=Kn[0],t[1]=Kn[1],t[2]=Kn[2],t[3]=1+n,Ai(t,t))}),mi=(Jn=_n(),$n=_n(),function(t,e,r,n,i,a){return kn(Jn,e,i,a),kn($n,r,n,a),kn(t,Jn,$n,2*a*(1-a)),t}),gi=(ti=It(),function(t,e,r,n){return ti[0]=r[0],ti[3]=r[1],ti[6]=r[2],ti[1]=n[0],ti[4]=n[1],ti[7]=n[2],ti[2]=-e[0],ti[5]=-e[1],ti[8]=-e[2],Ai(t,zn(t,ti))});function Ei(){var t=new A(8);return A!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t}function Ti(t){var e=new A(8);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e}function Ci(t,e,r,n,i,a,o,s){var u=new A(8);return u[0]=t,u[1]=e,u[2]=r,u[3]=n,u[4]=i,u[5]=a,u[6]=o,u[7]=s,u}function Ri(t,e,r,n,i,a,o){var s=new A(8);s[0]=t,s[1]=e,s[2]=r,s[3]=n;var u=.5*i,c=.5*a,l=.5*o;return s[4]=u*n+c*r-l*e,s[5]=c*n+l*t-u*r,s[6]=l*n+u*e-c*t,s[7]=-u*t-c*e-l*r,s}function bi(t,e,r){var n=.5*r[0],i=.5*r[1],a=.5*r[2],o=e[0],s=e[1],u=e[2],c=e[3];return t[0]=o,t[1]=s,t[2]=u,t[3]=c,t[4]=n*c+i*u-a*s,t[5]=i*c+a*o-n*u,t[6]=a*c+n*s-i*o,t[7]=-n*o-i*s-a*u,t}function Mi(t,e){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*e[0],t[5]=.5*e[1],t[6]=.5*e[2],t[7]=0,t}function yi(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function Fi(t,e){var r=_n();Ce(r,e);var n=new A(3);return Ee(n,e),bi(t,r,n),t}function Oi(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t}function _i(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function Pi(t,e,r,n,i,a,o,s,u){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t[4]=a,t[5]=o,t[6]=s,t[7]=u,t}var Ni=ni;function Si(t,e){return t[0]=e[4],t[1]=e[5],t[2]=e[6],t[3]=e[7],t}var Li=ni;function xi(t,e){return t[4]=e[0],t[5]=e[1],t[6]=e[2],t[7]=e[3],t}function Bi(t,e){var r=e[4],n=e[5],i=e[6],a=e[7],o=-e[0],s=-e[1],u=-e[2],c=e[3];return t[0]=2*(r*c+a*o+n*u-i*s),t[1]=2*(n*c+a*s+i*o-r*u),t[2]=2*(i*c+a*u+r*s-n*o),t}function wi(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=.5*r[0],u=.5*r[1],c=.5*r[2],l=e[4],h=e[5],f=e[6],d=e[7];return t[0]=n,t[1]=i,t[2]=a,t[3]=o,t[4]=o*s+i*c-a*u+l,t[5]=o*u+a*s-n*c+h,t[6]=o*c+n*u-i*s+f,t[7]=-n*s-i*u-a*c+d,t}function Ui(t,e,r){var n=-e[0],i=-e[1],a=-e[2],o=e[3],s=e[4],u=e[5],c=e[6],l=e[7],h=s*o+l*n+u*a-c*i,f=u*o+l*i+c*n-s*a,d=c*o+l*a+s*i-u*n,A=l*o-s*n-u*i-c*a;return Bn(t,e,r),n=t[0],i=t[1],a=t[2],o=t[3],t[4]=h*o+A*n+f*a-d*i,t[5]=f*o+A*i+d*n-h*a,t[6]=d*o+A*a+h*i-f*n,t[7]=A*o-h*n-f*i-d*a,t}function Di(t,e,r){var n=-e[0],i=-e[1],a=-e[2],o=e[3],s=e[4],u=e[5],c=e[6],l=e[7],h=s*o+l*n+u*a-c*i,f=u*o+l*i+c*n-s*a,d=c*o+l*a+s*i-u*n,A=l*o-s*n-u*i-c*a;return wn(t,e,r),n=t[0],i=t[1],a=t[2],o=t[3],t[4]=h*o+A*n+f*a-d*i,t[5]=f*o+A*i+d*n-h*a,t[6]=d*o+A*a+h*i-f*n,t[7]=A*o-h*n-f*i-d*a,t}function Gi(t,e,r){var n=-e[0],i=-e[1],a=-e[2],o=e[3],s=e[4],u=e[5],c=e[6],l=e[7],h=s*o+l*n+u*a-c*i,f=u*o+l*i+c*n-s*a,d=c*o+l*a+s*i-u*n,A=l*o-s*n-u*i-c*a;return Un(t,e,r),n=t[0],i=t[1],a=t[2],o=t[3],t[4]=h*o+A*n+f*a-d*i,t[5]=f*o+A*i+d*n-h*a,t[6]=d*o+A*a+h*i-f*n,t[7]=A*o-h*n-f*i-d*a,t}function Vi(t,e,r){var n=r[0],i=r[1],a=r[2],o=r[3],s=e[0],u=e[1],c=e[2],l=e[3];return t[0]=s*o+l*n+u*a-c*i,t[1]=u*o+l*i+c*n-s*a,t[2]=c*o+l*a+s*i-u*n,t[3]=l*o-s*n-u*i-c*a,s=e[4],u=e[5],c=e[6],l=e[7],t[4]=s*o+l*n+u*a-c*i,t[5]=u*o+l*i+c*n-s*a,t[6]=c*o+l*a+s*i-u*n,t[7]=l*o-s*n-u*i-c*a,t}function Hi(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=r[0],u=r[1],c=r[2],l=r[3];return t[0]=n*l+o*s+i*c-a*u,t[1]=i*l+o*u+a*s-n*c,t[2]=a*l+o*c+n*u-i*s,t[3]=o*l-n*s-i*u-a*c,s=r[4],u=r[5],c=r[6],l=r[7],t[4]=n*l+o*s+i*c-a*u,t[5]=i*l+o*u+a*s-n*c,t[6]=a*l+o*c+n*u-i*s,t[7]=o*l-n*s-i*u-a*c,t}function ki(t,e,r,n){if(Math.abs(n)<d)return Oi(t,e);var i=Math.hypot(r[0],r[1],r[2]);n*=.5;var a=Math.sin(n),o=a*r[0]/i,s=a*r[1]/i,u=a*r[2]/i,c=Math.cos(n),l=e[0],h=e[1],f=e[2],A=e[3];t[0]=l*c+A*o+h*u-f*s,t[1]=h*c+A*s+f*o-l*u,t[2]=f*c+A*u+l*s-h*o,t[3]=A*c-l*o-h*s-f*u;var p=e[4],v=e[5],I=e[6],m=e[7];return t[4]=p*c+m*o+v*u-I*s,t[5]=v*c+m*s+I*o-p*u,t[6]=I*c+m*u+p*s-v*o,t[7]=m*c-p*o-v*s-I*u,t}function Xi(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t}function qi(t,e,r){var n=e[0],i=e[1],a=e[2],o=e[3],s=r[4],u=r[5],c=r[6],l=r[7],h=e[4],f=e[5],d=e[6],A=e[7],p=r[0],v=r[1],I=r[2],m=r[3];return t[0]=n*m+o*p+i*I-a*v,t[1]=i*m+o*v+a*p-n*I,t[2]=a*m+o*I+n*v-i*p,t[3]=o*m-n*p-i*v-a*I,t[4]=n*l+o*s+i*c-a*u+h*m+A*p+f*I-d*v,t[5]=i*l+o*u+a*s-n*c+f*m+A*v+d*p-h*I,t[6]=a*l+o*c+n*u-i*s+d*m+A*I+h*v-f*p,t[7]=o*l-n*s-i*u-a*c+A*m-h*p-f*v-d*I,t}var Wi=qi;function zi(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t}var ji=ui;function Qi(t,e,r,n){var i=1-n;return ji(e,r)<0&&(n=-n),t[0]=e[0]*i+r[0]*n,t[1]=e[1]*i+r[1]*n,t[2]=e[2]*i+r[2]*n,t[3]=e[3]*i+r[3]*n,t[4]=e[4]*i+r[4]*n,t[5]=e[5]*i+r[5]*n,t[6]=e[6]*i+r[6]*n,t[7]=e[7]*i+r[7]*n,t}function Ki(t,e){var r=$i(e);return t[0]=-e[0]/r,t[1]=-e[1]/r,t[2]=-e[2]/r,t[3]=e[3]/r,t[4]=-e[4]/r,t[5]=-e[5]/r,t[6]=-e[6]/r,t[7]=e[7]/r,t}function Yi(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=e[7],t}var Zi=li,Ji=Zi,$i=fi,ta=$i;function ea(t,e){var r=$i(e);if(r>0){r=Math.sqrt(r);var n=e[0]/r,i=e[1]/r,a=e[2]/r,o=e[3]/r,s=e[4],u=e[5],c=e[6],l=e[7],h=n*s+i*u+a*c+o*l;t[0]=n,t[1]=i,t[2]=a,t[3]=o,t[4]=(s-n*h)/r,t[5]=(u-i*h)/r,t[6]=(c-a*h)/r,t[7]=(l-o*h)/r}return t}function ra(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"}function na(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]}function ia(t,e){var r=t[0],n=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],c=t[7],l=e[0],h=e[1],f=e[2],A=e[3],p=e[4],v=e[5],I=e[6],m=e[7];return Math.abs(r-l)<=d*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(n-h)<=d*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(i-f)<=d*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(a-A)<=d*Math.max(1,Math.abs(a),Math.abs(A))&&Math.abs(o-p)<=d*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(s-v)<=d*Math.max(1,Math.abs(s),Math.abs(v))&&Math.abs(u-I)<=d*Math.max(1,Math.abs(u),Math.abs(I))&&Math.abs(c-m)<=d*Math.max(1,Math.abs(c),Math.abs(m))}function aa(){var t=new A(2);return A!=Float32Array&&(t[0]=0,t[1]=0),t}function oa(t){var e=new A(2);return e[0]=t[0],e[1]=t[1],e}function sa(t,e){var r=new A(2);return r[0]=t,r[1]=e,r}function ua(t,e){return t[0]=e[0],t[1]=e[1],t}function ca(t,e,r){return t[0]=e,t[1]=r,t}function la(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t}function ha(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t}function fa(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t}function da(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t}function Aa(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function pa(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function va(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t}function Ia(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t}function ma(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function ga(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t}function Ea(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t}function Ta(t,e){var r=e[0]-t[0],n=e[1]-t[1];return Math.hypot(r,n)}function Ca(t,e){var r=e[0]-t[0],n=e[1]-t[1];return r*r+n*n}function Ra(t){var e=t[0],r=t[1];return Math.hypot(e,r)}function ba(t){var e=t[0],r=t[1];return e*e+r*r}function Ma(t,e){return t[0]=-e[0],t[1]=-e[1],t}function ya(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function Fa(t,e){var r=e[0],n=e[1],i=r*r+n*n;return i>0&&(i=1/Math.sqrt(i)),t[0]=e[0]*i,t[1]=e[1]*i,t}function Oa(t,e){return t[0]*e[0]+t[1]*e[1]}function _a(t,e,r){var n=e[0]*r[1]-e[1]*r[0];return t[0]=t[1]=0,t[2]=n,t}function Pa(t,e,r,n){var i=e[0],a=e[1];return t[0]=i+n*(r[0]-i),t[1]=a+n*(r[1]-a),t}function Na(t,e){e=e||1;var r=2*p()*Math.PI;return t[0]=Math.cos(r)*e,t[1]=Math.sin(r)*e,t}function Sa(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[2]*i,t[1]=r[1]*n+r[3]*i,t}function La(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[2]*i+r[4],t[1]=r[1]*n+r[3]*i+r[5],t}function xa(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[3]*i+r[6],t[1]=r[1]*n+r[4]*i+r[7],t}function Ba(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[4]*i+r[12],t[1]=r[1]*n+r[5]*i+r[13],t}function wa(t,e,r,n){var i=e[0]-r[0],a=e[1]-r[1],o=Math.sin(n),s=Math.cos(n);return t[0]=i*s-a*o+r[0],t[1]=i*o+a*s+r[1],t}function Ua(t,e){var r=t[0],n=t[1],i=e[0],a=e[1],o=Math.sqrt(r*r+n*n)*Math.sqrt(i*i+a*a),s=o&&(r*i+n*a)/o;return Math.acos(Math.min(Math.max(s,-1),1))}function Da(t){return t[0]=0,t[1]=0,t}function Ga(t){return"vec2("+t[0]+", "+t[1]+")"}function Va(t,e){return t[0]===e[0]&&t[1]===e[1]}function Ha(t,e){var r=t[0],n=t[1],i=e[0],a=e[1];return Math.abs(r-i)<=d*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(n-a)<=d*Math.max(1,Math.abs(n),Math.abs(a))}var ka=Ra,Xa=ha,qa=fa,Wa=da,za=Ta,ja=Ca,Qa=ba,Ka=function(){var t=aa();return function(e,r,n,i,a,o){var s,u;for(r||(r=2),n||(n=0),u=i?Math.min(i*r+n,e.length):e.length,s=n;s<u;s+=r)t[0]=e[s],t[1]=e[s+1],a(t,t,o),e[s]=t[0],e[s+1]=t[1];return e}}()},831:function(t,e,r){var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||n(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),i(r(6086),e),i(r(1712),e),i(r(6952),e)},126:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Bitmap=void 0;e.Bitmap=function(){}},5056:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ClippingPlane=void 0;e.ClippingPlane=function(){}},1447:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Coloring=void 0;e.Coloring=function(){}},9368:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Component=void 0;e.Component=function(t){this.ifc_guid=t,this.originating_system="xBIM",this.authoring_tool_id="WebUI"}},2680:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Components=void 0;e.Components=function(){}},7085:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Guid=void 0;var r=function(){function t(){}return t.new=function(){return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,(function(t){var e=parseInt(t,10);return(e^16*Math.random()>>e/4).toString(16)}))},t}();e.Guid=r},6952:function(t,e,r){var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||n(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),i(r(126),e),i(r(5056),e),i(r(1447),e),i(r(9368),e),i(r(2680),e),i(r(1970),e),i(r(9891),e),i(r(1963),e),i(r(1304),e),i(r(7745),e),i(r(779),e),i(r(4134),e)},1970:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Line=void 0;e.Line=function(){}},9891:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.OrthogonalCamera=void 0;e.OrthogonalCamera=function(){}},1963:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PerspectiveCamera=void 0;e.PerspectiveCamera=function(){}},1304:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Snapshot=void 0;e.Snapshot=function(){}},7745:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ViewSetupHints=void 0;e.ViewSetupHints=function(){}},779:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Viewpoint=void 0;var n=r(7085),i=r(5056),a=r(2680),o=r(8378),s=r(887),u=r(6413),c=r(8194),l=r(4134),h=r(9368),f=function(){function t(){this.index=++t._currentIndex,this.guid=n.Guid.new()}return t.GetViewpoint=function(e,r,n){void 0===n&&(n=e.width/2);var i=new t,o=e.width/e.height,s=n/o,f=function(t){return Array.prototype.slice.call(t)};if(e.camera===u.CameraType.PERSPECTIVE)i.perspective_camera={camera_direction:f(e.getCameraDirection()),camera_up_vector:f(e.getCameraHeading()),camera_view_point:f(e.getCameraPositionWcs()),field_of_view:e.cameraProperties.fov,height:e.cameraProperties.height,width:e.cameraProperties.height*o};else{var d=e.cameraProperties.height/e.unitsInMeter,A=e.height/t.resolution;i.orthogonal_camera={camera_direction:f(e.getCameraDirection()),camera_up_vector:f(e.getCameraHeading()),camera_view_point:f(e.getCameraPositionWcs()),view_to_world_scale:A/d,height:e.cameraProperties.height,width:e.cameraProperties.height*o}}var p=e.getCurrentImageDataUrl(n,s,"png").substring(22);i.snapshot={snapshot_type:"png",snapshot_data:p};var v=e.getClip();null!=v&&(t.AddClippingPlane(i,v.PlaneA),t.AddClippingPlane(i,v.PlaneB));var I=e.getProductsWithState(c.State.HIGHLIGHTED);if(null!=I&&I.length>0){null==r&&(console.warn("ID mapping function should be used to persist global identity of selected elements"),r=function(t,e){return"".concat(e,"_").concat(t)}),null==i.components&&(i.components=new a.Components,i.components.coloring=[],i.components.selection=[],i.components.visibility=new l.Visibility);var m=i.components.selection;I.forEach((function(t){var e=r(t.id,t.model);m.push(new h.Component(e))}))}return i},t.AddClippingPlane=function(t,e){if(null!=e&&4===e.length){null==t.clipping_planes&&(t.clipping_planes=[]);var r=new i.ClippingPlane;r.direction=e.slice(0,3);var n=e,a=-n[0]*n[3]/(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]),o=-n[1]*n[3]/(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]),s=-n[2]*n[3]/(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);r.location=[a,o,s],t.clipping_planes.push(r)}},t.SetViewpoint=function(e,r,n,i){void 0===i&&(i=0);var a=function(t){return null==t||t.length<3?null:s.vec3.fromValues(t[0],t[1],t[2])},l=e.getCurrentWcs(),h=e.width/e.height;t.SetClipping(e,r);var f=r.perspective_camera||r.orthogonal_camera;if(null!=f){var d=f.camera_view_point,A=f.camera_direction,p=f.camera_up_vector,v=a(d),I=s.vec3.subtract(s.vec3.create(),v,l),m=s.vec3.normalize(s.vec3.create(),a(A)),g=s.vec3.normalize(s.vec3.create(),a(p)||s.vec3.fromValues(0,0,1)),E=s.vec3.angle(m,g);(Math.abs(E)<1e-6||Math.abs(E-Math.PI)<1e-6)&&(console.warn("Collinear target and heading vectors for the view. Singularity will be fixed by guess."),E=s.vec3.angle(m,s.vec3.fromValues(0,0,1)),(Math.abs(E)<1e-6||Math.abs(E-Math.PI)<1e-6)&&(g=s.vec3.fromValues(0,1,0)));var T=function(t){return null!=t&&"number"==typeof t&&t>0},C=e.cameraProperties.height||100,R=e.getMergedRegion(),b=R&&R.bbox&&R.population>0?e.getDistanceAndHeight(R.bbox,m,g):null;if(null!=b&&s.vec3.dist(a(R.centre),I)>4*b.distance){var M=s.vec3.negate(s.vec3.create(),m),y=s.vec3.scale(s.vec3.create(),M,b.distance);I=s.vec3.add(s.vec3.create(),a(R.centre),y),C=b.height}if(r.perspective_camera){e.camera=u.CameraType.PERSPECTIVE;var F=60;if(T(r.perspective_camera.field_of_view)&&(F=r.perspective_camera.field_of_view),T(f.width)&&T(f.height)&&(P=f.width/f.height)>h){var O=F*Math.PI/180;F=2*Math.atan(Math.tan(O/2)*P/h)*180/Math.PI}e.cameraProperties.fov=F}else if(r.orthogonal_camera){if(e.camera=u.CameraType.ORTHOGONAL,e.cameraProperties.fov=60,T(r.orthogonal_camera.view_to_world_scale)){var _=r.orthogonal_camera.view_to_world_scale;C=e.height/t.resolution/_*e.unitsInMeter}if(T(f.width)&&T(f.height)){var P,N=f.height;(P=f.width/N)>h&&(N=N*P/h),null!=b&&N>4*b.height&&(N=b.height),C=N}}var S=s.vec3.add(s.vec3.create(),I,m),L=s.mat4.lookAt(s.mat4.create(),I,S,g);e.animations.viewTo({mv:L,height:C},i).then((function(){if(r.orthogonal_camera){if(s.vec3.angle(a(f.camera_direction),s.vec3.fromValues(0,0,-1))>Math.PI/180)return;e.adjustments.adjust(10)}}))}if(e.clearHighlighting(),null!=r.components&&null!=r.components.selection&&r.components.selection.length>0){var x=r.components.selection;null==n&&(console.warn("No function defined to map between global IDs and local product and model IDs"),n=function(t){var e=t.split("_"),r=parseInt(e[0],10);return{productId:parseInt(e[1],10),modelId:r}});var B={},w=[];x.map((function(t){return n(t.ifc_guid)})).forEach((function(t){(B[t.modelId]||(B[t.modelId]=[])).push(t.productId),w.push({id:t.productId,model:t.modelId})})),Object.getOwnPropertyNames(B).forEach((function(t){e.addState(c.State.HIGHLIGHTED,B[t],parseInt(t,10))})),null==f&&(e.renderingMode=o.RenderingMode.XRAY_ULTRA,e.show(o.ViewType.DEFAULT,void 0,void 0,i>0).then((function(){e.zoomTo(w,void 0,i>0,!1)})))}},t.SetClipping=function(e,r){if(e.unclip(),e.sectionBox.setToInfinity(),null!=r.clipping_planes&&0!==r.clipping_planes.length)if(6!==r.clipping_planes.length){var n=t.getClippingEquation(r.clipping_planes[0]),i=t.getClippingEquation(r.clipping_planes[1]);null!=n&&e.setClippingPlaneA(n),null!=i&&e.setClippingPlaneB(i)}else e.sectionBox.setToPlanes(r.clipping_planes)},t.getClippingEquation=function(t){if(null==t||null==t.direction||null==t.location)return null;var e=t.direction,r=t.location,n=0-e[0]*r[0]-e[1]*r[1]-e[2]*r[2];return[e[0],e[1],e[2],n]},Object.defineProperty(t,"resolution",{get:function(){if(null!=t._resolution)return t._resolution;var e=document.createElement("div");e.style.position="absolute",e.style.width="100mm",document.body.appendChild(e);var r=e.getBoundingClientRect();return document.body.removeChild(e),t._resolution=r.width/.1,t._resolution},enumerable:!1,configurable:!0}),t._currentIndex=0,t._resolution=null,t}();e.Viewpoint=f},4134:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Visibility=void 0;e.Visibility=function(){this.default_visibility=!1}},6413:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CameraType=e.CameraProperties=void 0;var n,i=r(887),a=function(){function t(t){this._fov=45,this._type=n.PERSPECTIVE,this.onChange=function(){},this.onChange=t||function(){}}return Object.defineProperty(t.prototype,"fov",{get:function(){return this._fov},set:function(t){if(null==t||t<=0||t>180)throw new Error("Perspective field of view has to be a positive number between 0 and 180 degrees");this._fov=t,this.onChange&&this.type===n.PERSPECTIVE&&this.onChange()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"near",{get:function(){return this._near},set:function(t){this._near=t,this.onChange&&this.onChange()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"far",{get:function(){return this._far},set:function(t){this._far=t,this.onChange&&this.onChange()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(t){if(null==t||t<=0)throw new Error("Orthographic view height has to be a positive number");this._height=t,this.onChange&&this.type===n.ORTHOGONAL&&this.onChange()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){return this._type},set:function(t){this._type=t,this.onChange&&this.onChange()},enumerable:!1,configurable:!0}),t.prototype.getProjectionMatrix=function(t,e){var r=t/e;switch(this.type){case n.PERSPECTIVE:return i.mat4.perspective(i.mat4.create(),this.fov*Math.PI/180,r,this.near,this.far);case n.ORTHOGONAL:var a=this.height,o=a*r;return i.mat4.ortho(i.mat4.create(),o/-2,o/2,a/-2,a/2,this.near,this.far);default:throw new Error("Undefined camera type")}},t}();e.CameraProperties=a,function(t){t[t.PERSPECTIVE=0]="PERSPECTIVE",t[t.ORTHOGONAL=1]="ORTHOGONAL"}(n=e.CameraType||(e.CameraType={}))},3810:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Abilities=void 0;var n=r(7997),i=r(1275),a=function(){function t(){}return t.check=function(){var t=new i.CheckResult,e=document.createElement("canvas");if(e){var r=null,a=0;if(n.WebGLUtils.setupWebGL(e,(function(t,e){r=t,a=e}),null,(function(e){t.errors.push(e)})),null==r)t.errors.push("Browser doesn't support WebGL. This is critical.");else{!(a<2)||r.getExtension("OES_texture_float")||r.getExtension("MOZ_OES_texture_float")||r.getExtension("WEBKIT_OES_texture_float")||t.errors.push("Floating point texture extension is not supported."),!(a<2)||r.getExtension("WEBGL_depth_texture")||r.getExtension("WEBKIT_WEBGL_depth_texture")||r.getExtension("MOZ_WEBGL_depth_texture")||t.warnings.push("Depth texture extension is not available. It will not be possible to get 3D coordinates of user interactions.");var o=r.getParameter(r.MAX_VERTEX_TEXTURE_IMAGE_UNITS);o<4&&t.errors.push("Browser supports only "+o+" vertex texture image units but minimal requirement for the viewer is 4.")}}else t.errors.push("Browser doesn't have support for HTMLCanvasElement. This is critical.");return window.File&&window.FileReader&&window.Blob||t.errors.push("Browser doesn't support 'File', 'FileReader' or 'Blob' objects."),window.Int32Array&&window.Float32Array||t.errors.push("Browser doesn't support TypedArrays. These are crucial for binary parsing and for comunication with GPU."),0==t.errors.length&&(t.noErrors=!0),0==t.warnings.length&&(t.noWarnings=!0),t},t}();e.Abilities=a},5460:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BBox=void 0;var n=r(887),i=function(){function t(){}return t.centre=function(t){return[t[0]+t[3]/2,t[1]+t[4]/2,t[2]+t[5]/2]},t.union=function(t,e){if(null==e&&null==t)return null;if(null==e&&null!=t)return t;if(null!=e&&null==t)return e;var r=[t[0],t[1],t[2]],n=[e[0],e[1],e[2]],i=[t[0]+t[3],t[1]+t[4],t[2]+t[5]],a=[e[0]+e[3],e[1]+e[4],e[2]+e[5]],o=[Math.min(r[0],n[0]),Math.min(r[1],n[1]),Math.min(r[2],n[2])],s=[Math.max(i[0],a[0]),Math.max(i[1],a[1]),Math.max(i[2],a[2])];return[o[0],o[1],o[2],s[0]-o[0],s[1]-o[1],s[2]-o[2]]},t.intersection=function(e,r){if(null==e||null==r||t.areDisjoint(e,r))return null;var n=[e[0],e[1],e[2]],i=[r[0],r[1],r[2]],a=[e[0]+e[3],e[1]+e[4],e[2]+e[5]],o=[r[0]+r[3],r[1]+r[4],r[2]+r[5]],s=[Math.max(n[0],i[0]),Math.max(n[1],i[1]),Math.max(n[2],i[2])],u=[Math.min(a[0],o[0]),Math.min(a[1],o[1]),Math.min(a[2],o[2])];return[s[0],s[1],s[2],u[0]-s[0],u[1]-s[1],u[2]-s[2]]},t.areDisjoint=function(t,e){if(null==t||null==e)throw new Error("Bounding box is not defined");var r=[t[0],t[1],t[2]],n=[e[0],e[1],e[2]],i=[t[0]+t[3],t[1]+t[4],t[2]+t[5]],a=[e[0]+e[3],e[1]+e[4],e[2]+e[5]];return r[0]>a[0]||r[1]>a[1]||r[2]>a[2]||n[0]>i[0]||n[1]>i[1]||n[2]>i[2]},t.getDiagonalSize=function(t){return Math.sqrt(t[3]*t[3]+t[4]*t[4]+t[5]*t[5])},t.getSizeInView=function(t,e,r){e=n.vec3.normalize(n.vec3.create(),e),r=n.vec3.normalize(n.vec3.create(),r);var i=n.vec3.negate(n.vec3.create(),e),a=Math.max(t[3],t[4],t[5]),o=n.vec3.fromValues(t[0]+t[3]/2,t[1]+t[4]/2,t[2]+t[5]/2),s=n.vec3.scale(n.vec3.create(),i,a),u=n.vec3.add(n.vec3.create(),o,s),c=n.mat4.lookAt(n.mat4.create(),u,o,r),l=Array.prototype.slice.call(c.slice(0,3)),h=Array.prototype.slice.call(c.slice(4,7)),f=Array.prototype.slice.call(c.slice(8,11)),d=n.vec3.scale(n.vec3.create(),l,t[0]),A=n.vec3.scale(n.vec3.create(),l,t[0]+t[3]),p=n.vec3.scale(n.vec3.create(),h,t[1]),v=n.vec3.scale(n.vec3.create(),h,t[1]+t[4]),I=n.vec3.scale(n.vec3.create(),f,t[2]),m=n.vec3.scale(n.vec3.create(),f,t[2]+t[5]),g=n.vec3.min(n.vec3.create(),d,A),E=n.vec3.min(n.vec3.create(),p,v),T=n.vec3.min(n.vec3.create(),I,m),C=n.vec3.max(n.vec3.create(),d,A),R=n.vec3.max(n.vec3.create(),p,v),b=n.vec3.max(n.vec3.create(),I,m),M=n.vec3.fromValues(g[0]+E[0]+T[0],g[1]+E[1]+T[1],g[2]+E[2]+T[2]),y=n.vec3.fromValues(C[0]+R[0]+b[0],C[1]+R[1]+b[1],C[2]+R[2]+b[2]),F=n.vec3.sub(n.vec3.create(),y,M);return{width:1*F[0],height:1*F[1],depth:F[2]}},t}();e.BBox=i},1275:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CheckResult=void 0;e.CheckResult=function(){this.warnings=[],this.errors=[],this.noErrors=!1,this.noWarnings=!1}},269:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FpsWatch=void 0;var r=function(){function t(t){var e=this;this.buffer=new n(20);var r=function(n){e.buffer.next(n),t(r)};t(r)}return Object.defineProperty(t.prototype,"fps",{get:function(){var t=this.buffer.first,e=this.buffer.last;return null==t||null==e?60:this.buffer.size/(e-t)*1e3},enumerable:!1,configurable:!0}),t}();e.FpsWatch=r;var n=function(){function t(t){this.size=t,this.inner=[],this.idx=0}return t.prototype.next=function(t){this.inner[this.idx]=t,this.idx=(this.idx+1)%this.size},Object.defineProperty(t.prototype,"first",{get:function(){return this.inner[this.idx]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"last",{get:function(){var t=(this.idx+this.size-1)%this.size;return this.inner[t]},enumerable:!1,configurable:!0}),t}()},7300:function(t,e,r){var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||n(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),i(r(8194),e),i(r(6920),e),i(r(3753),e),i(r(1850),e),i(r(1275),e),i(r(4469),e),i(r(3157),e)},6920:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.LoadingPhase=e.MessageType=e.MessageProgress=e.Message=void 0;var r,n;e.Message=function(){},e.MessageProgress=function(t){var e=100/3;return e*t.phase+e*t.percent/100},(n=e.MessageType||(e.MessageType={}))[n.PROGRESS=0]="PROGRESS",n[n.COMPLETED=1]="COMPLETED",n[n.FAILED=2]="FAILED",(r=e.LoadingPhase||(e.LoadingPhase={}))[r.DOWNLOADING=0]="DOWNLOADING",r[r.READING=1]="READING",r[r.LOADING=2]="LOADING"},3157:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ProductAnalyticalResult=void 0;e.ProductAnalyticalResult=function(){}},1850:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ProductIdentity=void 0;e.ProductIdentity=function(){}},3753:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ProductMap=void 0;var n=r(8194),i=function(){function t(){this.states=[]}return t.clone=function(e){var r=new t;return r.productID=e.productID,r.renderId=e.renderId,r.type=e.type,r.bBox=new Float32Array(e.bBox),r.spans=e.spans,r.states=e.states.slice(0),r},t.addState=function(t,e){null==t.states.find((function(t){return t===e}))&&t.states.push(e)},t.removeState=function(t,e){var r=t.states.indexOf(e);r<0||t.states.splice(r,1)},t.getState=function(t){return null==t.states||0===t.states.length?n.State.UNDEFINED:n.StatePriorities.getHighestPriority(t.states)},t}();e.ProductMap=i},8194:(t,e)=>{var r;Object.defineProperty(e,"__esModule",{value:!0}),e.StatePriorities=e.State=void 0,function(t){t[t.UNDEFINED=255]="UNDEFINED",t[t.HIDDEN=254]="HIDDEN",t[t.HIGHLIGHTED=253]="HIGHLIGHTED",t[t.XRAYVISIBLE=252]="XRAYVISIBLE",t[t.PICKING_ONLY=251]="PICKING_ONLY",t[t.HOVEROVER=250]="HOVEROVER",t[t.UNSTYLED=225]="UNSTYLED"}(r=e.State||(e.State={}));var n=function(){function t(){}return t.getPriority=function(t){switch(t){case r.HIGHLIGHTED:return 1;case r.PICKING_ONLY:return 2;case r.HIDDEN:return 3;case r.XRAYVISIBLE:return 4;default:return 100}},t.getHighestPriority=function(t){var e=this;if(null==t||0===t.length)return null;if(1===t.length)return t[0];var n=t.map((function(t){return{state:t,priority:e.getPriority(t)}}));n.sort((function(t,e){return t.priority-e.priority}));var i=n[0];return i.priority>50?r.UNDEFINED:i.state},t}();e.StatePriorities=n},1150:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.VectorUtils=void 0;var n=r(887),i=function(){function t(){}return t.getVec3=function(t){if(t.length>=3)return n.vec3.fromValues(t[0],t[1],t[2])},t}();e.VectorUtils=i},4469:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0})},7997:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.WebGLUtils=void 0;var r=function(){function t(){}return t.makeFailHTML=function(t){return'<table style="background-color: #8CE; width: 100%; height: 100%;"><tr><td align="center"><div style="display: table-cell; vertical-align: middle;"><div style="">'+t+"</div></div></td></tr></table>"},t.setupWebGL=function(e,r,n,i){i=i||function(r){var n=e.parentNode;if(n){var i="undefined"!=typeof WebGLRenderingContext?t.OTHER_PROBLEM:t.GET_A_WEBGL_BROWSER;r&&(i+="<br/><br/>Status: "+r),n.innerHTML=t.makeFailHTML(i)}},e.addEventListener&&e.addEventListener("webglcontextcreationerror",(function(t){i(t.statusMessage)}),!1),t.create3DContext(e,r,n)},t.create3DContext=function(t,e,r){var n=null;try{if(null!=(n=t.getContext("webgl2",r)))return void e(n,2)}catch(t){}["webgl","experimental-webgl","webkit-3d","moz-webgl"].forEach((function(e){if(null==n)try{n=t.getContext(e,r)}catch(t){}})),e(n,1)},t.GET_A_WEBGL_BROWSER='This page requires a browser that supports WebGL.<br/><a href="http://get.webgl.org">Click here to upgrade your browser.</a>',t.OTHER_PROBLEM='It doesn\'t appear your computer can support WebGL.<br/><a href="http://get.webgl.org/troubleshooting/">Click here for more information.</a>',t}();e.WebGLUtils=r},9499:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Framebuffer=void 0;var n=r(1205),i=r(887),a=function(){function t(t,e,r,n,i){if(this.gl=t,this.width=e,this.height=r,this.withDepth=n,this.glVersion=i,this.isReady=!0,this._disposed=!1,this._glVersion=1,this.width=e=Math.floor(e),this.height=r=Math.floor(r),0!==e&&0!==r){if(this._glVersion=i,this.framebuffer=t.createFramebuffer(),t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer),this.renderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,this.renderbuffer),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,e,r),this.texture=t.createTexture(),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,this.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e,r,0,t.RGBA,t.UNSIGNED_BYTE,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,1),n&&(this.depthTexture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.depthTexture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),1===this._glVersion?t.texImage2D(t.TEXTURE_2D,0,t.DEPTH_COMPONENT,e,r,0,t.DEPTH_COMPONENT,t.UNSIGNED_SHORT,null):t.texImage2D(t.TEXTURE_2D,0,t.DEPTH_COMPONENT16,e,r,0,t.DEPTH_COMPONENT,t.UNSIGNED_SHORT,null)),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texture,0),n?t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,this.depthTexture,0):t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,this.renderbuffer),t.checkFramebufferStatus(t.FRAMEBUFFER)!==t.FRAMEBUFFER_COMPLETE)throw new Error("this combination of attachments does not work")}else this.isReady=!1}return Object.defineProperty(t.prototype,"depthReader",{get:function(){return null!=this._depthReader||(this._depthReader=new n.DepthReader(this.gl,this.glVersion)),this._depthReader},enumerable:!1,configurable:!0}),t.prototype.bind=function(){if(this.isReady){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer),t.bindRenderbuffer(t.RENDERBUFFER,this.renderbuffer)}},t.prototype.getPixel=function(t,e){if(!this.isReady)return null;var r=new Uint8Array(4);return this.gl.readPixels(t,e,1,1,this.gl.RGBA,this.gl.UNSIGNED_BYTE,r),r},t.prototype.getDepth=function(t,e){return this.isReady?this.withDepth?this.depthReader.getDepth(t,e,this.depthTexture,this.width,this.height):-1:null},t.prototype.getDepths=function(t){return this.withDepth&&this.isReady?this.depthReader.getDepths(t,this.depthTexture,this.width,this.height):null},t.prototype.getXYZArray=function(t){var e=this;return this.withDepth&&this.isReady?this.getDepths(t).map((function(r,n){if(255===r)return null;var a=t[n],o=a.x/e.width*2-1,s=a.y/e.height*2-1,u=2*(r/255-.5);return i.vec3.fromValues(o,s,u)})):null},t.prototype.getXYZ=function(t,e){return this.withDepth&&this.isReady?this.getXYZArray([{x:t,y:e}])[0]:null},t.prototype.getXYZRange=function(t,e){if(!this.withDepth||!this.isReady)return null;var r=this.getDepth(t,e);if(255===r)return null;var n=t/this.width*2-1,a=e/this.height*2-1,o=2*(r/255-.5),s=2*(Math.max(r-1,0)/255-.5),u=2*(Math.min(r+1,255)/255-.5);return{far:i.vec3.fromValues(n,a,u),near:i.vec3.fromValues(n,a,s),middle:i.vec3.fromValues(n,a,o)}},t.prototype.getId=function(t,e){if(!this.isReady)return null;var r=this.getPixel(t,e);return 0!==r[3]?r[0]+256*r[1]+256*r[2]*256:null},t.prototype.getIds=function(t){var e=this;return this.isReady?t.map((function(t){var r=e.getPixel(t.x,t.y);return 0!==r[3]?r[0]+256*r[1]+256*r[2]*256:null})):null},t.prototype.getImageDataArray=function(){if(!this.isReady)return null;var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer),t.bindRenderbuffer(t.RENDERBUFFER,this.renderbuffer);var e=new Uint8Array(this.width*this.height*4);t.readPixels(0,0,this.width,this.height,t.RGBA,t.UNSIGNED_BYTE,e);for(var r=new Uint8ClampedArray(this.width*this.height*4),n=0;n<this.height;n++){var i=e.subarray(n*this.width*4,(n+1)*this.width*4),a=this.height-n-1;r.set(new Uint8ClampedArray(i),a*this.width*4)}return r},t.prototype.get2DCanvas=function(){if(!this.isReady)return document.createElement("canvas");var t=this.getImageDataArray(),e=document.createElement("canvas");e.width=this.width,e.height=this.height;var r=e.getContext("2d"),n=r.createImageData(this.width,this.height);return n.data.set(new Uint8ClampedArray(t)),r.putImageData(n,0,0),e},t.prototype.getImageDataUrl=function(t){return void 0===t&&(t="png"),this.isReady?this.get2DCanvas().toDataURL("image/".concat(t)):null},t.prototype.getImageDataBlob=function(t,e){void 0===e&&(e="png"),this.isReady&&this.get2DCanvas().toBlob(t,"image/".concat(e))},t.prototype.delete=function(){if(!this._disposed&&this.isReady){var t=this.gl;"undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext&&t.invalidateFramebuffer(t.FRAMEBUFFER,[t.COLOR_ATTACHMENT0,t.DEPTH_ATTACHMENT]),t.deleteFramebuffer(this.framebuffer),t.deleteRenderbuffer(this.renderbuffer),t.deleteTexture(this.texture),t.deleteTexture(this.depthTexture),null!=this._depthReader&&this._depthReader.delete(),this._disposed=!0}},t}();e.Framebuffer=a},6086:function(t,e,r){var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||n(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),i(r(9438),e),i(r(3425),e),i(r(7300),e),i(r(8378),e),i(r(6413),e),i(r(2607),e),i(r(9499),e),i(r(4932),e),i(r(2067),e),i(r(1675),e),i(r(3948),e),i(r(1271),e)},4932:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.DrawMode=e.ModelHandle=void 0;var n,i=r(3948),a=r(8194),o=r(9438),s=r(6920),u=r(887),c=r(3753),l=r(5460),h=r(1150),f=function(){function t(e,r,n){if(this._gl=e,this._model=r,this.tag=null,this.wcs=u.vec3.create(),this._stopped=!1,this.pickable=!0,this.clippable=!0,this.pinned=!1,this._changed=!1,this._empty=!1,this._drawProductIds=null,this._clippingPlaneA=null,this._clippingPlaneB=null,this._clippingA=!1,this._clippingB=!1,this._glVersion=1,void 0===e||void 0===r)throw new Error("WebGL context and geometry model must be specified");if("undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext&&(this._glVersion=2),n=n||function(t){},this.id=t._instancesNum++,this.meter=r.meter,this.wcs=h.VectorUtils.getVec3(r.wcs),0===r.indices.length)return this._empty=!0,void(this._changed=!1);this.InitGlBuffersAndTextures(e),this.InitRegions(r.regions),this.InitGPU(e,r,n),this._changed=!0}return Object.defineProperty(t.prototype,"stopped",{get:function(){return this._stopped},set:function(t){this._stopped=t,this._changed=!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isolatedProducts",{get:function(){return this._drawProductIds},set:function(t){this._drawProductIds=t,this._changed=!0},enumerable:!1,configurable:!0}),t.prototype.getRegion=function(t){var e=this,r=null;if(null!=this.isolatedProducts){var n=[];if(this.isolatedProducts.forEach((function(r){var i=e.getProductMap(r,t);i&&n.push(i)})),0===n.length)return null;var a=n.reduce((function(t,e){return null==t?e.bBox:l.BBox.union(t,e.bBox)}),null);return(r=new i.Region).population=n.length,r.bbox=new Float32Array(a),r.centre=new Float32Array([a[0]+a[3]/2,a[1]+a[4]/2,a[2]+a[5]/2]),r}r=i.Region.clone(this._region);var o=u.vec3.subtract(u.vec3.create(),this.wcs,t);r.centre=u.vec3.add(u.vec3.create(),o,h.VectorUtils.getVec3(r.centre));var s=u.vec3.add(u.vec3.create(),o,h.VectorUtils.getVec3(r.bbox.subarray(0,3)));return r.bbox.set(new Float32Array(s),0),r},Object.defineProperty(t.prototype,"changed",{get:function(){return this._changed},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"gl1",{get:function(){return 1===this._glVersion?this._gl:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"gl2",{get:function(){return 2===this._glVersion?this._gl:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clippingPlaneA",{get:function(){return this._clippingPlaneA},set:function(t){this._clippingPlaneA=t,this._clippingA=null!=t,this._changed=!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clippingPlaneB",{get:function(){return this._clippingPlaneB},set:function(t){this._clippingPlaneB=t,this._clippingB=null!=t,this._changed=!0},enumerable:!1,configurable:!0}),t.prototype.InitRegions=function(t){var e=this;this.empty||(this._region=t[0],t.forEach((function(t){t.population>e._region.population&&(e._region=t)})),-1===this._region.bbox.indexOf(Number.NaN)&&-1===this._region.bbox.indexOf(1/0)&&-1===this._region.bbox.indexOf(-1/0)||(console.warn("Invalid region detected. Attempting to recompute the region based on all the products."),this._region=this.recomputeCompleteRegion()),null==this._region&&(this._region=new i.Region,this._region.population=0,this._region.centre=new Float32Array([0,0,0]),this._region.bbox=new Float32Array([0,0,0,0,0,0])))},t.prototype.recomputeCompleteRegion=function(){var t=this,e=Object.getOwnPropertyNames(this._model.productMaps).map((function(e){return t._model.productMaps[e]})),r=e.reduce((function(t,e){return-1!==e.bBox.indexOf(Number.NaN)||-1!==e.bBox.indexOf(1/0)||-1!==e.bBox.indexOf(-1/0)?t:null==t?e.bBox:l.BBox.union(t,e.bBox)}),null),n=new i.Region;return null==r?(console.error("Failed to recompute the region. No valid product bounding boxes found."),n):(n.population=e.length,n.bbox=new Float32Array(r),n.centre=new Float32Array([r[0]+r[3]/2,r[1]+r[4]/2,r[2]+r[5]/2]),n)},t.prototype.InitGlBuffersAndTextures=function(t){this.empty||(this._vertexTexture=t.createTexture(),this._matrixTexture=t.createTexture(),this._styleTexture=t.createTexture(),this._vertexTextureSize=0,this._matrixTextureSize=0,this._styleTextureSize=0,this._normalBuffer=t.createBuffer(),this._indexBuffer=t.createBuffer(),this._productBuffer=t.createBuffer(),this._styleBuffer=t.createBuffer(),this._stateBuffer=t.createBuffer(),this._transformationBuffer=t.createBuffer())},t.prototype.setActive=function(t,e){if(!this.stopped&&!this.empty){var r=1===this._glVersion?this.gl1:this.gl2;this._vertexTextureSize>0&&(r.activeTexture(r.TEXTURE1),r.bindTexture(r.TEXTURE_2D,this._vertexTexture),r.uniform1i(t.VertexSamplerUniform,1)),this._matrixTextureSize>0&&(r.activeTexture(r.TEXTURE2),r.bindTexture(r.TEXTURE_2D,this._matrixTexture),r.uniform1i(t.MatrixSamplerUniform,2)),this._styleTextureSize>0&&(r.activeTexture(r.TEXTURE3),r.bindTexture(r.TEXTURE_2D,this._styleTexture),r.uniform1i(t.StyleSamplerUniform,3)),r.bindBuffer(r.ARRAY_BUFFER,this._normalBuffer),r.vertexAttribPointer(t.NormalAttrPointer,2,r.UNSIGNED_BYTE,!1,0,0),r.bindBuffer(r.ARRAY_BUFFER,this._indexBuffer),r.vertexAttribPointer(t.IndexlAttrPointer,1,r.FLOAT,!1,0,0),r.bindBuffer(r.ARRAY_BUFFER,this._productBuffer),r.vertexAttribPointer(t.ProductAttrPointer,1,r.FLOAT,!1,0,0),r.bindBuffer(r.ARRAY_BUFFER,this._stateBuffer),r.vertexAttribPointer(t.StateAttrPointer,2,r.UNSIGNED_BYTE,!1,0,0),r.bindBuffer(r.ARRAY_BUFFER,this._styleBuffer),r.vertexAttribPointer(t.StyleAttrPointer,1,r.UNSIGNED_SHORT,!1,0,0),r.bindBuffer(r.ARRAY_BUFFER,this._transformationBuffer),r.vertexAttribPointer(t.TransformationAttrPointer,1,r.FLOAT,!1,0,0),r.uniform1f(t.VertexTextureSizeUniform,this._vertexTextureSize),r.uniform1f(t.MatrixTextureSizeUniform,this._matrixTextureSize),r.uniform1f(t.StyleTextureSizeUniform,this._styleTextureSize),r.uniform1f(t.MeterUniform,this.meter);var n=u.vec3.subtract(u.vec3.create(),this.wcs,e);if(r.uniform3fv(t.WcsUniform,n),r.uniform1i(t.ClippingAUniform,this._clippingA?1:0),r.uniform1i(t.ClippingBUniform,this._clippingB?1:0),this._clippingA){var i=this.transformPlane(this._clippingPlaneA,e);r.uniform4fv(t.ClippingPlaneAUniform,i)}this._clippingB&&(i=this.transformPlane(this._clippingPlaneB,e),r.uniform4fv(t.ClippingPlaneBUniform,i))}},t.prototype.transformPlane=function(t,e){var r=u.vec3.len(h.VectorUtils.getVec3(t)),n=t[0],i=t[1],a=t[2],o=t[3],s=n*-o/r,c=i*-o/r,l=a*-o/r;return o=0-n*(s-=e[0])-i*(c-=e[1])-a*(l-=e[2]),new Float32Array([n,i,a,o])},t.prototype.draw=function(t,e){var r=this;if(this._changed=!1,!this.stopped&&!this.empty){var i=this._gl,a=this.isolatedProducts&&this.isolatedProducts.length>0?this.isolatedProducts.reduce((function(t,e){var n=r.getProductMap(e);return n&&t.push(n),t}),new Array):null;if(null==a||0!==a.length)if(null!=t)if(t===n.SOLID&&this._model.transparentIndex>0)if(null==a)if(null==e||100===e||null==this._model.breaks[e])i.drawArrays(i.TRIANGLES,0,this._model.transparentIndex);else{var o=this._model.breaks[e];i.drawArrays(i.TRIANGLES,0,o[0]+1)}else a.forEach((function(t){t.spans.filter((function(t){return t[1]<=r._model.transparentIndex})).forEach((function(t){i.drawArrays(i.TRIANGLES,t[0],t[1]-t[0])}))}));else t===n.TRANSPARENT&&this._model.transparentIndex<this._numberOfIndices&&(i.depthMask(!1),null==a?null==e||100===e||null==this._model.breaks[e]?i.drawArrays(i.TRIANGLES,this._model.transparentIndex,this._numberOfIndices-this._model.transparentIndex):(o=this._model.breaks[e],i.drawArrays(i.TRIANGLES,o[1],this._numberOfIndices-o[1])):a.forEach((function(t){t.spans.filter((function(t){return t[0]>=r._model.transparentIndex})).forEach((function(t){i.drawArrays(i.TRIANGLES,t[0],t[1]-t[0])}))})),i.depthMask(!0));else null==a?i.drawArrays(i.TRIANGLES,0,this._numberOfIndices):a.forEach((function(t){t.spans.forEach((function(t){i.drawArrays(i.TRIANGLES,t[0],t[1]-t[0])}))}))}},t.prototype.getProductId=function(t){return this.empty?null:this._model.productIdLookup[t]},t.prototype.getProductMap=function(t,e){if(this.empty)return null;var r=this._model.productMaps[t];if(null!=r){if(null!=e){r=c.ProductMap.clone(r);var n=h.VectorUtils.getVec3(r.bBox.subarray(0,3)),i=u.vec3.subtract(u.vec3.create(),this.wcs,e),a=u.vec3.add(u.vec3.create(),n,i);r.bBox.set(a,0)}return r}return null},t.prototype.getProductMaps=function(t){var e=this,r=new Array;return this.empty||t.forEach((function(t){var n=e._model.productMaps[t];null!=n&&r.push(n)})),r},t.prototype.getProductsOfType=function(t){var e=this,r=[];if(this.empty)return r;var n=o.Product.getAllSubTypes(t);return Object.getOwnPropertyNames(this._model.productMaps).forEach((function(t){var i=e._model.productMaps[t];n[i.type]&&r.push(i)})),r},t.prototype.unload=function(){if(this.empty)return null;var t=this._gl;t.deleteTexture(this._vertexTexture),t.deleteTexture(this._matrixTexture),t.deleteTexture(this._styleTexture),t.deleteBuffer(this._normalBuffer),t.deleteBuffer(this._indexBuffer),t.deleteBuffer(this._productBuffer),t.deleteBuffer(this._styleBuffer),t.deleteBuffer(this._stateBuffer),t.deleteBuffer(this._transformationBuffer)},t.prototype.InitGPU=function(e,r,n){if(this.empty)return null;var i=function(t){var e={message:"Loading data into GPU",percent:t,type:s.MessageType.PROGRESS,phase:s.LoadingPhase.LOADING};n(e)};this._numberOfIndices=r.indices.length,this.bufferData(this._normalBuffer,r.normals),i(10),this.bufferData(this._indexBuffer,r.indices),i(30),this.bufferData(this._productBuffer,r.products),i(40),this.bufferData(this._stateBuffer,r.states),i(50),this.bufferData(this._transformationBuffer,r.transformations),i(60),this.bufferData(this._styleBuffer,r.styleIndices),this._vertexTextureSize=t.bufferTexture(e,this._vertexTexture,r.vertices,3),i(80),this._matrixTextureSize=t.bufferTexture(e,this._matrixTexture,r.matrices,4),i(90),this._styleTextureSize=t.bufferTexture(e,this._styleTexture,r.styles),i(100),r.normals=null,r.indices=null,r.products=null,r.transformations=null,r.styleIndices=null,r.vertices=null,r.matrices=null;var a={message:"Model loaded",percent:100,type:s.MessageType.COMPLETED,phase:s.LoadingPhase.LOADING};n(a)},t.prototype.bufferData=function(t,e){var r;1===this._glVersion&&((r=this.gl1).bindBuffer(r.ARRAY_BUFFER,t),r.bufferData(r.ARRAY_BUFFER,e,r.STATIC_DRAW)),2===this._glVersion&&((r=this.gl2).bindBuffer(r.ARRAY_BUFFER,t),r.bufferData(r.ARRAY_BUFFER,e,r.STATIC_DRAW))},t.bufferTexture=function(t,e,r,n){if(0===r.length){t.bindTexture(t.TEXTURE_2D,e);var i=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,2,2,0,t.RGBA,t.UNSIGNED_BYTE,i),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),2}var a=r instanceof Float32Array,o=0,s=t.getParameter(t.MAX_TEXTURE_SIZE);if(a)o=Math.ceil(Math.sqrt(Math.ceil(r.length/n)))+1;else{var u=Math.sqrt(r.byteLength/4);o=Math.ceil(u)}if(0===o)return 0;if(o>s)throw new Error("Too much data! It cannot fit into the texture.");if(t.bindTexture(t.TEXTURE_2D,e),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,0),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,0),r instanceof Float32Array){if(i=null,o*o*n!==r.length?(i=new Float32Array(o*o*n)).set(r):i=r,t instanceof WebGLRenderingContext){var c=null;switch(n){case 1:c=t.ALPHA;break;case 3:c=t.RGB;break;case 4:c=t.RGBA}t.texImage2D(t.TEXTURE_2D,0,c,o,o,0,c,t.FLOAT,i)}if("undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext){var l=t,h=null,f=null;switch(n){case 1:f=l.RED,h=l.R32F;break;case 3:f=l.RGB,h=l.RGB32F;break;case 4:f=l.RGBA,h=l.RGBA32F}l.texImage2D(l.TEXTURE_2D,0,h,o,o,0,f,l.FLOAT,i)}}else t.texImage2D(t.TEXTURE_2D,0,t.RGBA,o,o,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(r.buffer));return t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),o},t.prototype.getState=function(t){var e=this.getFirstSpan(t);return null==e?null:this._model.states[2*e[0]]},t.prototype.getStates=function(){var t=this,e=[];return Object.getOwnPropertyNames(this._model.productMaps).forEach((function(r){var n=t._model.productMaps[+r];null!=n.states&&0!==n.states.length&&(1===n.states.length&&n.states[0]===a.State.UNDEFINED||e.push({id:n.productID,states:n.states.slice(0)}))})),e},t.prototype.getStyle=function(t){var e=this.getFirstSpan(t);return null==e?null:this._model.states[2*e[0]+1]},t.prototype.getFirstSpan=function(t){if(this.empty)return null;if(void 0===t)throw new Error("id must be defined");var e=this.getProductMap(t);if(null===e)return null;var r=e.spans[0];return void 0===r?null:r},t.prototype.addState=function(t,e){var r=this;this.empty||(this.checkStateArgs(t,e),this.getMaps(e).forEach((function(e){c.ProductMap.addState(e,t);var n=c.ProductMap.getState(e);e.spans.forEach((function(t){for(var e=t[0];e<t[1];e++)r._model.states[2*e]=n}))})),this.bufferData(this._stateBuffer,this._model.states),this._changed=!0)},t.prototype.setState=function(t,e){var r=this;this.empty||(this.checkStateArgs(t,e),this.getMaps(e).forEach((function(e){e.states=[t],e.spans.forEach((function(e){for(var n=e[0];n<e[1];n++)r._model.states[2*n]=t}))})),this.bufferData(this._stateBuffer,this._model.states),this._changed=!0)},t.prototype.clearHighlighting=function(){var t=this;Object.getOwnPropertyNames(this._model.productMaps).forEach((function(e){var r=t._model.productMaps[+e];c.ProductMap.removeState(r,a.State.HIGHLIGHTED);var n=c.ProductMap.getState(r);r.spans.forEach((function(e){for(var r=e[0];r<e[1];r++)t._model.states[2*r]=n}))})),this.bufferData(this._stateBuffer,this._model.states),this._changed=!0},t.prototype.removeState=function(t,e){var r=this;this.empty||(this.checkStateArgs(t,e),this.getMaps(e).forEach((function(e){c.ProductMap.removeState(e,t);var n=c.ProductMap.getState(e);e.spans.forEach((function(t){for(var e=t[0];e<t[1];e++)r._model.states[2*e]=n}))})),this.bufferData(this._stateBuffer,this._model.states),this._changed=!0)},t.prototype.checkStateArgs=function(t,e){if("number"!=typeof t||t<0||t>255)throw new Error("You have to specify state as an ID of state or index in style pallete.");if(void 0===e)throw new Error("You have to specify products as an array of product IDs or as a product type ID")},t.prototype.resetState=function(t){var e=this;if(this.empty)return null;if(null==t){Object.getOwnPropertyNames(this._model.productMaps).forEach((function(t){e._model.productMaps[+t].states=[]}));for(var r=0;r<this._model.states.length;r+=2)this._model.states[r]=a.State.UNDEFINED}else this.getMaps(t).forEach((function(t){t.states=[],t.spans.forEach((function(t){for(var r=t[0];r<t[1];r++)e._model.states[2*r]=a.State.UNDEFINED}))}));this.bufferData(this._stateBuffer,this._model.states),this._changed=!0},t.prototype.getProductsWithState=function(t){var e=this,r=[],n={},i=null!=this.isolatedProducts&&this.isolatedProducts.length>0;return i&&this.isolatedProducts.forEach((function(t){return n[t]=!0})),Object.getOwnPropertyNames(this._model.productMaps).forEach((function(a){var o=e._model.productMaps[a];-1!==o.states.indexOf(t)&&(i&&!n[o.productID]||r.push({id:o.productID,model:e.id}))})),r},t.prototype.setStyle=function(t,e){var r=this;if(this.empty)return null;if("number"!=typeof t&&t<0&&t>255)throw new Error("You have to specify state as an ID of state or index in style pallete.");if(void 0===e)throw new Error("You have to specify products as an array of product IDs or as a product type ID");this.getMaps(e).forEach((function(e){e.spans.forEach((function(e){for(var n=e[0];n<e[1];n++)r._model.states[2*n+1]=t}))})),this.bufferData(this._stateBuffer,this._model.states),this._changed=!0},t.prototype.getMaps=function(t){var e=this,r=[];if("number"==typeof t){var n=o.Product.getAllSubTypes(t);Object.getOwnPropertyNames(this._model.productMaps).forEach((function(t){var i=e._model.productMaps[t];n[i.type]&&r.push(i)}))}else t.forEach((function(t){var n=e.getProductMap(t);null!=n&&r.push(n)}));return r},t.prototype.resetStyles=function(){if(this.empty)return null;for(var t=0;t<this._model.states.length;t+=2)this._model.states[t+1]=a.State.UNSTYLED;this.bufferData(this._stateBuffer,this._model.states),this._changed=!0},t.prototype.getModelState=function(){var t=[];if(this.empty)return t;var e=this._model.productMaps;for(var r in e)if(e.hasOwnProperty(r)){var n=e[r],i=n.spans[0];if(void 0!==i){var a=this._model.states[2*i[0]],o=this._model.states[2*i[0]+1];t.push([n.productID,a+(o<<8)])}}return t},t.prototype.restoreModelState=function(t){var e=this;if(this.empty)return null;t.forEach((function(t){var r=t[0],n=t[1]>>8,i=t[1]-(n<<8),a=e.getProductMap(r);null!=a&&a.spans.forEach((function(t){for(var r=t[0];r<t[1];r++)e._model.states[2*r]=i,e._model.states[2*r+1]=n}))})),this.bufferData(this._stateBuffer,this._model.states),this._changed=!0},t.prototype.getProductAnalysis=function(t){var e=this;return null==t&&(t=[]),Object.getOwnPropertyNames(this._model.productMaps).forEach((function(r){var n=e._model.productMaps[r],i=n.spans.reduce((function(t,e){return t+e[1]-e[0]}),0),a=Math.max(n.bBox[3],n.bBox[4],n.bBox[5]),o=Math.sqrt(n.bBox[3]*n.bBox[3]+n.bBox[4]*n.bBox[4]+n.bBox[5]*n.bBox[5]);t.push({modelId:e.id,numberOfTriangles:i/3,productId:n.productID,size:a,volume:o,density:i/3/o})})),t},t._instancesNum=1,t}();e.ModelHandle=f,function(t){t[t.SOLID=0]="SOLID",t[t.TRANSPARENT=1]="TRANSPARENT"}(n=e.DrawMode||(e.DrawMode={}))},2067:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ModelPointers=void 0;e.ModelPointers=function(t,e){this.NormalAttrPointer=t.getAttribLocation(e,"aNormal"),this.IndexlAttrPointer=t.getAttribLocation(e,"aVertexIndex"),this.ProductAttrPointer=t.getAttribLocation(e,"aProduct"),this.StateAttrPointer=t.getAttribLocation(e,"aState"),this.StyleAttrPointer=t.getAttribLocation(e,"aStyleIndex"),this.TransformationAttrPointer=t.getAttribLocation(e,"aTransformationIndex"),this.VertexSamplerUniform=t.getUniformLocation(e,"uVertexSampler"),this.MatrixSamplerUniform=t.getUniformLocation(e,"uMatrixSampler"),this.StyleSamplerUniform=t.getUniformLocation(e,"uStyleSampler"),this.VertexTextureSizeUniform=t.getUniformLocation(e,"uVertexTextureSize"),this.MatrixTextureSizeUniform=t.getUniformLocation(e,"uMatrixTextureSize"),this.StyleTextureSizeUniform=t.getUniformLocation(e,"uStyleTextureSize"),this.ClippingPlaneAUniform=t.getUniformLocation(e,"uClippingPlaneA"),this.ClippingAUniform=t.getUniformLocation(e,"uClippingA"),this.ClippingPlaneBUniform=t.getUniformLocation(e,"uClippingPlaneB"),this.ClippingBUniform=t.getUniformLocation(e,"uClippingB"),this.MeterUniform=t.getUniformLocation(e,"uMeter"),this.WcsUniform=t.getUniformLocation(e,"uWcs"),t.enableVertexAttribArray(this.NormalAttrPointer),t.enableVertexAttribArray(this.IndexlAttrPointer),t.enableVertexAttribArray(this.ProductAttrPointer),t.enableVertexAttribArray(this.StateAttrPointer),t.enableVertexAttribArray(this.StyleAttrPointer),t.enableVertexAttribArray(this.TransformationAttrPointer)}},9549:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Animations=e.EasingType=void 0;var n,i=r(887);!function(t){t[t.LINEAR=0]="LINEAR",t[t.SINUS=1]="SINUS",t[t.SINUS2=2]="SINUS2",t[t.CIRCLE=3]="CIRCLE"}(n=e.EasingType||(e.EasingType={}));var a=function(){function t(t){var e=this;this.viewer=t,this._rotationOn=!1,this.setTimeout=window.setTimeout.bind(window),this.requestAnimationFrame=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}).bind(window),t.canvas.addEventListener("mousedown",(function(){return e.clear()})),t.canvas.addEventListener("touchstart",(function(){return e.clear()}))}return t.prototype.clear=function(){t.viewQueue=[],t.zoomQueue=[],this._rotationOn=!1},t.prototype.startRotation=function(){var t=this;return this._rotationOn?new Promise((function(t,e){t()})):(this._rotationOn=!0,new Promise((function(e,r){var n=function(){t._rotationOn?(t.viewer.mvMatrix=i.mat4.rotateZ(i.mat4.create(),t.viewer.mvMatrix,.2*Math.PI/180),t.requestAnimationFrame(n)):e()};n()})))},t.prototype.stopRotation=function(){this._rotationOn=!1},t.prototype.viewTo=function(e,r,a){var o=this;return void 0===a&&(a=n.SINUS2),new Promise((function(s,u){if(r<=0)return o.viewer.mvMatrix=e.mv,o.viewer.cameraProperties.height=e.height,void s();var c;if(c=t.viewQueue.length>0?t.viewQueue[t.viewQueue.length-1]:{mv:i.mat4.copy(i.mat4.create(),o.viewer.mvMatrix),height:o.viewer.cameraProperties.height},i.mat4.equals(c.mv,e.mv)&&Math.abs(c.height-e.height)<1e-6)s();else{var l=i.mat4.getRotation(i.quat.create(),c.mv),h=i.mat4.getScaling(i.vec3.create(),c.mv),f=i.mat4.getTranslation(i.vec3.create(),c.mv),d=null,A=i.mat4.getRotation(i.quat.create(),e.mv),p=i.mat4.getScaling(i.vec3.create(),e.mv),v=i.mat4.getTranslation(i.vec3.create(),e.mv);t.viewQueue.push(e);var I=function(){if(t.viewQueue[0]!==e)return null!=t.viewQueue.filter((function(t){return t===e})).pop()?void o.requestAnimationFrame(I):void s();null==d&&(d=Date.now());var u=Date.now();if(!(u<d+r))return o.viewer.mvMatrix=e.mv,o.viewer.cameraProperties.height=e.height,t.viewQueue.shift(),void s();var m=(u-d)/r;switch(a){case n.LINEAR:break;case n.CIRCLE:m=o.getCircleEasing(m);break;case n.SINUS:m=o.getSinEasing(m);break;case n.SINUS2:m=o.getSinEasing(m),m=o.getSinEasing(m)}var g=i.quat.slerp(i.quat.create(),l,A,m),E=i.vec3.lerp(i.vec3.create(),h,p,m),T=i.vec3.lerp(i.vec3.create(),f,v,m),C=(e.height-c.height)*m,R=i.mat4.fromRotationTranslationScaleOrigin(i.mat4.create(),g,T,E,i.vec3.create());o.viewer.mvMatrix=R,o.viewer.cameraProperties.height=c.height+C,o.requestAnimationFrame(I)};I()}}))},t.prototype.addZoom=function(e,r,n){var a=this,o=i.mat4.copy(i.mat4.create(),this.viewer.mvMatrix),s=this.viewer.cameraProperties.height;if(t.zoomQueue.length>0){var u=t.zoomQueue[t.zoomQueue.length-1];o=u.mv,s=u.height}var c=i.vec3.create();if(n)n=i.vec3.normalize(i.vec3.create(),n),i.vec3.negate(c,n);else{var l=i.mat4.invert(i.mat4.create(),o),h=i.mat4.getRotation(i.quat.create(),l),f=i.vec3.transformQuat(i.vec3.create(),i.vec3.fromValues(0,0,-1),h);i.vec3.negate(c,f)}var d=i.vec3.scale(i.vec3.create(),c,e),A=this.viewer.cameraProperties.fov*Math.PI/180,p=2*e*Math.tan(A/2),v=2*this.viewer.cameraProperties.near*Math.tan(A/2);s-p<v&&(p=0);var I={mv:i.mat4.translate(i.mat4.create(),o,d),height:s-p};return new Promise((function(e,n){if(r<=0)return t.zoomQueue=[],a.viewer.mvMatrix=I.mv,a.viewer.cameraProperties.height=I.height,void e();var u=null,c=d;t.zoomQueue.push(I);var l=function(){if(t.zoomQueue[0]!==I)return null!=t.zoomQueue.filter((function(t){return t===I})).pop()?void a.requestAnimationFrame(l):void e();null==u&&(u=Date.now());var n=Date.now();if(!(n<u+r))return a.viewer.mvMatrix=I.mv,a.viewer.cameraProperties.height=I.height,t.zoomQueue.shift(),void e();var h=(n-u)/r,f=i.vec3.lerp(i.vec3.create(),i.vec3.create(),c,h),d=p*h;a.viewer.mvMatrix=i.mat4.translate(i.mat4.create(),o,f),a.viewer.cameraProperties.height=s-d,a.requestAnimationFrame(l)};l()}))},t.prototype.getCircleEasing=function(t){if(t<=.5){var e=2*t;return(1-Math.sqrt(1-e*e))/2}return e=2*t-2,(1+Math.sqrt(1-e*e))/2},t.prototype.getSinEasing=function(t){var e=t*Math.PI-Math.PI/2;return.5*Math.sin(e)+.5},t.viewQueue=[],t.zoomQueue=[],t}();e.Animations=a},6235:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CameraAdjustment=void 0;var n=r(9499),i=r(887),a=r(6413),o=function(){function t(t,e,r){this.viewer=t,this.request=e,this.density=r,this.lastMvChange=0,this.dirty=!0,this.stopped=!0}return t.prototype.stop=function(){this.stopped=!0},t.prototype.watch=function(t){var e=this;if(void 0===t&&(t=500),this.viewer.hasDepthSupport){var r=this.request,n=this.viewer;this.stopped=!1;var i=function(){if(!e.stopped){if(!(Date.now()-e.lastMvChange<t+20))return n.mvMatrixAge<t?(e.dirty=!0,void r(i)):void(n.mvMatrixAge>t&&!e.dirty?r(i):n.height?(e.adjust(),e.dirty=!1,r(i)):r(i));r(i)}};r(i)}},t.prototype.adjust=function(t){void 0===t&&(t=null);var e=this.viewer;if(t=t||this.density,e.hasDepthSupport&&e.isRunning&&0!==e.activeHandles.length){var r=e.width/4,o=e.height/4;if(0!==r&&0!==o){var s=new n.Framebuffer(e.gl,r,o,!0,this.viewer.glVersion);e.draw(s,!0);for(var u=[],c=r/(t+1),l=o/(t+1),h=1;h<t+1;h++)for(var f=h*c,d=1;d<t+1;d++){var A=d*l;u.push({x:f,y:A})}var p=u.map((function(t){return 1})),v=s.getXYZArray(u).map((function(t,e){return null==t?null:{point:t,weight:p[e]}})).filter((function(t){return null!=t}));if(0!==v.length){var I=e.cameraProperties.getProjectionMatrix(r,o),m=i.mat4.invert(i.mat4.create(),I),g=v.map((function(t){return{point:i.vec3.transformMat4(i.vec3.create(),t.point,m),weight:t.weight}})).map((function(t){return{distance:-t.point[2],weight:t.weight}})),E=this.trimmedMean(g),T=e.cameraProperties.fov*Math.PI/180;if(e.camera===a.CameraType.PERSPECTIVE){var C=2*E*Math.tan(T/2);e.cameraProperties.height=C}if(e.camera===a.CameraType.ORTHOGONAL){var R=i.vec3.normalize(i.vec3.create(),e.getCameraDirection()),b=e.cameraProperties.height/(2*Math.tan(T/2)),M=b/E;if(M>1.1||M<.9){var y=b-E,F=i.vec3.scale(i.vec3.create(),R,y);e.mvMatrix=i.mat4.translate(i.mat4.create(),e.mvMatrix,F),this.lastMvChange=Date.now()}}}}}},t.prototype.trimmedMean=function(t){if(t.length>100){t.sort((function(t,e){return t.distance-e.distance}));var e=Math.floor(t.length/10);t=t.slice(e,t.length-e)}return t.reduce((function(t,e){return t+e.distance*e.weight}),0)/t.reduce((function(t,e){return t+e.weight}),0)},t}();e.CameraAdjustment=o},1271:function(t,e,r){var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||n(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.Animations=e.EasingType=void 0,i(r(6235),e);var a=r(9549);Object.defineProperty(e,"EasingType",{enumerable:!0,get:function(){return a.EasingType}}),Object.defineProperty(e,"Animations",{enumerable:!0,get:function(){return a.Animations}})},810:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.KeyboardNavigation=void 0;var n=r(887),i=function(){function t(){}return t.initKeyboardEvents=function(t){document.addEventListener("keydown",(function(e){if("walk"===t.navigationMode){var r=function(){var e=t.getCameraDirection(),r=t.getCameraPosition(),i=10*t.unitsInMeter;return n.vec3.add(n.vec3.create(),r,n.vec3.scale(n.vec3.create(),e,i))},i=!0===e.shiftKey?3:1;switch(e.code){case"KeyW":t.navigate("walk",0,2*i,n.vec3.create());break;case"KeyS":t.navigate("walk",0,-2*i,n.vec3.create());break;case"KeyA":t.navigate("pan",4*i,0,r());break;case"KeyD":t.navigate("pan",-4*i,0,r());break;case"KeyR":case"ArrowUp":t.navigate("pan",0,4*i,r());break;case"KeyF":case"ArrowDown":t.navigate("pan",0,-4*i,r());break;case"KeyQ":case"ArrowLeft":t.navigate("look-around",2,0,t.getCameraPosition());break;case"KeyE":case"ArrowRight":t.navigate("look-around",-2,0,t.getCameraPosition())}}}),!1)},t}();e.KeyboardNavigation=i},4802:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MouseNavigation=void 0;var n=r(887),i=function(){function t(){}return t.initMouseEvents=function(t){var e=!1,r=null,i=null,a=null,o=null,s="L",u=-1,c=-1,l=null,h=!1,f=n.vec3.create(),d=function(e){"walk"===t.navigationMode&&t.navigate("look-at",.5*e.movementX,.5*e.movementY,f)},A=null,p=null,v=0,I=t.canvas.requestPointerLock;null!=I&&(I=I.bind(t.canvas),t.canvas.onclick=function(){"walk"!==t.navigationMode||h||I()}),document.addEventListener("pointerlockchange",(function(e){document.pointerLockElement===t.canvas?h||(h=!0,t.canvas.addEventListener("mousemove",d,!1)):(h=!1,t.canvas.removeEventListener("mousemove",d,!1))}),!1);var m=0;t.canvas.addEventListener("mousedown",(function(h){return function(h){e=!0,r=h.clientX,i=h.clientY,a=h.clientX,o=h.clientY;var d=t.canvas.getBoundingClientRect(),A=a-d.left,p=t.height-(o-d.top),v=t.getEventData(A,p);if(null!=v){if(u=v.id,c=v.model,l=v.xyz,"locked-orbit"===t.navigationMode)f=t.lockedOrbitOrigin;else if(null==v||null==v.id||null==v.model){var I=t.getMergedRegion();if(null==I||null==I.centre)return void(e=!1);f=n.vec3.fromValues(I.centre[0],I.centre[1],I.centre[2])}else if(null==v.xyz){var m=t.getTargetBoundingBox(v.id,v.model);f=n.vec3.fromValues(m[0]+m[3]/2,m[1]+m[4]/2,m[2]+m[5]/2)}else f=v.xyz;switch(h.button){case 0:default:s="left";break;case 1:s="middle";break;case 2:s="right"}t.disableTextSelection()}else e=!1}(h)}),!0),t.canvas.addEventListener("wheel",(function(e){return function(e){try{if("none"===t.navigationMode)return;e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),v++;var r=n.vec2.fromValues(e.clientX,e.clientY);if(null==p||n.vec2.dist(p,r)>5||v>10){if(null==(A=t.getInteractionOrigin(e))){var i=t.getMergedRegion();if(i&&i.centre){var a=n.vec3.fromValues(i.centre[0],i.centre[1],i.centre[2]),o=t.getCameraPosition(),s=n.vec3.distance(a,o),u=n.mat4.invert(n.mat4.create(),t.mvMatrix),c=n.mat4.getRotation(n.quat.create(),u),l=n.vec3.normalize(n.vec3.create(),n.vec3.transformQuat(n.vec3.create(),[0,0,-1],c)),h=n.vec3.scale(n.vec3.create(),l,s);A=n.vec3.add(n.vec3.create(),h,o)}}p=r,v=0}var f=function(t){return 0==(t=+t)||isNaN(t)?t:t>0?1:-1};t.navigate("zoom",-1*f(e.deltaX),-1*f(e.deltaY),A)}catch(t){console.error(t)}}(e)}),!0),window.addEventListener("mouseup",(function(r){return function(r){if(e){e=!1;var n=r.clientX,i=r.clientY,h=Math.abs(n-a),f=Math.abs(i-o);if(h<3&&f<3&&"left"===s){t.fire("pick",{id:u,model:c,event:r,xyz:l});var d=(new Date).getTime();d-m<250&&t.fire("dblclick",{id:u,model:c,event:r,xyz:l}),m=d}t.enableTextSelection()}}(r)}),!0),window.addEventListener("mousemove",(function(n){return function(n){if(t.hoverPickEnabled&&!e&&"walk"!==t.navigationMode){var a=t.canvas.getBoundingClientRect(),o=n.clientX-a.left,u=t.height-(n.clientY-a.top),c=t.getEventData(o,u);t.setHoverPick(c.id,c.model),t.fire("hoverpick",{id:c.id,model:c.model,event:n,xyz:c.xyz})}if(e&&"none"!==t.navigationMode){var l=n.clientX,h=n.clientY,d=l-r,A=h-i;if(r=l,i=h,"left"===s)if(n.shiftKey)t.navigate("pan",d,A,f);else switch(t.navigationMode){case"free-orbit":t.navigate("free-orbit",d,A,f);break;case"locked-orbit":t.navigate("locked-orbit",d,A,f);case"fixed-orbit":case"orbit":t.navigate("orbit",d,A,f);break;case"pan":t.navigate("pan",d,A,f);break;case"zoom":t.navigate("zoom",d,A,f);break;case"look-around":t.navigate("look-around",d,A,f)}"middle"!==s&&"right"!==s||t.navigate("pan",d,A,f)}}(n)}),!0)},t}();e.MouseNavigation=i},8948:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PreflightCheck=void 0;var n=r(887),i=r(1150),a=function(){function t(){}return t.findView=function(t,e,r){if(null==e||0===e.length)return null;var a=t.getTargetsBoundingBox(e);if(null==a)return null;var o=[{dir:[1,0,0],up:[0,0,1]},{dir:[0,1,0],up:[0,0,1]},{dir:[-1,0,0],up:[0,0,1]},{dir:[0,-1,0],up:[0,0,1]},{dir:[1,1,0],up:[0,0,1]},{dir:[-1,-1,0],up:[0,0,1]},{dir:[-1,1,0],up:[0,0,1]},{dir:[1,-1,0],up:[0,0,1]}].map((function(t){return{dir:n.vec3.normalize(n.vec3.create(),i.VectorUtils.getVec3(t.dir)),up:n.vec3.normalize(n.vec3.create(),i.VectorUtils.getVec3(t.up))}})),s=a[3]*a[4],u=a[3]*a[5],c=a[4]*a[5];s>u&&s>c&&(o.push({dir:n.vec3.fromValues(0,0,-1),up:n.vec3.fromValues(0,1,0)}),o.push({dir:n.vec3.fromValues(0,0,-1),up:n.vec3.fromValues(1,0,0)}));for(var l=t.width/r,h=t.height/r,f=[],d=1;d<r;d++)for(var A=1;A<10;A++)f.push({x:d*l,y:A*h});var p=e.reduce((function(t,e){return t["".concat(e.model,".").concat(e.id)]=!0,t}),{}),v=t.isRunning;t.stop();var I=t.mvMatrix,m=t.cameraProperties.height;try{var g=n.vec3.fromValues(a[0]+a[3]/2,a[1]+a[4]/2,a[2]+a[5]/2),E=o.map((function(e){return t.getDistanceAndHeight(a,e.dir,e.up)})),T=E.map((function(t,e){var r=n.vec3.negate(n.vec3.create(),o[e].dir),i=n.vec3.scale(n.vec3.create(),r,t.distance),a=n.vec3.add(n.vec3.create(),i,g);return n.mat4.lookAt(n.mat4.create(),a,g,o[e].up)})),C=T.map((function(e,r){return t.mvMatrix=e,t.cameraProperties.height=E[r].height,t.getData(f).map((function(t){return null!=t?"".concat(t.model,".").concat(t.id):null}))})).map((function(t){return t.reduce((function(t,e){return null==e||!0===p[e]&&(t.count++,null==t.types[e]?t.types[e]=1:t.types[e]=t.types[e]+1),t}),{count:0,types:{}})})).map((function(t){return t.count*Math.pow(Object.getOwnPropertyNames(t.types).length,2)})),R=0,b=0;return C.forEach((function(t,e){t>b&&(b=t,R=e)})),b>0?{mv:T[R],height:E[R].height}:null}catch(t){console.error(t)}finally{t.mvMatrix=I,null!=m&&m>0&&(t.cameraProperties.height=m),v&&t.start()}},t}();e.PreflightCheck=a},5771:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TouchNavigation=void 0;var n=r(887),i=function(){function t(){}return t.initTouchNavigationEvents=function(t){var e,r,i,a,o=n.vec3.create();t.canvas.addEventListener("touchstart",(function(s){return function(s){s.cancelable&&s.preventDefault(),s.touches.length>=1&&(e=s.touches[0].clientX,r=s.touches[0].clientY),s.touches.length>=2&&(i=s.touches[1].clientX,a=s.touches[1].clientY);var u=t.getEventDataFromEvent(s.touches[0]);if(null==u||null==u.id||null==u.model){var c=t.getMergedRegion();o=n.vec3.fromValues(c.centre[0],c.centre[1],c.centre[2])}else if(null==u.xyz){var l=t.getTargetBoundingBox(u.id,u.model);o=n.vec3.fromValues(l[0]+l[3]/2,l[1]+l[4]/2,l[2]+l[5]/2)}else o=u.xyz}(s)}),!0),t.canvas.addEventListener("touchmove",(function(n){return function(n){if(n.cancelable&&n.preventDefault(),"none"!==t.navigationMode&&n.touches)if(1===n.touches.length){var s=n.touches[0].clientX-e,u=n.touches[0].clientY-r;e=n.touches[0].clientX,r=n.touches[0].clientY,"locked-orbit"===t.navigationMode?t.navigate("locked-orbit",s/1.5,u/1.5,t.lockedOrbitOrigin):t.navigate("orbit",s/1.5,u/1.5,o)}else if(n.touches.length>=2){var c=Math.sqrt((e-i)*(e-i)+(r-a)*(r-a)),l=[(e+i)/2,(r+a)/2];e=n.touches[0].clientX,r=n.touches[0].clientY,i=n.touches[1].clientX,a=n.touches[1].clientY;var h=Math.sqrt((e-i)*(e-i)+(r-a)*(r-a)),f=[(e+i)/2,(r+a)/2];if(2===n.touches.length){var d=c-h;d>10?t.navigate("zoom",-1.5,-1.5,o):d<-10&&t.navigate("zoom",1.5,1.5,o)}var A=f[0]-l[0],p=f[1]-l[1];t.navigate("pan",A,p,o)}}(n)}),!0)},t.initTouchTapEvents=function(t){var e,r,n=!1,i=new Date,a={id:null,model:null,xyz:null};t.canvas.addEventListener("touchstart",(function(o){return function(o){if(1===o.touches.length){n=!0,e=o.touches[0].clientX,r=o.touches[0].clientY;var s=t.canvas.getBoundingClientRect(),u=e-s.left,c=t.height-(r-s.top);a=t.getEventData(u,c);var l=new Date;l.getTime()-i.getTime()<200&&t.fire("dblclick",{id:a.id,model:a.model,event:o,xyz:a.xyz}),i=l,t.fire("mousedown",{id:a.id,model:a.model,event:o,xyz:a.xyz}),t.disableTextSelection()}}(o)}),!0),t.canvas.addEventListener("touchend",(function(i){return function(i){if(n){n=!1;var o=i.changedTouches[0].clientX,s=i.changedTouches[0].clientY,u=Math.abs(o-e),c=Math.abs(s-r);u<3&&c<3&&t.fire("pick",{id:a.id,model:a.model,event:i,xyz:a.xyz}),t.enableTextSelection()}}(i)}),!0)},t}();e.TouchNavigation=i},1675:(t,e)=>{var r;Object.defineProperty(e,"__esModule",{value:!0}),e.PerformanceRating=void 0,(r=e.PerformanceRating||(e.PerformanceRating={}))[r.VERY_LOW=0]="VERY_LOW",r[r.LOW=1]="LOW",r[r.MEDIUM=2]="MEDIUM",r[r.HIGH=3]="HIGH"},8198:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.fshader=void 0,e.fshader="precision mediump float;\n\nvarying vec4 vColor;\n\n\nvoid main(void) {\n gl_FragColor = vColor;\n}"},382:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.InteractiveClippingPlane=void 0;var n=r(887),i=r(8198),a=r(8515),o=r(6413),s=r(887),u=function(){function t(){this.ARROW=1,this.HORIZONTAL=2,this.VERTICAL=3,this.PLANE=4,this.arrowColour=[1,0,0,1],this.horizontalColour=[0,1,0,1],this.verticalColour=[0,0,1,1],this.planeColour=[.5,.5,.5,.3],this.currentInteraction=-1,this.initialized=!1,this.transformation=n.mat4.create(),this.mvMatrix=n.mat4.create(),this._hoverPickColour=[10,150,112,255],this._stopped=!0}return Object.defineProperty(t.prototype,"stopped",{get:function(){return this._stopped},set:function(t){if(this._stopped=t,!1===t){var e=this.viewer.getMergedRegion(),r=Math.sqrt(e.bbox[3]*e.bbox[3]+e.bbox[4]*e.bbox[4]+e.bbox[5]*e.bbox[5]);this.setActive();var n=Math.max(.5*this.viewer.unitsInMeter,.05*r);this.bufferGeometry(n,r),this.updateTransformationFromPlane(),this.applyCurrentPlane()}this.viewer&&this.viewer.draw()},enumerable:!1,configurable:!0}),t.prototype.init=function(t){this.viewer=t;var e=t.gl;this.initShader(),e.useProgram(this.program),this.index_buffer=e.createBuffer(),this.vertex_buffer=e.createBuffer(),this.colours_buffer=e.createBuffer(),this.id_buffer=e.createBuffer(),this.coordinatesAttributePointer=e.getAttribLocation(this.program,"aVertex"),this.coloursAttributePointer=e.getAttribLocation(this.program,"aColour"),this.idsAttributePointer=e.getAttribLocation(this.program,"aId"),e.bindBuffer(e.ARRAY_BUFFER,this.vertex_buffer),e.vertexAttribPointer(this.coordinatesAttributePointer,3,e.FLOAT,!1,0,0),e.bindBuffer(e.ARRAY_BUFFER,this.colours_buffer),e.vertexAttribPointer(this.coloursAttributePointer,4,e.FLOAT,!1,0,0),e.bindBuffer(e.ARRAY_BUFFER,this.id_buffer),e.vertexAttribPointer(this.idsAttributePointer,1,e.FLOAT,!1,0,0),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.index_buffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.indices,e.STATIC_DRAW),e.enableVertexAttribArray(this.coordinatesAttributePointer),e.enableVertexAttribArray(this.coloursAttributePointer),e.enableVertexAttribArray(this.idsAttributePointer),this.pUniformPointer=e.getUniformLocation(this.program,"uPMatrix"),this.mvUniformPointer=e.getUniformLocation(this.program,"uMvMatrix"),this.idCodingUniformPointer=e.getUniformLocation(this.program,"uColorCoding"),this.idSelectedIdUniformPointer=e.getUniformLocation(this.program,"uSelectedId"),this.hoverPickColourUniformPointer=e.getUniformLocation(this.program,"uHoverPickColour"),this.bufferGeometry(1,1),this.initEvents(),this.initialized=!0,this.updateTransformationFromPlane(),this.applyCurrentPlane()},t.prototype.onBeforeDraw=function(t,e){},t.prototype.onAfterDraw=function(t,e){if(!this.stopped){var r=this.setActive();r.blendFunc(r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA),r.enable(r.BLEND),r.uniform1f(this.idCodingUniformPointer,0),this.draw(r)}},t.prototype.onBeforeDrawId=function(){},t.prototype.onAfterDrawId=function(){if(!this.stopped){var t=this.setActive();t.uniform1f(this.idCodingUniformPointer,1),this.draw(t)}},t.prototype.onAfterDrawModelId=function(){if(!this.stopped){var t=this.setActive();t.uniform1f(this.idCodingUniformPointer,-1),this.draw(t)}},t.prototype.draw=function(t){this.stopped||this.initialized&&(n.mat4.multiply(this.mvMatrix,this.viewer.mvMatrix,this.transformation),t.uniformMatrix4fv(this.pUniformPointer,!1,this.viewer.pMatrix),t.uniformMatrix4fv(this.mvUniformPointer,!1,this.mvMatrix),t.uniform4fv(this.hoverPickColourUniformPointer,new Float32Array([this._hoverPickColour[0]/255,this._hoverPickColour[1]/255,this._hoverPickColour[2]/255,this._hoverPickColour[3]/255])),this.viewer.gl.uniform1f(this.idSelectedIdUniformPointer,this.currentInteraction),t.bindBuffer(t.ARRAY_BUFFER,this.vertex_buffer),t.vertexAttribPointer(this.coordinatesAttributePointer,3,t.FLOAT,!1,0,0),t.bindBuffer(t.ARRAY_BUFFER,this.id_buffer),t.vertexAttribPointer(this.idsAttributePointer,1,t.FLOAT,!1,0,0),t.bindBuffer(t.ARRAY_BUFFER,this.colours_buffer),t.vertexAttribPointer(this.coloursAttributePointer,4,t.FLOAT,!1,0,0),t.disable(t.CULL_FACE),t.enable(t.DEPTH_TEST),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.index_buffer),t.drawElements(t.TRIANGLES,this.indices.length,t.UNSIGNED_SHORT,0))},t.prototype.bufferGeometry=function(t,e){var r=this,n=this.computePlaneVertices(e),i=this.computeArrowVertices(t/3,t,t/1e3),a=this.computeArrowVertices(t/3,t,t/-1e3),o=this.computeArrowIndices(),s=this.computePlaneIndices(),u=this.computeRingVertices(.9*t,.5*t,50,(function(t,e){return[t,e,0]})),c=this.computeRingVertices(.9*t,.5*t,50,(function(t,e){return[t,0,e]})),l=this.computeRingIndices(50),h=[];h.push.apply(h,i),h.push.apply(h,a),h.push.apply(h,u),h.push.apply(h,c),h.push.apply(h,n),this.vertices=new Float32Array(h);var f=[];f.push.apply(f,o),f.push.apply(f,o.map((function(t){return t+i.length/3}))),f.push.apply(f,l.map((function(t){return t+i.length/3*2}))),f.push.apply(f,l.map((function(t){return t+i.length/3*2+u.length/3-2}))),f.push.apply(f,s.map((function(t){return t+i.length/3*2+u.length/3*2}))),this.indices=new Uint16Array(f);var d=[];d.push.apply(d,i.filter((function(t,e){return e%3==0})).map((function(){return r.ARROW}))),d.push.apply(d,i.filter((function(t,e){return e%3==0})).map((function(){return r.ARROW}))),d.push.apply(d,u.filter((function(t,e){return e%3==0})).map((function(){return r.HORIZONTAL}))),d.push.apply(d,c.filter((function(t,e){return e%3==0})).map((function(){return r.VERTICAL}))),d.push.apply(d,n.filter((function(t,e){return e%3==0})).map((function(){return r.PLANE}))),this.ids=new Float32Array(d);var A=[];A.push.apply(A,i.filter((function(t,e){return e%3==0})).flatMap((function(){return r.arrowColour}))),A.push.apply(A,i.filter((function(t,e){return e%3==0})).flatMap((function(){return r.arrowColour}))),A.push.apply(A,u.filter((function(t,e){return e%3==0})).flatMap((function(){return r.horizontalColour}))),A.push.apply(A,c.filter((function(t,e){return e%3==0})).flatMap((function(){return r.verticalColour}))),A.push.apply(A,n.filter((function(t,e){return e%3==0})).flatMap((function(){return r.planeColour}))),this.colours=new Float32Array(A);var p=this.viewer.gl;p.bindBuffer(p.ARRAY_BUFFER,this.vertex_buffer),p.bufferData(p.ARRAY_BUFFER,this.vertices,p.STATIC_DRAW),p.bindBuffer(p.ARRAY_BUFFER,this.colours_buffer),p.bufferData(p.ARRAY_BUFFER,this.colours,p.STATIC_DRAW),p.bindBuffer(p.ARRAY_BUFFER,this.id_buffer),p.bufferData(p.ARRAY_BUFFER,this.ids,p.STATIC_DRAW),p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,this.index_buffer),p.bufferData(p.ELEMENT_ARRAY_BUFFER,this.indices,p.STATIC_DRAW)},t.prototype.initEvents=function(){var t,e,r,i=this,a=null,s=null;this.viewer.canvas.addEventListener("pointerdown",(function(o){if(!(i.stopped||i.viewer.plugins.indexOf(i)<0)){var u=i.viewer.getEventDataFromEvent(o,!0);1000010===u.model&&u.id!=i.PLANE&&(i.currentInteraction=u.id,a=o.clientX,s=o.clientY,t=i.viewer.navigationMode,e=u.xyz,i.viewer.navigationMode="none",r=n.vec3.transformMat4(n.vec3.create(),e,n.mat4.invert(n.mat4.create(),i.transformation)))}})),window.addEventListener("pointerup",(function(e){-1!==i.currentInteraction&&(i.snapToMainAxes(),i.applyCurrentPlane(),i.currentInteraction=-1,i.viewer.navigationMode=t)})),window.addEventListener("pointermove",(function(t){if(-1!==i.currentInteraction){var u=t.clientX,c=t.clientY,l=u-a,h=c-s;a=u,s=c;var f=i.viewer.getCameraPosition(),d=n.vec3.distance(f,e);switch(i.currentInteraction){case i.ARROW:var A=0;if(i.viewer.camera===o.CameraType.ORTHOGONAL)A=i.viewer.cameraProperties.height/i.viewer.height;else{var p=i.viewer.cameraProperties.fov*Math.PI/180;A=2*d*Math.tan(p/2)/i.viewer.height}var v=i.getDragOffset(A,l,h);n.mat4.translate(i.transformation,i.transformation,v);break;case i.HORIZONTAL:var I=i.getRotatingAngle(l,h,r);n.mat4.rotateZ(i.transformation,i.transformation,I);break;case i.VERTICAL:I=i.getRotatingAngle(l,h,r,!0),n.mat4.rotateY(i.transformation,i.transformation,I)}i.applyCurrentPlane()}}))},t.prototype.getRotatingAngle=function(t,e,r,i){void 0===i&&(i=!1);var a=n.mat4.getRotation(s.quat.create(),this.mvMatrix),o=n.vec3.transformQuat(n.vec3.create(),r,a),u=this.viewer.getCameraPosition(),c=i?this.getTangentPlaneEquation():this.getPrependicularPlaneEquation(),l=c[0]*u[0]+c[1]*u[1]+c[2]*u[2]+c[3],h=n.vec3.fromValues(t,-e,0),f=n.vec3.add(n.vec3.create(),o,h),d=n.vec3.angle(o,f),A=this.viewer.getMergedRegion(),p=Math.sqrt(A.bbox[3]*A.bbox[3]+A.bbox[4]*A.bbox[4]+A.bbox[5]*A.bbox[5]),v=n.vec3.cross(n.vec3.create(),f,o);n.vec3.normalize(v,v);var I=Math.cbrt(p*this.viewer.unitsInMeter*Math.sqrt(t*t+e*e))/100;return(i?-1:1)*(l>0?-1:1)*v[2]*I*d},t.prototype.getDragOffset=function(t,e,r){var i=n.vec3.fromValues(1,0,0),a=n.mat4.getRotation(s.quat.create(),this.mvMatrix),o=n.vec3.transformQuat(n.vec3.create(),i,a);n.vec3.normalize(o,o);var u=e*o[0]-r*o[1];return n.vec3.scale(i,i,u*t),i},t.prototype.updateTransformationFromPlane=function(){var t;if(null!=this.viewer&&!this.stopped&&-1!==this.viewer.plugins.indexOf(this)&&0!==this.viewer.activeHandles.length){var e=null===(t=this.viewer.getClip())||void 0===t?void 0:t.PlaneA;if(null!=e){var r=n.vec3.normalize(n.vec3.create(),n.vec3.fromValues(e[0],e[1],e[2])),i=this.getTangent(r),a=n.vec3.cross(n.vec3.create(),r,i);n.vec3.normalize(a,a);var o=this.getPlanePoint(e),s=n.mat4.fromValues(r[0],r[1],r[2],0,i[0],i[1],i[2],0,a[0],a[1],a[2],0,o[0],o[1],o[2],1);this.transformation&&this.isTransformationsHasSameOrientation(this.transformation,s,e)||(this.transformation=s)}else{var u=this.viewer.getMergedRegion();this.transformation=n.mat4.translate(n.mat4.create(),n.mat4.create(),u.centre)}}},t.prototype.isTransformationsHasSameOrientation=function(t,e,r){var n=.001;if(Math.abs(t[0]-e[0])<n&&Math.abs(t[1]-e[1])<n&&Math.abs(t[2]-e[2])<n&&Math.abs(t[3]-e[3])<n)return Math.abs(r[0]*e[12]+r[1]*e[13]+r[2]*e[14]+r[3])<n},t.prototype.getPlanePoint=function(t){var e,r,i=null!==(r=null===(e=this.viewer.getMergedRegion())||void 0===e?void 0:e.centre)&&void 0!==r?r:n.vec3.create(),a=this.viewer.getCurrentWcs(),o=this.transformPlane(t,a),s=n.vec3.fromValues(o[0],o[1],o[2]),u=null;if(0!=s[2]){var c=s[0]*i[0]+s[1]*i[1]+o[3];u=n.vec3.fromValues(i[0],i[1],c/s[2]*-1)}else 0!=s[1]?(c=s[0]*i[0]+s[2]*i[2]+o[3],u=n.vec3.fromValues(i[0],c/s[1]*-1,i[2])):0!=s[0]&&(c=s[1]*i[1]+s[2]*i[2]+o[3],u=n.vec3.fromValues(c/s[0]*-1,i[1],i[2]));return u},t.prototype.transformPlane=function(t,e){var r=t[0],i=t[1],a=t[2],o=t[3],s=n.vec3.len(n.vec3.fromValues(r,i,a)),u=r*-o/s,c=i*-o/s,l=a*-o/s;return o=0-r*(u-=e[0])-i*(c-=e[1])-a*(l-=e[2]),new Float32Array([r,i,a,o])},t.prototype.getTangent=function(t){var e=function(t,e,r){return t>e&&t<r},r=n.vec3.fromValues(1,0,0),i=n.vec3.fromValues(0,1,0),a=n.vec3.fromValues(0,0,1),o=null;return e(n.vec3.angle(t,a),0,Math.PI)?o=n.vec3.cross(n.vec3.create(),t,a):e(n.vec3.angle(t,r),0,Math.PI)?o=n.vec3.cross(n.vec3.create(),t,r):e(n.vec3.angle(t,i),0,Math.PI)&&(o=n.vec3.cross(n.vec3.create(),t,i)),n.vec3.normalize(o,o),o},t.prototype.applyCurrentPlane=function(){if(null!=this.viewer&&!this.stopped&&-1!==this.viewer.plugins.indexOf(this)&&0!==this.viewer.activeHandles.length){var t=this.getPlaneEquation();this.viewer.setClippingPlaneA(t)}},t.prototype.snapToMainAxes=function(){var t=n.mat4.getRotation(s.quat.create(),this.transformation),e=n.vec3.transformQuat(n.vec3.create(),n.vec3.fromValues(1,0,0),t),r=Math.PI/180*5;if(n.vec3.angle(e,n.vec3.fromValues(0,0,1))<r){var i=n.mat4.getTranslation(n.vec3.create(),this.transformation),a=s.quat.rotateY(s.quat.create(),s.quat.create(),-Math.PI/2);n.mat4.fromRotationTranslation(this.transformation,a,i)}n.vec3.angle(e,n.vec3.fromValues(0,0,-1))<r&&(i=n.mat4.getTranslation(n.vec3.create(),this.transformation),a=s.quat.rotateY(s.quat.create(),s.quat.create(),Math.PI/2),n.mat4.fromRotationTranslation(this.transformation,a,i))},t.prototype.getPlaneEquation=function(){var t=this.viewer.getCurrentWcs(),e=n.vec3.transformMat4(n.vec3.create(),n.vec3.create(),this.transformation),r=this.getPlaneNormal(),i=n.vec3.len(r),a=-r[0]*(e[0]+t[0])-r[1]*(e[1]+t[1])-r[2]*(e[2]+t[2]);return[r[0],r[1],r[2],a/i]},t.prototype.getPrependicularPlaneEquation=function(){var t=n.vec3.transformMat4(n.vec3.create(),n.vec3.create(),this.transformation),e=this.getPlaneBinormal(),r=0-e[0]*t[0]-e[1]*t[1]-e[2]*t[2];return[e[0],e[1],e[2],r]},t.prototype.getTangentPlaneEquation=function(){var t=n.vec3.transformMat4(n.vec3.create(),n.vec3.create(),this.transformation),e=this.getPlaneTangent(),r=0-e[0]*t[0]-e[1]*t[1]-e[2]*t[2];return[e[0],e[1],e[2],r]},t.prototype.getPlaneNormal=function(){var t=n.mat4.getRotation(s.quat.create(),this.transformation);return n.vec3.transformQuat(n.vec3.create(),n.vec3.fromValues(1,0,0),t)},t.prototype.getPlaneBinormal=function(){var t=n.mat4.getRotation(s.quat.create(),this.transformation);return n.vec3.transformQuat(n.vec3.create(),n.vec3.fromValues(0,0,1),t)},t.prototype.getPlaneTangent=function(){var t=n.mat4.getRotation(s.quat.create(),this.transformation);return n.vec3.transformQuat(n.vec3.create(),n.vec3.fromValues(0,-1,0),t)},t.prototype.initShader=function(){var t=this.viewer.gl,e=this.viewer,r=function(r,n){if(t.shaderSource(r,n),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS)){var i=t.getShaderInfoLog(r);return e.error(i),null}},n=t.createShader(t.FRAGMENT_SHADER);r(n,i.fshader);var o=t.createShader(t.VERTEX_SHADER);r(o,a.vshader),this.program=t.createProgram(),t.attachShader(this.program,o),t.attachShader(this.program,n),t.linkProgram(this.program),t.getProgramParameter(this.program,t.LINK_STATUS)||e.error("Could not initialise shaders for a navigation cube plugin")},t.prototype.setActive=function(){var t=this.viewer.gl;return t.useProgram(this.program),t},t.prototype.computeArrowVertices=function(t,e,r){var n=[0,r,-t/2,e,r,-t/2,e,r,t/2,0,r,t/2,e,r,-t,e+t,r,0,e,r,t],i=n.map((function(t,e){return e%3==0?-1*t:t}));return n.concat(i)},t.prototype.computeArrowIndices=function(){return[0,1,2,0,2,3,4,5,6,9,8,7,9,7,10,13,12,11]},t.prototype.computeRingVertices=function(t,e,r,n){for(var i=[],a=0;a<=r;a++){var o=2*Math.PI/r*a,s=Math.cos(o)*e,u=Math.sin(o)*e,c=Math.cos(o)*t,l=Math.sin(o)*t,h=n(s,u),f=n(c,l);i.push.apply(i,h),i.push.apply(i,f)}return i},t.prototype.computeRingIndices=function(t){for(var e=[],r=0;r<=t;r++){var n=2*r;e.push(0+n,1+n,2+n,1+n,3+n,2+n)}return e},t.prototype.computePlaneVertices=function(t){return[0,-t/2,-t/2,0,t/2,-t/2,0,t/2,t/2,0,-t/2,t/2]},t.prototype.computePlaneIndices=function(){return[0,1,2,0,2,3]},t}();e.InteractiveClippingPlane=u},8515:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.vshader=void 0,e.vshader="attribute highp vec3 aVertex;\nattribute highp vec4 aColour;\nattribute highp float aId;\n\n\nuniform mat4 uMvMatrix;\nuniform mat4 uPMatrix;\n\n\nuniform mediump float uColorCoding; \nuniform mediump float uSelectedId;\n\n\nuniform vec4 uHoverPickColour;\n\n\nvarying vec4 vColor;\n\nvec4 getIdColor(float id){\n float product = floor(id + 0.5);\n float B = floor(product / (256.0*256.0));\n float G = floor((product - B * 256.0*256.0) / 256.0);\n float R = mod(product, 256.0);\n return vec4(R / 255.0, G / 255.0, B / 255.0, 1.0);\n}\n\nvec4 getTransparentColor(vec4 color, float transparency){\n mat4 aMat4 = mat4(1.0, 0.0, 0.0, 0.0,\n 0.0, 1.0, 0.0, 0.0,\n 0.0, 0.0, 1.0, 0.0,\n 0.0, 0.0, 0.0, transparency);\n return aMat4 * color;\n}\n\n\nvoid main(void) {\n\n bool ignoreVec = false;\n if (uColorCoding > 0.5 && uColorCoding <= 1.0)\n {\n vColor = getIdColor(aId);\n }\n else if (uColorCoding < -0.5)\n {\n vColor = getIdColor(1000010.0);\n }\n else\n { \n if(uSelectedId == aId)\n { \n vColor = uHoverPickColour; \n }\n else\n {\n if(uSelectedId > 0.0) \n {\n if(aId != 4.0){ \n ignoreVec = true;\n }\n else\n vColor = getTransparentColor(aColour, 1.5);\n }\n else \n vColor = aColour;\n }\n }\n\n if(!ignoreVec)\n {\n gl_Position = uPMatrix * uMvMatrix * vec4(aVertex, 1.0);\n }\n\n}"},5637:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Grid=void 0;var n=r(5585),i=function(){function t(){this.initialized=!1,this.factor=1.5,this.zFactor=5,this.numberOfLines=10,this.colour=[0,0,0,.6],this._stopped=!1}return Object.defineProperty(t.prototype,"stopped",{get:function(){return this._stopped},set:function(t){this._stopped=t,this.viewer&&this.viewer.draw()},enumerable:!1,configurable:!0}),t.prototype.init=function(t){this.viewer=t;var e=t.gl;this._initShader(),e.useProgram(this.program),this.vertex_buffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.vertex_buffer),this.coordinatesAttributePointer=e.getAttribLocation(this.program,"coordinates"),e.vertexAttribPointer(this.coordinatesAttributePointer,3,e.FLOAT,!1,0,0),e.enableVertexAttribArray(this.coordinatesAttributePointer),this.colourUniformPointer=e.getUniformLocation(this.program,"uColour"),this.pUniformPointer=e.getUniformLocation(this.program,"uPMatrix"),this.mvUniformPointer=e.getUniformLocation(this.program,"uMvMatrix"),this.initialized=!0},t.prototype._initShader=function(){var t=this.viewer.gl,e=this.viewer,r=function(r,n){if(t.shaderSource(r,n),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS)){var i=t.getShaderInfoLog(r);return e.error(i),null}},i=t.createShader(t.FRAGMENT_SHADER);r(i,"precision mediump float; uniform vec4 uColour;void main(void) {gl_FragColor = uColour;}");var a=t.createShader(t.VERTEX_SHADER);r(a,n.vshader),this.program=t.createProgram(),t.attachShader(this.program,a),t.attachShader(this.program,i),t.linkProgram(this.program),t.getProgramParameter(this.program,t.LINK_STATUS)||e.error("Could not initialise shaders for a navigation cube plugin")},t.prototype.onAfterDraw=function(t,e){if(this.initialized&&!this.stopped){var r=this.viewer.getMergedRegion();if(r&&!(r.population<1)){var n=Math.max(r.bbox[3],r.bbox[4])*this.factor;if(!(n<.1)){for(var i=n/(this.numberOfLines+1),a=r.bbox[0]+r.bbox[3]/2-n/2,o=r.bbox[1]+r.bbox[4]/2-n/2,s=r.bbox[2]-r.bbox[5]/this.zFactor,u=[],c=1;c<this.numberOfLines+1;c++)u.push(a),u.push(o+c*i),u.push(s),u.push(a+n),u.push(o+c*i),u.push(s);for(c=1;c<this.numberOfLines+1;c++)u.push(a+c*i),u.push(o),u.push(s),u.push(a+c*i),u.push(o+n),u.push(s);var l=this.viewer.gl;l.useProgram(this.program),l.uniformMatrix4fv(this.pUniformPointer,!1,this.viewer.pMatrix),l.uniformMatrix4fv(this.mvUniformPointer,!1,this.viewer.mvMatrix),l.uniform4fv(this.colourUniformPointer,this.colour),l.bindBuffer(l.ARRAY_BUFFER,this.vertex_buffer),l.bufferData(l.ARRAY_BUFFER,new Float32Array(u),l.STATIC_DRAW),l.bindBuffer(l.ARRAY_BUFFER,this.vertex_buffer),l.vertexAttribPointer(this.coordinatesAttributePointer,3,l.FLOAT,!1,0,0),l.enable(l.BLEND),l.enable(l.DEPTH_TEST),l.blendFunc(l.ONE_MINUS_DST_ALPHA,l.ONE_MINUS_SRC_ALPHA),l.drawArrays(l.LINES,0,u.length/3)}}}},t.prototype.onBeforeDraw=function(t,e){},t.prototype.onBeforeDrawId=function(){},t.prototype.onAfterDrawId=function(){},t.prototype.onAfterDrawModelId=function(){},t}();e.Grid=i},5585:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.vshader=void 0,e.vshader="attribute vec3 coordinates;\n\n\nuniform mat4 uMvMatrix;\nuniform mat4 uPMatrix;\n\nvoid main(void) {\n gl_Position = uPMatrix * uMvMatrix * vec4(coordinates, 1.0);\n}"},1906:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.LoaderOverlay=void 0;var r=function(){function t(){var t=document.createElement("style");t.innerText="\n        .xbim-viewer-loader {\n            border: 32px solid #eee; /* Light grey */\n            border-top: 32px solid #aaa; /* Dark gray */\n            border-radius: 50%;\n            width: 120px;\n            height: 120px;\n            animation: xbim-viewer-loader-spin 2s linear infinite;\n          }\n          \n          @keyframes xbim-viewer-loader-spin {\n            0% { transform: rotate(0deg); }\n            100% { transform: rotate(360deg); }\n          }",document.body.appendChild(t)}return t.prototype.init=function(t){this.viewer=t},t.prototype.onBeforeDraw=function(t,e){},t.prototype.onAfterDraw=function(t,e){},t.prototype.onBeforeDrawId=function(){},t.prototype.onAfterDrawId=function(){},t.prototype.onAfterDrawModelId=function(){},t.prototype.show=function(t){if(!this.overlay){var e=document.createElement("div");e.style.width="100%",e.style.height="100%",e.style.zIndex="1000",e.style.overflow="hidden",e.style.position="absolute",e.style.top="0",e.style.left="0";var r=document.createElement("div");if(r.style.height="100%",r.style.width="100%",r.style.backgroundColor="rgb(200,200,200)",r.style.opacity="0.5",e.appendChild(r),null!=t){var n=document.createElement("div");n.style.position="absolute",n.style.top="0",n.style.left="0",n.style.height="100%",n.style.width="100%",n.style.display="flex",n.style.alignItems="center",n.style.justifyContent="center",e.appendChild(n),t.style.height="100%",t.style.filter="blur(15px)",n.appendChild(t)}var i=document.createElement("div");i.style.position="absolute",i.style.top="0",i.style.left="0",i.style.height="100%",i.style.width="100%",i.style.display="flex",i.style.alignItems="center",i.style.justifyContent="center";var a=document.createElement("div");a.className="xbim-viewer-loader",i.appendChild(a),e.appendChild(i),this.overlay=e;var o=this.viewer.canvas.parentElement;"relative"!==o.style.position&&"absolute"!==o.style.position&&(o.style.position="relative");var s=this.viewer.canvas.nextElementSibling;null!=s?o.insertBefore(e,s):o.appendChild(e)}},t.prototype.hide=function(){null!=this.overlay&&(null!=this.overlay.parentElement&&this.overlay.parentElement.removeChild(this.overlay),this.overlay=null)},t}();e.LoaderOverlay=r},9706:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.cube_fshader=void 0,e.cube_fshader="precision mediump float;\n\nuniform float uAlpha;\nuniform sampler2D uTexture;\nuniform mediump float uColorCoding;\nuniform float uHighlighting;\n\nvarying vec2 vTexCoord;\nvarying vec4 vIdColor;\n\n\nvoid main(void) {\n if (uColorCoding > 0.0)\n {\n gl_FragColor = vIdColor;\n }\n else\n {\n vec4 pixel = texture2D(uTexture, vTexCoord);\n if (vIdColor.x < 0.0)\n {\n \n gl_FragColor = vec4(pixel.rgb * uHighlighting, uAlpha);\n }\n else\n {\n \n gl_FragColor = vec4(pixel.rgb, uAlpha);\n }\n }\n}"},1524:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.cube_vshader=void 0,e.cube_vshader="attribute highp vec3 aVertex;\nattribute highp vec2 aTexCoord;\nattribute highp float aId;\n\n\nuniform mat3 uRotation;\nuniform mat4 uPMatrix;\n\n\n\nuniform mediump float uColorCoding; \nuniform float uSelection;\n\n\nvarying vec2 vTexCoord;\nvarying vec4 vIdColor;\n\nvec4 getIdColor(float id){\n float product = floor(id + 0.5);\n float B = floor(product / (256.0*256.0));\n float G = floor((product - B * 256.0*256.0) / 256.0);\n float R = mod(product, 256.0);\n return vec4(R / 255.0, G / 255.0, B / 255.0, 1.0);\n}\n\nvoid main(void) {\n vec4 point = vec4(uRotation * aVertex, 1.0);\n gl_Position = uPMatrix * point;\n vTexCoord = aTexCoord;\n\n if (uColorCoding == 1.0)\n {\n vIdColor = getIdColor(aId);\n return;\n }\n\n if (uColorCoding > 1.0)\n {\n vIdColor = getIdColor(float(uColorCoding));\n return;\n }\n \n bool isSelected = abs(uSelection - aId) < 0.1;\n if (isSelected){\n vIdColor = vec4(-1.0, -1.0, -1.0, -1.0);\n }\n else{\n vIdColor = vec4(1.0, 1.0, 1.0, 1.0);\n }\n}"},5715:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CubeTextures=void 0,e.CubeTextures={en:"data:image/png;base64,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"}},5819:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NavigationCube=void 0;var n=r(9706),i=r(1524),a=r(5715),o=r(887),s=r(9499),u=function(){function t(t){this.TOP=1,this.BOTTOM=2,this.LEFT=3,this.RIGHT=4,this.FRONT=5,this.BACK=6,this.TOP_LEFT_FRONT=7,this.TOP_RIGHT_FRONT=8,this.TOP_LEFT_BACK=9,this.TOP_RIGHT_BACK=10,this.BOTTOM_LEFT_FRONT=11,this.BOTTOM_RIGHT_FRONT=12,this.BOTTOM_LEFT_BACK=13,this.BOTTOM_RIGHT_BACK=14,this.TOP_LEFT=15,this.TOP_RIGHT=16,this.TOP_FRONT=17,this.TOP_BACK=18,this.BOTTOM_LEFT=19,this.BOTTOM_RIGHT=20,this.BOTTOM_FRONT=21,this.BOTTOM_BACK=22,this.FRONT_RIGHT=23,this.FRONT_LEFT=24,this.BACK_RIGHT=25,this.BACK_LEFT=26,this._initialized=!1,this._modelId=1000001,this.ratio=.15,this.minSize=50,this.maxSize=200,this.highlighting=1.2,this.activeAlpha=1,this.passiveAlpha=.7,this.position=this.BOTTOM_RIGHT,this.trueNorth=0,this._stopped=!1,this.vertices=new Float32Array([-.3,-.5,-.3,.3,-.5,-.3,.3,-.5,.3,-.3,-.5,.3,-.3,.5,-.3,-.3,.5,.3,.3,.5,.3,.3,.5,-.3,-.3,-.3,.5,.3,-.3,.5,.3,.3,.5,-.3,.3,.5,-.3,-.3,-.5,-.3,.3,-.5,.3,.3,-.5,.3,-.3,-.5,.5,-.3,-.3,.5,.3,-.3,.5,.3,.3,.5,-.3,.3,-.5,-.3,-.3,-.5,-.3,.3,-.5,.3,.3,-.5,.3,-.3,-.5,-.5,.5,-.3,-.5,.5,-.3,-.3,.5,-.5,-.3,.5,-.5,-.5,.3,-.5,-.5,.5,-.5,-.3,.5,-.5,-.3,.3,-.5,-.5,.3,-.3,-.5,.3,-.3,-.5,.5,-.5,-.5,.5,.3,-.5,.5,.5,-.5,.5,.5,-.3,.5,.3,-.3,.5,.5,-.5,.3,.5,-.3,.3,.5,-.3,.5,.5,-.5,.5,.3,-.5,.3,.5,-.5,.3,.5,-.5,.5,.3,-.5,.5,-.5,.3,.5,-.3,.3,.5,-.3,.5,.5,-.5,.5,.5,-.5,.3,.3,-.5,.3,.5,-.5,.5,.5,-.5,.5,.3,-.5,.5,.3,-.5,.5,.5,-.3,.5,.5,-.3,.5,.3,.3,.3,.5,.5,.3,.5,.5,.5,.5,.3,.5,.5,.5,.3,.3,.5,.5,.3,.5,.5,.5,.5,.3,.5,.3,.5,.3,.3,.5,.5,.5,.5,.5,.5,.5,.3,-.5,-.5,-.5,-.3,-.5,-.5,-.3,-.3,-.5,-.5,-.3,-.5,-.5,-.5,-.5,-.5,-.5,-.3,-.5,-.3,-.3,-.5,-.3,-.5,-.5,-.5,-.5,-.3,-.5,-.5,-.3,-.5,-.3,-.5,-.5,-.3,.3,-.5,-.5,.5,-.5,-.5,.5,-.3,-.5,.3,-.3,-.5,.5,-.5,-.5,.5,-.3,-.5,.5,-.3,-.3,.5,-.5,-.3,.3,-.5,-.5,.5,-.5,-.5,.5,-.5,-.3,.3,-.5,-.3,-.5,.3,-.5,-.3,.3,-.5,-.3,.5,-.5,-.5,.5,-.5,-.5,.3,-.5,-.5,.3,-.3,-.5,.5,-.3,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,-.3,-.3,.5,-.3,-.3,.5,-.5,.3,.3,-.5,.5,.3,-.5,.5,.5,-.5,.3,.5,-.5,.5,.3,-.5,.5,.5,-.5,.5,.5,-.3,.5,.3,-.3,.3,.5,-.5,.3,.5,-.3,.5,.5,-.3,.5,.5,-.5,.3,-.3,.5,.5,-.3,.5,.5,.3,.5,.3,.3,.5,.5,-.3,.3,.5,.3,.3,.5,.3,.5,.5,-.3,.5,-.5,-.3,.5,-.3,-.3,.5,-.3,.3,.5,-.5,.3,.5,-.5,-.3,.3,-.5,-.3,.5,-.5,.3,.5,-.5,.3,.3,-.3,-.5,.5,.3,-.5,.5,.3,-.3,.5,-.3,-.3,.5,-.3,-.5,.3,.3,-.5,.3,.3,-.5,.5,-.3,-.5,.5,-.3,.3,.5,.3,.3,.5,.3,.5,.5,-.3,.5,.5,-.3,.5,.3,-.3,.5,.5,.3,.5,.5,.3,.5,.3,.3,-.3,-.5,.5,-.3,-.5,.5,.3,-.5,.3,.3,-.5,.5,-.3,-.5,.5,.3,-.5,.5,.3,-.3,.5,-.3,-.3,-.5,-.3,-.5,-.5,.3,-.5,-.3,.3,-.5,-.3,-.3,-.5,-.5,-.3,-.5,-.5,-.3,-.3,-.5,.3,-.3,-.5,.3,-.5,-.3,-.5,-.5,.3,-.5,-.5,.3,-.3,-.5,-.3,-.3,-.5,-.3,-.5,-.5,.3,-.5,-.5,.3,-.5,-.3,-.3,-.5,-.3,-.3,.3,-.5,.3,.3,-.5,.3,.5,-.5,-.3,.5,-.5,-.3,.5,-.5,-.3,.5,-.3,.3,.5,-.3,.3,.5,-.5,.3,-.5,-.3,.5,-.5,-.3,.5,-.5,.3,.3,-.5,.3,.5,-.5,-.3,.5,-.3,-.3,.5,-.3,.3,.5,-.5,.3,-.5,-.5,-.3,-.3,-.5,-.3,-.3,-.5,.3,-.5,-.5,.3,-.5,-.5,-.3,-.5,-.5,.3,-.5,-.3,.3,-.5,-.3,-.3,.3,.5,-.3,.3,.5,.3,.5,.5,.3,.5,.5,-.3,.5,.3,-.3,.5,.5,-.3,.5,.5,.3,.5,.3,.3,-.5,.5,-.3,-.5,.5,.3,-.3,.5,.3,-.3,.5,-.3,-.5,.3,-.3,-.5,.3,.3,-.5,.5,.3,-.5,.5,-.3]),this.indices=new Uint16Array([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23,24,25,26,24,26,27,28,29,30,28,30,31,32,33,34,32,34,35,36,37,38,36,38,39,40,41,42,40,42,43,44,45,46,44,46,47,48,49,50,48,50,51,52,53,54,52,54,55,56,57,58,56,58,59,60,61,62,60,62,63,64,65,66,64,66,67,68,69,70,68,70,71,72,74,73,72,75,74,76,77,78,76,78,79,80,81,82,80,82,83,84,86,85,84,87,86,88,89,90,88,90,91,92,93,94,92,94,95,96,98,97,96,99,98,100,101,102,100,102,103,104,105,106,104,106,107,108,110,109,108,111,110,112,113,114,112,114,115,116,117,118,116,118,119,120,121,122,120,122,123,124,125,126,124,126,127,128,129,130,128,130,131,132,133,134,132,134,135,136,137,138,136,138,139,140,141,142,140,142,143,144,145,146,144,146,147,148,149,150,148,150,151,152,154,153,152,155,154,156,157,158,156,158,159,160,161,162,160,162,163,164,165,166,164,166,167,168,170,169,168,171,170,172,173,174,172,174,175,176,178,177,176,179,178,180,181,182,180,182,183,184,185,186,184,186,187,188,189,190,188,190,191,192,193,194,192,194,195,196,197,198,196,198,199,200,201,202,200,202,203,204,205,206,204,206,207,208,209,210,208,210,211,212,213,214,212,214,215]),this.txtCoords=new Float32Array([1/3+1/15,0+1/15,.6,0+1/15,.6,1/3-1/15,1/3+1/15,1/3-1/15,1-1/15,0+1/15,1-1/15,1/3-1/15,2/3+1/15,1/3-1/15,2/3+1/15,0+1/15,2/3+1/15,1/3+1/15,1-1/15,1/3+1/15,1-1/15,.6,2/3+1/15,.6,0+1/15,1/3-1/15,0+1/15,0+1/15,1/3-1/15,0+1/15,1/3-1/15,1/3-1/15,0+1/15,1/3+1/15,1/3-1/15,1/3+1/15,1/3-1/15,.6,0+1/15,.6,.6,1/3+1/15,.6,.6,1/3+1/15,.6,1/3+1/15,1/3+1/15,.7,1/3+1/30,.7,1/3+1/30,.7,1/3+1/30,.7,1/3+1/30,1/3+1/30,1/3+1/30,1/3+1/30,1/3+1/30,1/3+1/30,1/3+1/30,1/3+1/30,1/3+1/30,1/3+1/30,1/30,1/3+1/30,1/30,1/3+1/30,1/30,1/3+1/30,1/30,.7,1/3+1/30,.7,1/3+1/30,.7,1/3+1/30,.7,1/3+1/30,1/30,1/3+1/30,1/30,1/3+1/30,1/30,1/3+1/30,1/30,1/3+1/30,1/3+1/30,1/30,1/3+1/30,1/30,1/3+1/30,1/30,1/3+1/30,1/30,.7,1/3+1/30,.7,1/3+1/30,.7,1/3+1/30,.7,1/3+1/30,1/3+1/30,1/3+1/30,1/3+1/30,1/3+1/30,1/3+1/30,1/3+1/30,1/3+1/30,1/3+1/30,.7,1/30,.7,1/30,.7,1/30,.7,1/30,.7,1/3+1/30,.7,1/3+1/30,.7,1/3+1/30,.7,1/3+1/30,1/30,1/3+1/30,1/30,1/3+1/30,1/30,1/3+1/30,1/30,1/3+1/30,.7,1/30,.7,1/30,.7,1/30,.7,1/30,1/30,1/30,1/30,1/30,1/30,1/30,1/30,1/30,1/3+1/30,1/3+1/30,1/3+1/30,1/3+1/30,1/3+1/30,1/3+1/30,1/3+1/30,1/3+1/30,1/3+1/30,1/30,1/3+1/30,1/30,1/3+1/30,1/30,1/3+1/30,1/30,1/30,1/30,1/30,1/30,1/30,1/30,1/30,1/30,1/30,1/3+1/30,1/30,1/3+1/30,1/30,1/3+1/30,1/30,1/3+1/30,1/3+1/30,1/30,1/3+1/30,1/30,1/3+1/30,1/30,1/3+1/30,1/30,1/30,1/30,1/30,1/30,1/30,1/30,1/30,1/30,1/3+1/30,1/3+1/30,1/3+1/30,1/3+1/30,1/3+1/30,1/3+1/30,1/3+1/30,1/3+1/30,.7,1/30,.7,1/30,.7,1/30,.7,1/30,1/30,1/30,1/30,1/30,1/30,1/30,1/30,1/30,1/30,1/3+1/30,1/30,1/3+1/30,1/30,1/3+1/30,1/30,1/3+1/30,.7,1/30,.7,1/30,.7,1/30,.7,1/30,2/3+2/30,1/3+1/30,2/3+2/30,1/3+1/30,2/3+2/30,1/3+1/30,2/3+2/30,1/3+1/30,2/30,1/3+1/30,2/30,1/3+1/30,2/30,1/3+1/30,2/30,1/3+1/30,2/3+2/30,1/3+1/30,2/3+2/30,1/3+1/30,2/3+2/30,1/3+1/30,2/3+2/30,1/3+1/30,1/3+2/30,1/3+1/30,1/3+2/30,1/3+1/30,1/3+2/30,1/3+1/30,1/3+2/30,1/3+1/30,2/3+2/30,1/3+1/30,2/3+2/30,1/3+1/30,2/3+2/30,1/3+1/30,2/3+2/30,1/3+1/30,1/3+2/30,1/30,1/3+2/30,1/30,1/3+2/30,1/30,1/3+2/30,1/30,2/3+2/30,1/3+1/30,2/3+2/30,1/3+1/30,2/3+2/30,1/3+1/30,2/3+2/30,1/3+1/30,2/3+2/30,1/30,2/3+2/30,1/30,2/3+2/30,1/30,2/3+2/30,1/30,2/30,1/30,2/30,1/30,2/30,1/30,2/30,1/30,2/30,1/3+1/30,2/30,1/3+1/30,2/30,1/3+1/30,2/30,1/3+1/30,2/30,1/30,2/30,1/30,2/30,1/30,2/30,1/30,1/3+2/30,1/3+1/30,1/3+2/30,1/3+1/30,1/3+2/30,1/3+1/30,1/3+2/30,1/3+1/30,2/30,1/30,2/30,1/30,2/30,1/30,2/30,1/30,1/3+2/30,1/30,1/3+2/30,1/30,1/3+2/30,1/30,1/3+2/30,1/30,2/30,1/30,2/30,1/30,2/30,1/30,2/30,1/30,2/3+2/30,1/30,2/3+2/30,1/30,2/3+2/30,1/30,2/3+2/30,1/30,1/3+2/30,1/30,1/3+2/30,1/30,1/3+2/30,1/30,1/3+2/30,1/30,2/30,1/3+1/30,2/30,1/3+1/30,2/30,1/3+1/30,2/30,1/3+1/30,1/3+2/30,1/30,1/3+2/30,1/30,1/3+2/30,1/30,1/3+2/30,1/30,1/3+2/30,1/3+1/30,1/3+2/30,1/3+1/30,1/3+2/30,1/3+1/30,1/3+2/30,1/3+1/30,2/3+2/30,1/30,2/3+2/30,1/30,2/3+2/30,1/30,2/3+2/30,1/30,2/30,1/3+1/30,2/30,1/3+1/30,2/30,1/3+1/30,2/30,1/3+1/30,2/3+2/30,1/30,2/3+2/30,1/30,2/3+2/30,1/30,2/3+2/30,1/30,1/3+2/30,1/3+1/30,1/3+2/30,1/3+1/30,1/3+2/30,1/3+1/30,1/3+2/30,1/3+1/30]),this.ids=new Float32Array([this.FRONT,this.FRONT,this.FRONT,this.FRONT,this.BACK,this.BACK,this.BACK,this.BACK,this.TOP,this.TOP,this.TOP,this.TOP,this.BOTTOM,this.BOTTOM,this.BOTTOM,this.BOTTOM,this.RIGHT,this.RIGHT,this.RIGHT,this.RIGHT,this.LEFT,this.LEFT,this.LEFT,this.LEFT,this.TOP_LEFT_FRONT,this.TOP_LEFT_FRONT,this.TOP_LEFT_FRONT,this.TOP_LEFT_FRONT,this.TOP_LEFT_FRONT,this.TOP_LEFT_FRONT,this.TOP_LEFT_FRONT,this.TOP_LEFT_FRONT,this.TOP_LEFT_FRONT,this.TOP_LEFT_FRONT,this.TOP_LEFT_FRONT,this.TOP_LEFT_FRONT,this.TOP_RIGHT_FRONT,this.TOP_RIGHT_FRONT,this.TOP_RIGHT_FRONT,this.TOP_RIGHT_FRONT,this.TOP_RIGHT_FRONT,this.TOP_RIGHT_FRONT,this.TOP_RIGHT_FRONT,this.TOP_RIGHT_FRONT,this.TOP_RIGHT_FRONT,this.TOP_RIGHT_FRONT,this.TOP_RIGHT_FRONT,this.TOP_RIGHT_FRONT,this.TOP_LEFT_BACK,this.TOP_LEFT_BACK,this.TOP_LEFT_BACK,this.TOP_LEFT_BACK,this.TOP_LEFT_BACK,this.TOP_LEFT_BACK,this.TOP_LEFT_BACK,this.TOP_LEFT_BACK,this.TOP_LEFT_BACK,this.TOP_LEFT_BACK,this.TOP_LEFT_BACK,this.TOP_LEFT_BACK,this.TOP_RIGHT_BACK,this.TOP_RIGHT_BACK,this.TOP_RIGHT_BACK,this.TOP_RIGHT_BACK,this.TOP_RIGHT_BACK,this.TOP_RIGHT_BACK,this.TOP_RIGHT_BACK,this.TOP_RIGHT_BACK,this.TOP_RIGHT_BACK,this.TOP_RIGHT_BACK,this.TOP_RIGHT_BACK,this.TOP_RIGHT_BACK,this.BOTTOM_LEFT_FRONT,this.BOTTOM_LEFT_FRONT,this.BOTTOM_LEFT_FRONT,this.BOTTOM_LEFT_FRONT,this.BOTTOM_LEFT_FRONT,this.BOTTOM_LEFT_FRONT,this.BOTTOM_LEFT_FRONT,this.BOTTOM_LEFT_FRONT,this.BOTTOM_LEFT_FRONT,this.BOTTOM_LEFT_FRONT,this.BOTTOM_LEFT_FRONT,this.BOTTOM_LEFT_FRONT,this.BOTTOM_RIGHT_FRONT,this.BOTTOM_RIGHT_FRONT,this.BOTTOM_RIGHT_FRONT,this.BOTTOM_RIGHT_FRONT,this.BOTTOM_RIGHT_FRONT,this.BOTTOM_RIGHT_FRONT,this.BOTTOM_RIGHT_FRONT,this.BOTTOM_RIGHT_FRONT,this.BOTTOM_RIGHT_FRONT,this.BOTTOM_RIGHT_FRONT,this.BOTTOM_RIGHT_FRONT,this.BOTTOM_RIGHT_FRONT,this.BOTTOM_LEFT_BACK,this.BOTTOM_LEFT_BACK,this.BOTTOM_LEFT_BACK,this.BOTTOM_LEFT_BACK,this.BOTTOM_LEFT_BACK,this.BOTTOM_LEFT_BACK,this.BOTTOM_LEFT_BACK,this.BOTTOM_LEFT_BACK,this.BOTTOM_LEFT_BACK,this.BOTTOM_LEFT_BACK,this.BOTTOM_LEFT_BACK,this.BOTTOM_LEFT_BACK,this.BOTTOM_RIGHT_BACK,this.BOTTOM_RIGHT_BACK,this.BOTTOM_RIGHT_BACK,this.BOTTOM_RIGHT_BACK,this.BOTTOM_RIGHT_BACK,this.BOTTOM_RIGHT_BACK,this.BOTTOM_RIGHT_BACK,this.BOTTOM_RIGHT_BACK,this.BOTTOM_RIGHT_BACK,this.BOTTOM_RIGHT_BACK,this.BOTTOM_RIGHT_BACK,this.BOTTOM_RIGHT_BACK,this.TOP_RIGHT,this.TOP_RIGHT,this.TOP_RIGHT,this.TOP_RIGHT,this.TOP_RIGHT,this.TOP_RIGHT,this.TOP_RIGHT,this.TOP_RIGHT,this.TOP_LEFT,this.TOP_LEFT,this.TOP_LEFT,this.TOP_LEFT,this.TOP_LEFT,this.TOP_LEFT,this.TOP_LEFT,this.TOP_LEFT,this.TOP_FRONT,this.TOP_FRONT,this.TOP_FRONT,this.TOP_FRONT,this.TOP_FRONT,this.TOP_FRONT,this.TOP_FRONT,this.TOP_FRONT,this.TOP_BACK,this.TOP_BACK,this.TOP_BACK,this.TOP_BACK,this.TOP_BACK,this.TOP_BACK,this.TOP_BACK,this.TOP_BACK,this.BOTTOM_RIGHT,this.BOTTOM_RIGHT,this.BOTTOM_RIGHT,this.BOTTOM_RIGHT,this.BOTTOM_RIGHT,this.BOTTOM_RIGHT,this.BOTTOM_RIGHT,this.BOTTOM_RIGHT,this.BOTTOM_LEFT,this.BOTTOM_LEFT,this.BOTTOM_LEFT,this.BOTTOM_LEFT,this.BOTTOM_LEFT,this.BOTTOM_LEFT,this.BOTTOM_LEFT,this.BOTTOM_LEFT,this.BOTTOM_FRONT,this.BOTTOM_FRONT,this.BOTTOM_FRONT,this.BOTTOM_FRONT,this.BOTTOM_FRONT,this.BOTTOM_FRONT,this.BOTTOM_FRONT,this.BOTTOM_FRONT,this.BOTTOM_BACK,this.BOTTOM_BACK,this.BOTTOM_BACK,this.BOTTOM_BACK,this.BOTTOM_BACK,this.BOTTOM_BACK,this.BOTTOM_BACK,this.BOTTOM_BACK,this.FRONT_RIGHT,this.FRONT_RIGHT,this.FRONT_RIGHT,this.FRONT_RIGHT,this.FRONT_RIGHT,this.FRONT_RIGHT,this.FRONT_RIGHT,this.FRONT_RIGHT,this.FRONT_LEFT,this.FRONT_LEFT,this.FRONT_LEFT,this.FRONT_LEFT,this.FRONT_LEFT,this.FRONT_LEFT,this.FRONT_LEFT,this.FRONT_LEFT,this.BACK_RIGHT,this.BACK_RIGHT,this.BACK_RIGHT,this.BACK_RIGHT,this.BACK_RIGHT,this.BACK_RIGHT,this.BACK_RIGHT,this.BACK_RIGHT,this.BACK_LEFT,this.BACK_LEFT,this.BACK_LEFT,this.BACK_LEFT,this.BACK_LEFT,this.BACK_LEFT,this.BACK_LEFT,this.BACK_LEFT]),this._image=t}return Object.defineProperty(t.prototype,"stopped",{get:function(){return this._stopped},set:function(t){this._stopped=t,this.viewer&&this.viewer.draw()},enumerable:!1,configurable:!0}),t.prototype.init=function(t){var e=this;this.viewer=t;var r=this.viewer.gl;this._shader=null,this._initShader(),this._alpha=this.passiveAlpha,this._selection=0,r.useProgram(this._shader),this._pMatrixUniformPointer=r.getUniformLocation(this._shader,"uPMatrix"),this._rotationUniformPointer=r.getUniformLocation(this._shader,"uRotation"),this._colourCodingUniformPointer=r.getUniformLocation(this._shader,"uColorCoding"),this._alphaUniformPointer=r.getUniformLocation(this._shader,"uAlpha"),this._selectionUniformPointer=r.getUniformLocation(this._shader,"uSelection"),this._textureUniformPointer=r.getUniformLocation(this._shader,"uTexture"),this._highlightingUniformPointer=r.getUniformLocation(this._shader,"uHighlighting"),this._vertexAttrPointer=r.getAttribLocation(this._shader,"aVertex"),this._texCoordAttrPointer=r.getAttribLocation(this._shader,"aTexCoord"),this._idAttrPointer=r.getAttribLocation(this._shader,"aId"),r.enableVertexAttribArray(this._vertexAttrPointer),r.enableVertexAttribArray(this._texCoordAttrPointer),r.enableVertexAttribArray(this._idAttrPointer),this._indexBuffer=r.createBuffer(),this._vertexBuffer=r.createBuffer(),this._texCoordBuffer=r.createBuffer(),this._idBuffer=r.createBuffer(),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,this._indexBuffer),r.bufferData(r.ELEMENT_ARRAY_BUFFER,this.indices,r.STATIC_DRAW),r.bindBuffer(r.ARRAY_BUFFER,this._vertexBuffer),r.bufferData(r.ARRAY_BUFFER,this.vertices,r.STATIC_DRAW),r.bindBuffer(r.ARRAY_BUFFER,this._texCoordBuffer),r.bufferData(r.ARRAY_BUFFER,this.txtCoords,r.STATIC_DRAW),r.bindBuffer(r.ARRAY_BUFFER,this._idBuffer),r.bufferData(r.ARRAY_BUFFER,this.ids,r.STATIC_DRAW);var n=this;if(this._texture=r.createTexture(),void 0===this._image){var i=a.CubeTextures.en,s=new Image;n._image=s,s.addEventListener("load",(function(){r.bindTexture(r.TEXTURE_2D,n._texture),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,1),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,n._image),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR_MIPMAP_NEAREST),r.generateMipmap(r.TEXTURE_2D)})),s.src=i}else r.bindTexture(r.TEXTURE_2D,n._texture),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,1),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,n._image),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR_MIPMAP_NEAREST),r.generateMipmap(r.TEXTURE_2D);t.canvas.addEventListener("mousemove",(function(r){if(!(e.stopped||t.plugins.indexOf(e)<0)){var i=r.clientX,a=r.clientY,o=t.canvas.getBoundingClientRect(),s=i-o.left,u=t.height-(a-o.top);if(n._region){if(!n.isInRegion(s,u))return n._alpha=n.passiveAlpha,void(n._selection=0);var c=e.getId(r);null==c?(n._alpha=n.passiveAlpha,n._selection=0):c>=n.TOP&&c<=n.BACK_LEFT&&(n._alpha=n.activeAlpha,n._selection=c),e.onAfterDraw(t.width,t.height)}}}),!0),n._drag=!1,t.canvas.addEventListener("mousedown",(function(r){if(!(e.stopped||t.plugins.indexOf(e)<0)){var i=r.clientX,a=r.clientY,o=t.canvas.getBoundingClientRect(),s=i-o.left,u=t.height-(a-o.top);if(e._region&&n.isInRegion(s,u)){var c=e.getId(r);null!=c&&c>=n.TOP&&c<=n.BACK_LEFT&&(n._drag=!0,n._originalNavigation=t.navigationMode,t.navigationMode="orbit")}}}),!0),window.addEventListener("mouseup",(function(r){e.stopped||t.plugins.indexOf(e)<0||!0===n._drag&&(t.navigationMode=n._originalNavigation),n._drag=!1}),!0),t.on("pick",(function(r){if(null==r.model){var n=r.event;if(n instanceof MouseEvent||n instanceof TouchEvent){var i=null;i=n instanceof MouseEvent?n:n.changedTouches[0];var a=e.getId(i),s=o.vec3.create(),u=o.vec3.fromValues(0,0,1);switch(a){case e.TOP:s=o.vec3.fromValues(0,0,1),u=o.vec3.fromValues(0,1,0);break;case e.BOTTOM:s=o.vec3.fromValues(0,0,-1),u=o.vec3.fromValues(0,-1,0);break;case e.FRONT:s=o.vec3.fromValues(0,-1,0);break;case e.BACK:s=o.vec3.fromValues(0,1,0);break;case e.LEFT:s=o.vec3.fromValues(-1,0,0);break;case e.RIGHT:s=o.vec3.fromValues(1,0,0);break;case e.TOP_LEFT_FRONT:s=o.vec3.fromValues(-1,-1,1);break;case e.TOP_RIGHT_FRONT:s=o.vec3.fromValues(1,-1,1);break;case e.TOP_LEFT_BACK:s=o.vec3.fromValues(-1,1,1);break;case e.TOP_RIGHT_BACK:s=o.vec3.fromValues(1,1,1);break;case e.BOTTOM_LEFT_FRONT:s=o.vec3.fromValues(-1,-1,-1);break;case e.BOTTOM_RIGHT_FRONT:s=o.vec3.fromValues(1,-1,-1);break;case e.BOTTOM_LEFT_BACK:s=o.vec3.fromValues(-1,1,-1);break;case e.BOTTOM_RIGHT_BACK:s=o.vec3.fromValues(1,1,-1);break;case e.TOP_LEFT:s=o.vec3.fromValues(-1,0,1);break;case e.TOP_RIGHT:s=o.vec3.fromValues(1,0,1);break;case e.TOP_FRONT:s=o.vec3.fromValues(0,-1,1);break;case e.TOP_BACK:s=o.vec3.fromValues(0,1,1);break;case e.BOTTOM_LEFT:s=o.vec3.fromValues(-1,0,-1);break;case e.BOTTOM_RIGHT:s=o.vec3.fromValues(1,0,-1);break;case e.BOTTOM_FRONT:s=o.vec3.fromValues(0,-1,-1);break;case e.BOTTOM_BACK:s=o.vec3.fromValues(0,1,-1);break;case e.FRONT_RIGHT:s=o.vec3.fromValues(1,-1,0);break;case e.FRONT_LEFT:s=o.vec3.fromValues(-1,-1,0);break;case e.BACK_RIGHT:s=o.vec3.fromValues(1,1,0);break;case e.BACK_LEFT:s=o.vec3.fromValues(-1,1,0);break;default:return!1}var c=t.getTargetBoundingBox(),l=o.vec3.fromValues(c[0]+c[3]/2,c[1]+c[4]/2,c[2]+c[5]/2);if(s=o.vec3.normalize(o.vec3.create(),s),0!==e.trueNorth){var h=-e.trueNorth*Math.PI/180,f=o.quat.rotateZ(o.quat.create(),o.quat.create(),h);s=o.vec3.transformQuat(o.vec3.create(),s,f),u=o.vec3.transformQuat(o.vec3.create(),u,f)}var d=t.getDistanceAndHeight(c,s,u),A=o.vec3.scale(o.vec3.create(),s,d.distance),p=o.vec3.add(o.vec3.create(),l,A),v=o.mat4.lookAt(o.mat4.create(),p,l,u);e.viewer.animations.viewTo({mv:v,height:d.height},e.viewer.zoomDuration)}}})),this._initialized=!0},t.prototype.onBeforeDraw=function(t,e){},t.prototype.onBeforePick=function(t){return t.model===this._modelId&&null!=t.id},t.prototype.onAfterDraw=function(t,e){if(!this.stopped){var r=this.setActive();r.disable(r.BLEND),r.disable(r.DEPTH_TEST),r.uniform1f(this._colourCodingUniformPointer,0),this.draw(t,e)}},t.prototype.onBeforeDrawId=function(){},t.prototype.onAfterDrawId=function(){this.stopped||(this.setActive().uniform1f(this._colourCodingUniformPointer,1),this.draw(this.viewer.width,this.viewer.height))},t.prototype.onAfterDrawModelId=function(){this.stopped||(this.setActive().uniform1f(this._colourCodingUniformPointer,this._modelId),this.draw(this.viewer.width,this.viewer.height))},t.prototype.getId=function(t){var e=t.clientX,r=t.clientY,n=this.viewer.canvas.getBoundingClientRect(),i=e-n.left,a=this.viewer.height-(r-n.top),o=this.viewer.gl,u=new s.Framebuffer(o,this.viewer.width,this.viewer.height,this.viewer.hasDepthSupport,this.viewer.glVersion);o.viewport(0,0,this.viewer.width,this.viewer.height),o.enable(o.DEPTH_TEST),o.disable(o.BLEND),o.clearColor(0,0,0,0),o.clear(o.COLOR_BUFFER_BIT|o.DEPTH_BUFFER_BIT),this.onAfterDrawId();var c=u.getId(i,a);return u.delete(),c},t.prototype.setActive=function(){var t=this.viewer.gl;return t.useProgram(this._shader),t},t.prototype.isInRegion=function(t,e){var r=this._region[0]*this.viewer.width,n=this._region[2]*this.viewer.width,i=this._region[1]*this.viewer.height,a=this._region[3]*this.viewer.height;return!(t<r||t>n||e<i||e>a)},t.prototype.draw=function(t,e){if(!this.stopped&&this._initialized){var r=this.viewer.gl,n=Math.min(t,e),i=this.minSize/n,a=this.maxSize/n,s=this.ratio;s<i?s=i:s>a&&(s=a);var u=o.mat4.create(),c=1/s,l=c/e*t;e>t&&(c=(l=1/s)/t*e);var h=s*e/t*2,f=2*s;switch(this.position){case this.BOTTOM_RIGHT:o.mat4.ortho(u,1-l,1,-1,c-1,-1,1),this._region=[1-h,0,1,f];break;case this.BOTTOM_LEFT:o.mat4.ortho(u,-1,l-1,-1,c-1,-1,1),this._region=[0,0,h,f];break;case this.TOP_LEFT:o.mat4.ortho(u,-1,l-1,1-c,1,-1,1),this._region=[0,1-f,h,1];break;case this.TOP_RIGHT:o.mat4.ortho(u,1-l,1,1-c,1,-1,1),this._region=[1-h,1-f,1,1]}var d=o.mat3.fromMat4(o.mat3.create(),this.viewer.mvMatrix);if(0!==this.trueNorth){var A=-this.trueNorth*Math.PI/180,p=o.mat3.fromRotation(o.mat3.create(),A);d=o.mat3.multiply(o.mat3.create(),d,p)}r.uniformMatrix4fv(this._pMatrixUniformPointer,!1,u),r.uniformMatrix3fv(this._rotationUniformPointer,!1,d),r.uniform1f(this._alphaUniformPointer,this._alpha),r.uniform1f(this._highlightingUniformPointer,this.highlighting),r.uniform1f(this._selectionUniformPointer,this._selection),r.bindBuffer(r.ARRAY_BUFFER,this._vertexBuffer),r.vertexAttribPointer(this._vertexAttrPointer,3,r.FLOAT,!1,0,0),r.bindBuffer(r.ARRAY_BUFFER,this._idBuffer),r.vertexAttribPointer(this._idAttrPointer,1,r.FLOAT,!1,0,0),r.bindBuffer(r.ARRAY_BUFFER,this._texCoordBuffer),r.vertexAttribPointer(this._texCoordAttrPointer,2,r.FLOAT,!1,0,0),r.activeTexture(r.TEXTURE1),r.bindTexture(r.TEXTURE_2D,this._texture),r.uniform1i(this._textureUniformPointer,1);var v=r.getParameter(r.CULL_FACE);v||r.enable(r.CULL_FACE),r.disable(r.BLEND),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,this._indexBuffer),r.drawElements(r.TRIANGLES,this.indices.length,r.UNSIGNED_SHORT,0),v||r.disable(r.CULL_FACE)}},t.prototype._initShader=function(){var t=this.viewer.gl,e=this.viewer,r=function(r,n){if(t.shaderSource(r,n),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS)){var i=t.getShaderInfoLog(r);return e.error(i),null}},a=t.createShader(t.FRAGMENT_SHADER);r(a,n.cube_fshader);var o=t.createShader(t.VERTEX_SHADER);r(o,i.cube_vshader),this._shader=t.createProgram(),t.attachShader(this._shader,o),t.attachShader(this._shader,a),t.linkProgram(this._shader),t.getProgramParameter(this._shader,t.LINK_STATUS)||e.error("Could not initialise shaders for a navigation cube plugin")},t}();e.NavigationCube=u},1712:function(t,e,r){var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||n(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),i(r(1410),e),i(r(5819),e),i(r(5637),e),i(r(1906),e),i(r(382),e)},1410:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0})},9438:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Product=void 0;var r=function(){function t(){}return t.getByName=function(t){t=t.toUpperCase();for(var e=[n];0!==e.length;){var r=e.shift();if(r.name.toUpperCase()===t)return r;r.children&&r.children.forEach((function(t){e.push(t)}))}return null},t.getAllSubTypes=function(t){for(var e=[],r=[n];0!==r.length;)(a=r.shift()).id===t&&e.push(a),a.children&&a.children.forEach((function(t){r.push(t)}));r=e.slice();for(var i={};0!==r.length;){var a;!1===(a=r.shift()).abs&&(i[a.id]=!0),a.children&&a.children.forEach((function(t){r.push(t)}))}return i},t}();e.Product=r;var n={name:"IfcProduct",id:20,abs:!0,children:[{name:"IfcElement",id:19,abs:!0,children:[{name:"IfcDistributionElement",id:44,abs:!1,children:[{name:"IfcDistributionFlowElement",id:45,abs:!1,children:[{name:"IfcDistributionChamberElement",id:180,abs:!1},{name:"IfcEnergyConversionDevice",id:175,abs:!1,children:[{name:"IfcAirToAirHeatRecovery",id:1097,abs:!1},{name:"IfcBoiler",id:1105,abs:!1},{name:"IfcBurner",id:1109,abs:!1},{name:"IfcChiller",id:1119,abs:!1},{name:"IfcCoil",id:1124,abs:!1},{name:"IfcCondenser",id:1132,abs:!1},{name:"IfcCooledBeam",id:1141,abs:!1},{name:"IfcCoolingTower",id:1142,abs:!1},{name:"IfcEngine",id:1164,abs:!1},{name:"IfcEvaporativeCooler",id:1166,abs:!1},{name:"IfcEvaporator",id:1167,abs:!1},{name:"IfcHeatExchanger",id:1187,abs:!1},{name:"IfcHumidifier",id:1188,abs:!1},{name:"IfcTubeBundle",id:1305,abs:!1},{name:"IfcUnitaryEquipment",id:1310,abs:!1},{name:"IfcElectricGenerator",id:1160,abs:!1},{name:"IfcElectricMotor",id:1161,abs:!1},{name:"IfcMotorConnection",id:1216,abs:!1},{name:"IfcSolarDevice",id:1270,abs:!1},{name:"IfcTransformer",id:1303,abs:!1}]},{name:"IfcFlowController",id:121,abs:!1,children:[{name:"IfcElectricDistributionPoint",id:242,abs:!1},{name:"IfcAirTerminalBox",id:1096,abs:!1},{name:"IfcDamper",id:1148,abs:!1},{name:"IfcFlowMeter",id:1182,abs:!1},{name:"IfcValve",id:1311,abs:!1},{name:"IfcElectricDistributionBoard",id:1157,abs:!1},{name:"IfcElectricTimeControl",id:1162,abs:!1},{name:"IfcProtectiveDevice",id:1235,abs:!1},{name:"IfcSwitchingDevice",id:1290,abs:!1}]},{name:"IfcFlowFitting",id:467,abs:!1,children:[{name:"IfcDuctFitting",id:1153,abs:!1},{name:"IfcPipeFitting",id:1222,abs:!1},{name:"IfcCableCarrierFitting",id:1111,abs:!1},{name:"IfcCableFitting",id:1113,abs:!1},{name:"IfcJunctionBox",id:1195,abs:!1}]},{name:"IfcFlowMovingDevice",id:502,abs:!1,children:[{name:"IfcCompressor",id:1131,abs:!1},{name:"IfcFan",id:1177,abs:!1},{name:"IfcPump",id:1238,abs:!1}]},{name:"IfcFlowSegment",id:574,abs:!1,children:[{name:"IfcDuctSegment",id:1154,abs:!1},{name:"IfcPipeSegment",id:1223,abs:!1},{name:"IfcCableCarrierSegment",id:1112,abs:!1},{name:"IfcCableSegment",id:1115,abs:!1}]},{name:"IfcFlowStorageDevice",id:371,abs:!1,children:[{name:"IfcTank",id:1293,abs:!1},{name:"IfcElectricFlowStorageDevice",id:1159,abs:!1}]},{name:"IfcFlowTerminal",id:46,abs:!1,children:[{name:"IfcFireSuppressionTerminal",id:1179,abs:!1},{name:"IfcSanitaryTerminal",id:1262,abs:!1},{name:"IfcStackTerminal",id:1277,abs:!1},{name:"IfcWasteTerminal",id:1315,abs:!1},{name:"IfcAirTerminal",id:1095,abs:!1},{name:"IfcMedicalDevice",id:1212,abs:!1},{name:"IfcSpaceHeater",id:1272,abs:!1},{name:"IfcAudioVisualAppliance",id:1099,abs:!1},{name:"IfcCommunicationsAppliance",id:1127,abs:!1},{name:"IfcElectricAppliance",id:1156,abs:!1},{name:"IfcLamp",id:1198,abs:!1},{name:"IfcLightFixture",id:1199,abs:!1},{name:"IfcOutlet",id:1219,abs:!1}]},{name:"IfcFlowTreatmentDevice",id:425,abs:!1,children:[{name:"IfcInterceptor",id:1193,abs:!1},{name:"IfcDuctSilencer",id:1155,abs:!1},{name:"IfcFilter",id:1178,abs:!1}]}]},{name:"IfcDistributionControlElement",id:468,abs:!1,children:[{name:"IfcProtectiveDeviceTrippingUnit",id:1236,abs:!1},{name:"IfcActuator",id:1091,abs:!1},{name:"IfcAlarm",id:1098,abs:!1},{name:"IfcController",id:1139,abs:!1},{name:"IfcFlowInstrument",id:1181,abs:!1},{name:"IfcSensor",id:1264,abs:!1},{name:"IfcUnitaryControlElement",id:1308,abs:!1}]}]},{name:"IfcElementComponent",id:424,abs:!0,children:[{name:"IfcDiscreteAccessory",id:423,abs:!1},{name:"IfcFastener",id:535,abs:!1,children:[{name:"IfcMechanicalFastener",id:536,abs:!1}]},{name:"IfcReinforcingElement",id:262,abs:!0,children:[{name:"IfcReinforcingBar",id:571,abs:!1},{name:"IfcReinforcingMesh",id:531,abs:!1},{name:"IfcTendon",id:261,abs:!1},{name:"IfcTendonAnchor",id:675,abs:!1}]},{name:"IfcBuildingElementPart",id:220,abs:!1},{name:"IfcMechanicalFastener",id:536,abs:!1},{name:"IfcVibrationIsolator",id:1312,abs:!1}]},{name:"IfcFeatureElement",id:386,abs:!0,children:[{name:"IfcFeatureElementSubtraction",id:499,abs:!0,children:[{name:"IfcEdgeFeature",id:764,abs:!0,children:[{name:"IfcChamferEdgeFeature",id:765,abs:!1},{name:"IfcRoundedEdgeFeature",id:766,abs:!1}]},{name:"IfcOpeningElement",id:498,abs:!1,children:[{name:"IfcOpeningStandardCase",id:1217,abs:!1}]},{name:"IfcVoidingFeature",id:1313,abs:!1}]},{name:"IfcFeatureElementAddition",id:385,abs:!0,children:[{name:"IfcProjectionElement",id:384,abs:!1}]},{name:"IfcSurfaceFeature",id:1287,abs:!1}]},{name:"IfcBuildingElement",id:26,abs:!0,children:[{name:"IfcBuildingElementComponent",id:221,abs:!0,children:[{name:"IfcBuildingElementPart",id:220,abs:!1},{name:"IfcReinforcingElement",id:262,abs:!0,children:[{name:"IfcReinforcingBar",id:571,abs:!1},{name:"IfcReinforcingMesh",id:531,abs:!1},{name:"IfcTendon",id:261,abs:!1},{name:"IfcTendonAnchor",id:675,abs:!1}]}]},{name:"IfcFooting",id:120,abs:!1},{name:"IfcPile",id:572,abs:!1},{name:"IfcBeam",id:171,abs:!1,children:[{name:"IfcBeamStandardCase",id:1104,abs:!1}]},{name:"IfcColumn",id:383,abs:!1,children:[{name:"IfcColumnStandardCase",id:1126,abs:!1}]},{name:"IfcCurtainWall",id:456,abs:!1},{name:"IfcDoor",id:213,abs:!1,children:[{name:"IfcDoorStandardCase",id:1151,abs:!1}]},{name:"IfcMember",id:310,abs:!1,children:[{name:"IfcMemberStandardCase",id:1214,abs:!1}]},{name:"IfcPlate",id:351,abs:!1,children:[{name:"IfcPlateStandardCase",id:1224,abs:!1}]},{name:"IfcRailing",id:350,abs:!1},{name:"IfcRamp",id:414,abs:!1},{name:"IfcRampFlight",id:348,abs:!1},{name:"IfcRoof",id:347,abs:!1},{name:"IfcSlab",id:99,abs:!1,children:[{name:"IfcSlabElementedCase",id:1268,abs:!1},{name:"IfcSlabStandardCase",id:1269,abs:!1}]},{name:"IfcStair",id:346,abs:!1},{name:"IfcStairFlight",id:25,abs:!1},{name:"IfcWall",id:452,abs:!1,children:[{name:"IfcWallStandardCase",id:453,abs:!1},{name:"IfcWallElementedCase",id:1314,abs:!1}]},{name:"IfcWindow",id:667,abs:!1,children:[{name:"IfcWindowStandardCase",id:1316,abs:!1}]},{name:"IfcBuildingElementProxy",id:560,abs:!1},{name:"IfcCovering",id:382,abs:!1},{name:"IfcChimney",id:1120,abs:!1},{name:"IfcShadingDevice",id:1265,abs:!1}]},{name:"IfcElementAssembly",id:18,abs:!1},{name:"IfcFurnishingElement",id:253,abs:!1,children:[{name:"IfcFurniture",id:1184,abs:!1},{name:"IfcSystemFurnitureElement",id:1291,abs:!1}]},{name:"IfcTransportElement",id:416,abs:!1},{name:"IfcVirtualElement",id:168,abs:!1},{name:"IfcElectricalElement",id:23,abs:!1},{name:"IfcEquipmentElement",id:212,abs:!1},{name:"IfcCivilElement",id:1122,abs:!1},{name:"IfcGeographicElement",id:1185,abs:!1}]},{name:"IfcPort",id:179,abs:!0,children:[{name:"IfcDistributionPort",id:178,abs:!1}]},{name:"IfcProxy",id:447,abs:!1},{name:"IfcStructuralActivity",id:41,abs:!0,children:[{name:"IfcStructuralAction",id:40,abs:!0,children:[{name:"IfcStructuralLinearAction",id:463,abs:!1,children:[{name:"IfcStructuralLinearActionVarying",id:464,abs:!1}]},{name:"IfcStructuralPlanarAction",id:39,abs:!1,children:[{name:"IfcStructuralPlanarActionVarying",id:357,abs:!1}]},{name:"IfcStructuralPointAction",id:356,abs:!1},{name:"IfcStructuralCurveAction",id:1279,abs:!1,children:[{name:"IfcStructuralLinearAction",id:463,abs:!1}]},{name:"IfcStructuralSurfaceAction",id:1284,abs:!1,children:[{name:"IfcStructuralPlanarAction",id:39,abs:!1}]}]},{name:"IfcStructuralReaction",id:355,abs:!0,children:[{name:"IfcStructuralPointReaction",id:354,abs:!1},{name:"IfcStructuralCurveReaction",id:1280,abs:!1},{name:"IfcStructuralSurfaceReaction",id:1285,abs:!1}]}]},{name:"IfcStructuralItem",id:226,abs:!0,children:[{name:"IfcStructuralConnection",id:265,abs:!0,children:[{name:"IfcStructuralCurveConnection",id:534,abs:!1},{name:"IfcStructuralPointConnection",id:533,abs:!1},{name:"IfcStructuralSurfaceConnection",id:264,abs:!1}]},{name:"IfcStructuralMember",id:225,abs:!0,children:[{name:"IfcStructuralCurveMember",id:224,abs:!1,children:[{name:"IfcStructuralCurveMemberVarying",id:227,abs:!1}]},{name:"IfcStructuralSurfaceMember",id:420,abs:!1,children:[{name:"IfcStructuralSurfaceMemberVarying",id:421,abs:!1}]}]}]},{name:"IfcAnnotation",id:634,abs:!1},{name:"IfcSpatialStructureElement",id:170,abs:!0,children:[{name:"IfcBuilding",id:169,abs:!1},{name:"IfcBuildingStorey",id:459,abs:!1},{name:"IfcSite",id:349,abs:!1},{name:"IfcSpace",id:454,abs:!1}]},{name:"IfcGrid",id:564,abs:!1},{name:"IfcSpatialElement",id:1273,abs:!0,children:[{name:"IfcSpatialStructureElement",id:170,abs:!0,children:[{name:"IfcBuilding",id:169,abs:!1},{name:"IfcBuildingStorey",id:459,abs:!1},{name:"IfcSite",id:349,abs:!1},{name:"IfcSpace",id:454,abs:!1}]},{name:"IfcExternalSpatialStructureElement",id:1175,abs:!0,children:[{name:"IfcExternalSpatialElement",id:1174,abs:!1}]},{name:"IfcSpatialZone",id:1275,abs:!1}]}]}},3425:(t,e)=>{var r;Object.defineProperty(e,"__esModule",{value:!0}),e.ProductType=void 0,(r=e.ProductType||(e.ProductType={}))[r.IFCPRODUCT=20]="IFCPRODUCT",r[r.IFCELEMENT=19]="IFCELEMENT",r[r.IFCBUILDINGELEMENT=26]="IFCBUILDINGELEMENT",r[r.IFCFOOTING=120]="IFCFOOTING",r[r.IFCPILE=572]="IFCPILE",r[r.IFCBEAM=171]="IFCBEAM",r[r.IFCBEAMSTANDARDCASE=1104]="IFCBEAMSTANDARDCASE",r[r.IFCBUILDINGELEMENTPROXY=560]="IFCBUILDINGELEMENTPROXY",r[r.IFCCHIMNEY=1120]="IFCCHIMNEY",r[r.IFCCOLUMN=383]="IFCCOLUMN",r[r.IFCCOLUMNSTANDARDCASE=1126]="IFCCOLUMNSTANDARDCASE",r[r.IFCCOVERING=382]="IFCCOVERING",r[r.IFCCURTAINWALL=456]="IFCCURTAINWALL",r[r.IFCDOOR=213]="IFCDOOR",r[r.IFCDOORSTANDARDCASE=1151]="IFCDOORSTANDARDCASE",r[r.IFCMEMBER=310]="IFCMEMBER",r[r.IFCMEMBERSTANDARDCASE=1214]="IFCMEMBERSTANDARDCASE",r[r.IFCPLATE=351]="IFCPLATE",r[r.IFCPLATESTANDARDCASE=1224]="IFCPLATESTANDARDCASE",r[r.IFCRAILING=350]="IFCRAILING",r[r.IFCRAMP=414]="IFCRAMP",r[r.IFCRAMPFLIGHT=348]="IFCRAMPFLIGHT",r[r.IFCROOF=347]="IFCROOF",r[r.IFCSHADINGDEVICE=1265]="IFCSHADINGDEVICE",r[r.IFCSLAB=99]="IFCSLAB",r[r.IFCSLABELEMENTEDCASE=1268]="IFCSLABELEMENTEDCASE",r[r.IFCSLABSTANDARDCASE=1269]="IFCSLABSTANDARDCASE",r[r.IFCSTAIR=346]="IFCSTAIR",r[r.IFCSTAIRFLIGHT=25]="IFCSTAIRFLIGHT",r[r.IFCWALL=452]="IFCWALL",r[r.IFCWALLELEMENTEDCASE=1314]="IFCWALLELEMENTEDCASE",r[r.IFCWALLSTANDARDCASE=453]="IFCWALLSTANDARDCASE",r[r.IFCWINDOW=667]="IFCWINDOW",r[r.IFCWINDOWSTANDARDCASE=1316]="IFCWINDOWSTANDARDCASE",r[r.IFCELEMENTCOMPONENT=424]="IFCELEMENTCOMPONENT",r[r.IFCREINFORCINGELEMENT=262]="IFCREINFORCINGELEMENT",r[r.IFCREINFORCINGBAR=571]="IFCREINFORCINGBAR",r[r.IFCREINFORCINGMESH=531]="IFCREINFORCINGMESH",r[r.IFCTENDON=261]="IFCTENDON",r[r.IFCTENDONANCHOR=675]="IFCTENDONANCHOR",r[r.IFCBUILDINGELEMENTPART=220]="IFCBUILDINGELEMENTPART",r[r.IFCDISCRETEACCESSORY=423]="IFCDISCRETEACCESSORY",r[r.IFCFASTENER=535]="IFCFASTENER",r[r.IFCMECHANICALFASTENER=536]="IFCMECHANICALFASTENER",r[r.IFCVIBRATIONISOLATOR=1312]="IFCVIBRATIONISOLATOR",r[r.IFCFEATUREELEMENT=386]="IFCFEATUREELEMENT",r[r.IFCSURFACEFEATURE=1287]="IFCSURFACEFEATURE",r[r.IFCFEATUREELEMENTSUBTRACTION=499]="IFCFEATUREELEMENTSUBTRACTION",r[r.IFCVOIDINGFEATURE=1313]="IFCVOIDINGFEATURE",r[r.IFCOPENINGELEMENT=498]="IFCOPENINGELEMENT",r[r.IFCOPENINGSTANDARDCASE=1217]="IFCOPENINGSTANDARDCASE",r[r.IFCFEATUREELEMENTADDITION=385]="IFCFEATUREELEMENTADDITION",r[r.IFCPROJECTIONELEMENT=384]="IFCPROJECTIONELEMENT",r[r.IFCFURNISHINGELEMENT=253]="IFCFURNISHINGELEMENT",r[r.IFCFURNITURE=1184]="IFCFURNITURE",r[r.IFCSYSTEMFURNITUREELEMENT=1291]="IFCSYSTEMFURNITUREELEMENT",r[r.IFCDISTRIBUTIONELEMENT=44]="IFCDISTRIBUTIONELEMENT",r[r.IFCDISTRIBUTIONFLOWELEMENT=45]="IFCDISTRIBUTIONFLOWELEMENT",r[r.IFCDISTRIBUTIONCHAMBERELEMENT=180]="IFCDISTRIBUTIONCHAMBERELEMENT",r[r.IFCENERGYCONVERSIONDEVICE=175]="IFCENERGYCONVERSIONDEVICE",r[r.IFCAIRTOAIRHEATRECOVERY=1097]="IFCAIRTOAIRHEATRECOVERY",r[r.IFCBOILER=1105]="IFCBOILER",r[r.IFCBURNER=1109]="IFCBURNER",r[r.IFCCHILLER=1119]="IFCCHILLER",r[r.IFCCOIL=1124]="IFCCOIL",r[r.IFCCONDENSER=1132]="IFCCONDENSER",r[r.IFCCOOLEDBEAM=1141]="IFCCOOLEDBEAM",r[r.IFCCOOLINGTOWER=1142]="IFCCOOLINGTOWER",r[r.IFCENGINE=1164]="IFCENGINE",r[r.IFCEVAPORATIVECOOLER=1166]="IFCEVAPORATIVECOOLER",r[r.IFCEVAPORATOR=1167]="IFCEVAPORATOR",r[r.IFCHEATEXCHANGER=1187]="IFCHEATEXCHANGER",r[r.IFCHUMIDIFIER=1188]="IFCHUMIDIFIER",r[r.IFCTUBEBUNDLE=1305]="IFCTUBEBUNDLE",r[r.IFCUNITARYEQUIPMENT=1310]="IFCUNITARYEQUIPMENT",r[r.IFCELECTRICGENERATOR=1160]="IFCELECTRICGENERATOR",r[r.IFCELECTRICMOTOR=1161]="IFCELECTRICMOTOR",r[r.IFCMOTORCONNECTION=1216]="IFCMOTORCONNECTION",r[r.IFCSOLARDEVICE=1270]="IFCSOLARDEVICE",r[r.IFCTRANSFORMER=1303]="IFCTRANSFORMER",r[r.IFCFLOWCONTROLLER=121]="IFCFLOWCONTROLLER",r[r.IFCAIRTERMINALBOX=1096]="IFCAIRTERMINALBOX",r[r.IFCDAMPER=1148]="IFCDAMPER",r[r.IFCFLOWMETER=1182]="IFCFLOWMETER",r[r.IFCVALVE=1311]="IFCVALVE",r[r.IFCELECTRICDISTRIBUTIONBOARD=1157]="IFCELECTRICDISTRIBUTIONBOARD",r[r.IFCELECTRICTIMECONTROL=1162]="IFCELECTRICTIMECONTROL",r[r.IFCPROTECTIVEDEVICE=1235]="IFCPROTECTIVEDEVICE",r[r.IFCSWITCHINGDEVICE=1290]="IFCSWITCHINGDEVICE",r[r.IFCFLOWFITTING=467]="IFCFLOWFITTING",r[r.IFCDUCTFITTING=1153]="IFCDUCTFITTING",r[r.IFCPIPEFITTING=1222]="IFCPIPEFITTING",r[r.IFCCABLECARRIERFITTING=1111]="IFCCABLECARRIERFITTING",r[r.IFCCABLEFITTING=1113]="IFCCABLEFITTING",r[r.IFCJUNCTIONBOX=1195]="IFCJUNCTIONBOX",r[r.IFCFLOWMOVINGDEVICE=502]="IFCFLOWMOVINGDEVICE",r[r.IFCCOMPRESSOR=1131]="IFCCOMPRESSOR",r[r.IFCFAN=1177]="IFCFAN",r[r.IFCPUMP=1238]="IFCPUMP",r[r.IFCFLOWSEGMENT=574]="IFCFLOWSEGMENT",r[r.IFCDUCTSEGMENT=1154]="IFCDUCTSEGMENT",r[r.IFCPIPESEGMENT=1223]="IFCPIPESEGMENT",r[r.IFCCABLECARRIERSEGMENT=1112]="IFCCABLECARRIERSEGMENT",r[r.IFCCABLESEGMENT=1115]="IFCCABLESEGMENT",r[r.IFCFLOWSTORAGEDEVICE=371]="IFCFLOWSTORAGEDEVICE",r[r.IFCTANK=1293]="IFCTANK",r[r.IFCELECTRICFLOWSTORAGEDEVICE=1159]="IFCELECTRICFLOWSTORAGEDEVICE",r[r.IFCFLOWTERMINAL=46]="IFCFLOWTERMINAL",r[r.IFCFIRESUPPRESSIONTERMINAL=1179]="IFCFIRESUPPRESSIONTERMINAL",r[r.IFCSANITARYTERMINAL=1262]="IFCSANITARYTERMINAL",r[r.IFCSTACKTERMINAL=1277]="IFCSTACKTERMINAL",r[r.IFCWASTETERMINAL=1315]="IFCWASTETERMINAL",r[r.IFCAIRTERMINAL=1095]="IFCAIRTERMINAL",r[r.IFCMEDICALDEVICE=1212]="IFCMEDICALDEVICE",r[r.IFCSPACEHEATER=1272]="IFCSPACEHEATER",r[r.IFCAUDIOVISUALAPPLIANCE=1099]="IFCAUDIOVISUALAPPLIANCE",r[r.IFCCOMMUNICATIONSAPPLIANCE=1127]="IFCCOMMUNICATIONSAPPLIANCE",r[r.IFCELECTRICAPPLIANCE=1156]="IFCELECTRICAPPLIANCE",r[r.IFCLAMP=1198]="IFCLAMP",r[r.IFCLIGHTFIXTURE=1199]="IFCLIGHTFIXTURE",r[r.IFCOUTLET=1219]="IFCOUTLET",r[r.IFCFLOWTREATMENTDEVICE=425]="IFCFLOWTREATMENTDEVICE",r[r.IFCINTERCEPTOR=1193]="IFCINTERCEPTOR",r[r.IFCDUCTSILENCER=1155]="IFCDUCTSILENCER",r[r.IFCFILTER=1178]="IFCFILTER",r[r.IFCDISTRIBUTIONCONTROLELEMENT=468]="IFCDISTRIBUTIONCONTROLELEMENT",r[r.IFCPROTECTIVEDEVICETRIPPINGUNIT=1236]="IFCPROTECTIVEDEVICETRIPPINGUNIT",r[r.IFCACTUATOR=1091]="IFCACTUATOR",r[r.IFCALARM=1098]="IFCALARM",r[r.IFCCONTROLLER=1139]="IFCCONTROLLER",r[r.IFCFLOWINSTRUMENT=1181]="IFCFLOWINSTRUMENT",r[r.IFCSENSOR=1264]="IFCSENSOR",r[r.IFCUNITARYCONTROLELEMENT=1308]="IFCUNITARYCONTROLELEMENT",r[r.IFCCIVILELEMENT=1122]="IFCCIVILELEMENT",r[r.IFCELEMENTASSEMBLY=18]="IFCELEMENTASSEMBLY",r[r.IFCGEOGRAPHICELEMENT=1185]="IFCGEOGRAPHICELEMENT",r[r.IFCTRANSPORTELEMENT=416]="IFCTRANSPORTELEMENT",r[r.IFCVIRTUALELEMENT=168]="IFCVIRTUALELEMENT",r[r.IFCSTRUCTURALACTIVITY=41]="IFCSTRUCTURALACTIVITY",r[r.IFCSTRUCTURALACTION=40]="IFCSTRUCTURALACTION",r[r.IFCSTRUCTURALCURVEACTION=1279]="IFCSTRUCTURALCURVEACTION",r[r.IFCSTRUCTURALLINEARACTION=463]="IFCSTRUCTURALLINEARACTION",r[r.IFCSTRUCTURALSURFACEACTION=1284]="IFCSTRUCTURALSURFACEACTION",r[r.IFCSTRUCTURALPLANARACTION=39]="IFCSTRUCTURALPLANARACTION",r[r.IFCSTRUCTURALPOINTACTION=356]="IFCSTRUCTURALPOINTACTION",r[r.IFCSTRUCTURALREACTION=355]="IFCSTRUCTURALREACTION",r[r.IFCSTRUCTURALCURVEREACTION=1280]="IFCSTRUCTURALCURVEREACTION",r[r.IFCSTRUCTURALPOINTREACTION=354]="IFCSTRUCTURALPOINTREACTION",r[r.IFCSTRUCTURALSURFACEREACTION=1285]="IFCSTRUCTURALSURFACEREACTION",r[r.IFCSTRUCTURALITEM=226]="IFCSTRUCTURALITEM",r[r.IFCSTRUCTURALCONNECTION=265]="IFCSTRUCTURALCONNECTION",r[r.IFCSTRUCTURALCURVECONNECTION=534]="IFCSTRUCTURALCURVECONNECTION",r[r.IFCSTRUCTURALPOINTCONNECTION=533]="IFCSTRUCTURALPOINTCONNECTION",r[r.IFCSTRUCTURALSURFACECONNECTION=264]="IFCSTRUCTURALSURFACECONNECTION",r[r.IFCSTRUCTURALMEMBER=225]="IFCSTRUCTURALMEMBER",r[r.IFCSTRUCTURALCURVEMEMBER=224]="IFCSTRUCTURALCURVEMEMBER",r[r.IFCSTRUCTURALCURVEMEMBERVARYING=227]="IFCSTRUCTURALCURVEMEMBERVARYING",r[r.IFCSTRUCTURALSURFACEMEMBER=420]="IFCSTRUCTURALSURFACEMEMBER",r[r.IFCSTRUCTURALSURFACEMEMBERVARYING=421]="IFCSTRUCTURALSURFACEMEMBERVARYING",r[r.IFCPORT=179]="IFCPORT",r[r.IFCDISTRIBUTIONPORT=178]="IFCDISTRIBUTIONPORT",r[r.IFCANNOTATION=634]="IFCANNOTATION",r[r.IFCSPATIALELEMENT=1273]="IFCSPATIALELEMENT",r[r.IFCSPATIALSTRUCTUREELEMENT=170]="IFCSPATIALSTRUCTUREELEMENT",r[r.IFCBUILDING=169]="IFCBUILDING",r[r.IFCBUILDINGSTOREY=459]="IFCBUILDINGSTOREY",r[r.IFCSITE=349]="IFCSITE",r[r.IFCSPACE=454]="IFCSPACE",r[r.IFCEXTERNALSPATIALSTRUCTUREELEMENT=1175]="IFCEXTERNALSPATIALSTRUCTUREELEMENT",r[r.IFCEXTERNALSPATIALELEMENT=1174]="IFCEXTERNALSPATIALELEMENT",r[r.IFCSPATIALZONE=1275]="IFCSPATIALZONE",r[r.IFCGRID=564]="IFCGRID",r[r.IFCPROXY=447]="IFCPROXY"},6105:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BinaryReader=void 0;var n=r(6920),i=function(){function t(){this._buffer=null,this._view=null,this._position=0,this._progress=function(t){},this._lastProgress=0}return Object.defineProperty(t.prototype,"Position",{get:function(){return this._position},enumerable:!1,configurable:!0}),t.prototype.getSubReader=function(e){var r=new t,n=this._buffer.slice(this._position,this._position+e);return r.load(n,null,null),this._position+=e,r},t.prototype.load=function(t,e,r){this._position=0;var i=this;if(r=r||function(t){},this._progress=r,void 0===t||null==t)throw"Source must be defined";if("string"==typeof t){var a=new XMLHttpRequest;a.open("GET",t,!0),a.onreadystatechange=function(){if(4==a.readyState&&200==a.status){var t=new FileReader;t.onloadend=function(){t.result&&"string"!=typeof t.result&&(i._buffer=t.result,i._view=new DataView(i._buffer),i.onloaded&&i.onloaded(i))},t.onprogress=function(t){r({message:"Downloading geometry",percent:Math.floor(t.loaded/t.total*100),type:n.MessageType.PROGRESS,phase:n.LoadingPhase.DOWNLOADING})},t.readAsArrayBuffer(a.response)}if(4==a.readyState&&200!=a.status){var e="Failed to fetch binary data from server. Server code: "+a.status+". This might be due to CORS policy of your browser if you run this as a local file.";throw r({message:"Downloading geometry",percent:0,type:n.MessageType.FAILED,phase:n.LoadingPhase.DOWNLOADING}),i.onerror&&i.onerror(e),e}},a.responseType="blob",null!=e&&Object.keys(e).forEach((function(t){var r=e[t];a.setRequestHeader(t,r)})),a.send()}else if(t instanceof Blob||"undefined"!=typeof File&&t instanceof File){var o=new FileReader;o.onloadend=function(){o.result&&"string"!=typeof o.result&&(i._buffer=o.result,i._view=new DataView(i._buffer),i.onloaded&&i.onloaded(i))},o.onprogress=function(t){r({message:"Loading binary data",percent:Math.floor(t.loaded/t.total*100),type:n.MessageType.PROGRESS,phase:n.LoadingPhase.DOWNLOADING})},o.readAsArrayBuffer(t)}else t instanceof ArrayBuffer&&(this._buffer=t,this._view=new DataView(i._buffer),i.onloaded&&i.onloaded(i))},t.prototype.seek=function(t){if(t<0||t>this._buffer.byteLength)throw"Position out of range.";this._position=t},t.prototype.isEOF=function(){if(null==this._position)throw"Position is not defined";return this._position==this._buffer.byteLength},t.prototype.readArray=function(t,e,r){null==e&&(e=1);var n=t*e,i=this._position;return this._position+=n,this.reportProgress(),1===e?new r(this._buffer.slice(i,i+n))[0]:new r(this._buffer.slice(i,i+n))},t.prototype.move=function(t){var e=this._position;return this._position+=t,this.reportProgress(),e},t.prototype.reportProgress=function(){null!=this._progress&&this._position-this._lastProgress>5e5&&(this._lastProgress=this._position,this._progress({type:n.MessageType.PROGRESS,message:"Reading data",percent:Math.floor(100*this._position/this._buffer.byteLength),phase:n.LoadingPhase.READING}))},t.prototype.readByte=function(){return this.readUint8()},t.prototype.readByteArray=function(t){return this.readUint8Array(t)},t.prototype.readUint8=function(){var t=this.move(1);return this._view.getUint8(t)},t.prototype.readUint8Array=function(t){return this.readArray(1,t,Uint8Array)},t.prototype.readInt16=function(){var t=this.move(2);return this._view.getInt16(t,!0)},t.prototype.readInt16Array=function(t){return this.readArray(2,t,Int16Array)},t.prototype.readUInt16=function(){var t=this.move(2);return this._view.getUint16(t,!0)},t.prototype.readUint16Array=function(t){return this.readArray(2,t,Uint16Array)},t.prototype.readInt32=function(){var t=this.move(4);return this._view.getInt32(t,!0)},t.prototype.readInt32Array=function(t){return this.readArray(4,t,Int32Array)},t.prototype.readUint32=function(){var t=this.move(4);return this._view.getUint32(t,!0)},t.prototype.readUint32Array=function(t){return this.readArray(4,t,Uint32Array)},t.prototype.readFloat32=function(){var t=this.move(4);return this._view.getFloat32(t,!0)},t.prototype.readFloat32Array=function(t){return this.readArray(4,t,Float32Array)},t.prototype.readFloat64=function(){var t=this.move(8);return this._view.getFloat64(t,!0)},t.prototype.readFloat64Array=function(t){return this.readArray(8,t,Float64Array)},t.prototype.readChar=function(t){null==t&&(t=1);var e=this.readByteArray(t),r=new Array(t);for(var n in e)r[n]=String.fromCharCode(e[n]);return 1===t?r[0]:r},t.prototype.readPoint=function(t){null==t&&(t=1);for(var e=this.readFloat32Array(3*t),r=new Array(t),n=0;n<t;n++){var i=3*n*4,a=new Float32Array(e.buffer,i,3);r[n]=a}return 1===t?r[0]:r},t.prototype.readRgba=function(t){null==t&&(t=1);for(var e=this.readByteArray(4*t),r=new Array(t),n=0;n<t;n++){var i=4*n,a=new Uint8Array(e.buffer,i,4);r[n]=a}return 1===t?r[0]:r},t.prototype.readPackedNormal=function(t){null==t&&(t=1);for(var e=this.readUint8Array(2*t),r=new Array(t),n=0;n<t;n++){var i=new Uint8Array(e.buffer,2*n,2);r[n]=i}return 1===t?r[0]:r},t.prototype.readMatrix4x4=function(t){null==t&&(t=1);for(var e=this.readFloat32Array(16*t),r=new Array(t),n=0;n<t;n++){var i=16*n*4,a=new Float32Array(e.buffer,i,16);r[n]=a}return 1===t?r[0]:r},t.prototype.readMatrix4x4_64=function(t){null==t&&(t=1);for(var e=this.readFloat64Array(16*t),r=new Array(t),n=0;n<t;n++){var i=16*n*8,a=new Float64Array(e.buffer,i,16);r[n]=a}return 1===t?r[0]:r},t.prototype.readData=function(t){var e=this.move(t);return this._buffer.slice(e,e+t)},t}();e.BinaryReader=i},3948:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Region=e.ModelGeometry=void 0;var n=r(6105),i=r(3918),a=r(8194),o=r(3425),s=r(6920),u=r(3753),c=function(){function t(){this.normals=new Uint8Array(0),this.indices=new Float32Array(0),this.products=new Float32Array(0),this.transformations=new Float32Array(0),this.styleIndices=new Uint16Array(0),this.states=new Uint8Array(0),this.vertices=new Float32Array(0),this.matrices=new Float32Array(0),this.styles=new Uint8Array(0),this.meter=1e3,this.wcs=[0,0,0],this._iVertex=0,this._iIndexForward=0,this._iIndexBackward=0,this._iTransform=0,this._iMatrix=0,this._maxVersionSupported=4,this.productMaps={},this.productIdLookup=[],this.breaks={10:[],20:[],40:[],30:[],50:[],60:[],70:[],80:[],90:[],100:[]},this._styleMap=new h}return t.prototype.parse=function(t,e){var r=this;if(t&&!t.isEOF()){this._reader=t;var n=t;if(94132117!==n.readInt32())throw new Error("Magic number mismatch. This is not a wexBIM file.");var c=n.readByte();if(c>this._maxVersionSupported)throw new Error("Viewer doesn't support version ".concat(c," of the wexBIM stream"));var h=n.readInt32(),f=n.readInt32(),d=n.readInt32(),A=n.readInt32(),p=n.readInt32(),v=n.readInt32();this.meter=n.readFloat32(),c>3&&(this.wcs=[n.readFloat64(),n.readFloat64(),n.readFloat64()]);var I=n.readInt16();this.vertices=new Float32Array(this.square(4,3*f)),this.normals=new Uint8Array(6*d),this.indices=new Float32Array(3*d),this.styleIndices=new Uint16Array(3*d),this.styles=new Uint8Array(this.square(1,4*(v+2))),this.products=new Float32Array(3*d),this.states=new Uint8Array(3*d*2),this.transformations=new Float32Array(3*d),this.matrices=new Float32Array(this.square(4,16*A)),this.productMaps={},this.regions=new Array(I),this._iVertex=0,this._iIndexForward=0,this._iIndexBackward=3*d,this._iTransform=0,this._iMatrix=0;for(var m=0;m<I;m++)(P=new l).population=n.readInt32(),P.centre=n.readFloat32Array(3),P.bbox=n.readFloat32Array(6),this.regions[m]=P;for(var g=0;g<v;g++){var E=n.readInt32(),T=255*n.readFloat32(),C=255*n.readFloat32(),R=255*n.readFloat32(),b=255*n.readFloat32();this.styles.set([T,C,R,b],4*g),this._styleMap.Add({id:E,index:g,transparent:b<254})}for(this.styles.set([255,255,255,255],4*g),this._styleMap.Add({id:-1,index:g,transparent:!1}),g++,this.styles.set([0,255,255,100],4*g),this._styleMap.Add({id:-2,index:g,transparent:!1}),m=0;m<p;m++){var M=n.readInt32(),y=n.readInt16(),F=n.readFloat32Array(6),O=new u.ProductMap;O.productID=M,O.renderId=m+1,O.type=y,O.bBox=F,O.spans=[],this.productMaps[M]=O,this.productIdLookup[m+1]=M,y!==o.ProductType.IFCSPACE&&y!==o.ProductType.IFCOPENINGELEMENT||O.states.push(a.State.HIDDEN)}if(c>=3)for(var _=0;_<I;_++){for(var P=this.regions[_],N=n.readInt32(),S=new Array(N),L=0;L<N;L++){var x=this.readShape(c),B=n.readInt32();if(0!==B){var w=n.getSubReader(B);if((G=new i.TriangulatedShape).parse(w),!w.isEOF())throw new Error("Incomplete reading of geometry for shape instance ".concat(x[0].iLabel));S[L]={shapes:x,geometry:G}}}for(e.orderGeometryBySize&&S.sort((function(t,e){var n,i,a=null===(n=t.shapes[0])||void 0===n?void 0:n.pLabel,o=null===(i=e.shapes[0])||void 0===i?void 0:i.pLabel;if(null==a||null==o)return 0;var s=r.productMaps[a],u=r.productMaps[o];if(null==s)return 1;if(null==u)return-1;var c=s.bBox[3]*s.bBox[4]*s.bBox[5];return u.bBox[3]*s.bBox[4]*s.bBox[5]-c})),L=0;L<N;L++){var U=S[L];this.feedDataArrays(U.shapes,U.geometry)}}else for(var D=0;D<h;D++){var G;x=this.readShape(c),(G=new i.TriangulatedShape).parse(n),this.feedDataArrays(x,G)}if(!n.isEOF())throw this.progress({type:s.MessageType.FAILED,message:"Processed data",percent:0,phase:s.LoadingPhase.READING}),new Error("Binary reader is not at the end of the file.");this.progress({type:s.MessageType.PROGRESS,message:"Processed data",percent:100,phase:s.LoadingPhase.READING}),this.transparentIndex=this._iIndexForward,this.breaks[100]=[this.transparentIndex-1,this.transparentIndex]}},t.prototype.square=function(t,e){if(null==t||null==e)throw new Error('Wrong arguments for "square" function.');if(0===e)return 0;for(var r=e*t,n=Math.ceil(Math.sqrt(r/4));4*n%t!=0;)n++;return n*n*4/t},t.prototype.feedDataArrays=function(t,e){var r=this;t.forEach((function(t){var n=0,i=n=t.transparent?r._iIndexBackward-e.indices.length:r._iIndexForward,s=r.productMaps[t.pLabel];void 0===s&&((s=new u.ProductMap).productID=0,s.renderId=0,s.type=o.ProductType.IFCOPENINGELEMENT,s.bBox=new Float32Array(6),s.spans=[],s.states.push(a.State.HIDDEN),r.productMaps[t.pLabel]=s),r.normals.set(e.normals,2*n);var c=s.type===o.ProductType.IFCSPACE||s.type===o.ProductType.IFCOPENINGELEMENT?a.State.HIDDEN:255;e.indices.forEach((function(e){r.indices[n]=e+r._iVertex/3,r.products[n]=s.renderId,r.styleIndices[n]=t.style,r.transformations[n]=t.transform,r.states[2*n]=c,r.states[2*n+1]=255,n++}));var l=n;s.spans.push(new Int32Array([i,l])),t.transparent?r._iIndexBackward-=e.indices.length:r._iIndexForward+=e.indices.length;var h=(r._iIndexForward+r.indices.length-r._iIndexBackward)/r.indices.length*100;Object.getOwnPropertyNames(r.breaks).forEach((function(t){var e=+t;0===r.breaks[e].length&&h>e&&(r.breaks[e]=[r._iIndexForward,r._iIndexBackward])}))}),this),this.vertices.set(e.vertices,this._iVertex),this._iVertex+=e.vertices.length},t.prototype.readShape=function(t){for(var e=this._reader,r=e.readInt32(),n=new Array,i=0;i<r;i++){var a=e.readInt32(),s=(e.readInt16(),e.readInt32()),u=e.readInt32(),c=null;r>1&&(c=1===t?e.readFloat32Array(16):e.readFloat64Array(16),this.matrices.set(c,this._iMatrix),this._iMatrix+=16);var l=this._styleMap.GetStyle(u);null===l&&(l=this._styleMap.GetStyle(-1));var h=this.productMaps[a]?this.productMaps[a].type:o.ProductType.IFCPRODUCT;h!==o.ProductType.IFCSPACE&&h!==o.ProductType.IFCOPENINGELEMENT||(l=this._styleMap.GetStyle(-2)),n.push({pLabel:a,iLabel:s,style:l.index,transparent:l.transparent,transform:null!=c?this._iTransform++:-1})}return n},t.prototype.load=function(t,e,r,i){var a=this;void 0===i&&(i={}),this.progress=r||function(t){};var o=new n.BinaryReader,s=this;o.onloaded=function(){s.parse(o,i),s.onloaded&&s.onloaded(a)},o.onerror=function(t){s.onerror&&s.onerror(t)},o.load(t,e,r)},t}();e.ModelGeometry=c;var l=function(){function t(t){this.population=-1,this.centre=null,this.bbox=null,t&&(this.population=t.population,t.centre&&(this.centre=new Float32Array(t.centre)),t.bbox&&(this.bbox=new Float32Array(t.bbox)))}return t.clone=function(e){var r=new t;return r.population=e.population,e.centre&&(r.centre=new Float32Array(e.centre)),e.bbox&&(r.bbox=new Float32Array(e.bbox)),r},t.prototype.merge=function(e){if(-1===this.population&&null===this.centre&&null===this.bbox)return new t(e);var r=new t;if(r.population=this.population+e.population,this.bbox&&e.bbox){var n=Math.min(this.bbox[0],e.bbox[0]),i=Math.min(this.bbox[1],e.bbox[1]),a=Math.min(this.bbox[2],e.bbox[2]),o=Math.max(this.bbox[0]+this.bbox[3],e.bbox[0]+e.bbox[3]),s=Math.max(this.bbox[1]+this.bbox[4],e.bbox[1]+e.bbox[4]),u=Math.max(this.bbox[2]+this.bbox[5],e.bbox[2]+e.bbox[5]),c=o-n,l=s-i,h=u-a,f=(n+o)/2,d=(i+s)/2,A=(a+u)/2;r.bbox=new Float32Array([n,i,a,c,l,h]),r.centre=new Float32Array([f,d,A])}else this.bbox?(r.bbox=new Float32Array(this.bbox),r.centre=new Float32Array(this.centre)):(r.bbox=new Float32Array(e.bbox),r.centre=new Float32Array(e.centre));return r},t}();e.Region=l;var h=function(){function t(){this._internal={}}return t.prototype.Add=function(t){this._internal[t.id]=t},t.prototype.GetStyle=function(t){return this._internal[t]||null},t}()},3918:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TriangulatedShape=void 0;var n=r(6105),i=function(){function t(){var t=this;this.load=function(e){var r=new n.BinaryReader,i=t;r.onloaded=function(){i.parse(r),i.onloaded&&i.onloaded(t)},r.load(e,null,null)}}return t.prototype.parse=function(t){var e=this,r=(t.readByte(),t.readInt32()),n=t.readInt32();e.vertices=t.readFloat32Array(3*r),e.indices=new Uint32Array(3*n),e.normals=new Uint8Array(6*n);var i,a=0;i=r<=255?function(e){return t.readByteArray(e)}:r<=65535?function(e){return t.readUint16Array(e)}:function(e){return t.readInt32Array(e)};var o=t.readInt32();if(0!==r&&0!==n)for(var s=0;s<o;s++){var u=t.readInt32();if(0!=u){var c=u>0;if(u=Math.abs(u),c){var l=t.readByteArray(2),h=i(3*u);e.indices.set(h,a);for(var f=0;f<3*u;f++)e.normals[2*a]=l[0],e.normals[2*a+1]=l[1],a++}else for(f=0;f<u;f++)e.indices[a]=i(),e.normals.set(t.readByteArray(2),2*a),a++,e.indices[a]=i(),e.normals.set(t.readByteArray(2),2*a),a++,e.indices[a]=i(),e.normals.set(t.readByteArray(2),2*a),a++}}},t}();e.TriangulatedShape=i},2607:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SectionBox=void 0;var n=r(887),i=r(1150),a=function(){function t(t){var e=this;this.setToInfinity(),this._onChange=function(){e._lastWcs=null,e._lastBBox=null,t&&t()}}return Object.defineProperty(t.prototype,"location",{get:function(){return this._location},set:function(t){this._location=t,this._onChange()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotationX",{get:function(){return this._rotationX},set:function(t){this._rotationX=t,this._onChange()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotationY",{get:function(){return this._rotationY},set:function(t){this._rotationY=t,this._onChange()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotationZ",{get:function(){return this._rotationZ},set:function(t){this._rotationZ=t,this._onChange()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lengthX",{get:function(){return this._lengthX},set:function(t){this._lengthX=t,this._onChange()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lengthY",{get:function(){return this._lengthY},set:function(t){this._lengthY=t,this._onChange()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lengthZ",{get:function(){return this._lengthZ},set:function(t){this._lengthZ=t,this._onChange()},enumerable:!1,configurable:!0}),t.prototype.getMatrix=function(t){var e=n.mat4.create();e=n.mat4.rotateX(n.mat4.create(),e,-this.rotationX/180*Math.PI),e=n.mat4.rotateY(n.mat4.create(),e,-this.rotationY/180*Math.PI),e=n.mat4.rotateZ(n.mat4.create(),e,-this.rotationZ/180*Math.PI);var r=n.vec3.subtract(n.vec3.create(),this.location,t),i=n.vec3.scale(n.vec3.create(),r,-1);e=n.mat4.translate(n.mat4.create(),e,i);var a=n.mat4.ortho(n.mat4.create(),-this.lengthX/2,this.lengthX/2,-this.lengthY/2,this.lengthY/2,-this.lengthZ/2,this.lengthZ/2);return n.mat4.multiply(n.mat4.create(),a,e)},Object.defineProperty(t.prototype,"isSet",{get:function(){return Number.isFinite(this._lengthX)},enumerable:!1,configurable:!0}),t.prototype.clear=function(){this.setToInfinity()},t.prototype.setToInfinity=function(){this._location=n.vec3.fromValues(0,0,0),this._rotationX=this._rotationY=this._rotationZ=0,this._lengthX=this._lengthY=this._lengthZ=Number.MAX_SAFE_INTEGER,this._onChange&&this._onChange()},t.prototype.setToBox=function(t){this._location=n.vec3.clone(t.location),this._lengthX=t._lengthX,this._lengthY=t._lengthY,this._lengthZ=t._lengthZ,this._rotationX=t._rotationX,this._rotationY=t._rotationY,this._rotationZ=t._rotationZ,this._onChange&&this._onChange()},t.prototype.setToBoundingBox=function(t){this._location=n.vec3.fromValues(t[0]+t[3]/2,t[1]+t[4]/2,t[2]+t[5]/2),this._lengthX=t[3],this._lengthY=t[4],this._lengthZ=t[5],this._rotationX=0,this._rotationY=0,this._rotationZ=0,this._onChange&&this._onChange()},t.prototype.setToPlanes=function(t){if(null==t||6!==t.length)throw new Error("Invalid input: box has to be defined by 3 clipping planes");for(var e=[],r=[],a=0;a<6;a++)for(var o=t[a],s=a+1;s<6;s++){var u=t[s];if(this.areOrthogonal(o,u))for(var c=s+1;c<6;c++){var l=t[c];if(this.areOrthogonal(o,l)&&this.areOrthogonal(u,l)){var h=o.direction,f=u.direction,d=l.direction,A=o.location,p=u.location,v=l.location,I=this.getDparam(h,A),m=this.getDparam(f,p),g=this.getDparam(d,v),E=n.vec3.fromValues(-I,-m,-g),T=n.mat3.fromValues(h[0],f[0],d[0],h[1],f[1],d[1],h[2],f[2],d[2]),C=n.mat3.determinant(T);if(Math.abs(C)<1e-6)console.warn("Singular system of linear equations. Intersection point for section box can't be computed");else{var R=n.mat3.invert(n.mat3.create(),T),b=n.vec3.transformMat3(n.vec3.create(),E,R);r.push(b),this.addPointToResults(e,o,b),this.addPointToResults(e,u,b),this.addPointToResults(e,l,b)}}}}if(8!==r.length)return console.warn("Section box based on clipping planes should have exactly 8 intersection points"),!1;var M=this.getCentroid(r),y=this.getSize(e[0].plane,t),F=this.getSize(e[1].plane,t),O=this.getSize(e[2].plane,t);if(null==y||null==F||null==O)return console.warn("Section box based on clipping planes should have always two planes pointing to opposite direction"),!1;var _=n.vec3.normalize(n.vec3.create(),i.VectorUtils.getVec3(e[0].plane.direction)),P=n.vec3.normalize(n.vec3.create(),i.VectorUtils.getVec3(e[1].plane.direction)),N=n.vec3.normalize(n.vec3.create(),i.VectorUtils.getVec3(e[2].plane.direction)),S=n.quat.setAxes(n.quat.create(),n.vec3.negate(n.vec3.create(),N),_,P),L=this.toEulerAngles(S);return this._location=M,this._lengthX=y,this._lengthY=F,this._lengthZ=O,this._rotationX=180*L.roll/Math.PI,this._rotationY=180*L.pitch/Math.PI,this._rotationZ=180*-L.yaw/Math.PI,this._onChange&&this._onChange(),!0},t.prototype.getSize=function(t,e){var r=this,a=e.filter((function(e){return r.isOpposite(i.VectorUtils.getVec3(t.direction),i.VectorUtils.getVec3(e.direction))})).pop();if(null==a)return null;var o=a.direction[0],s=a.direction[1],u=a.direction[2],c=this.getDparam(a.direction,a.location),l=t.location[0],h=t.location[1],f=t.location[2];return Math.abs(o*l+s*h+u*f+c)/n.vec3.length(i.VectorUtils.getVec3(a.direction))},t.prototype.toEulerAngles=function(t){var e=t[0],r=t[1],n=t[2],i=t[3],a=2*(i*e+r*n),o=1-2*(e*e+r*r),s=2*(i*r-n*e),u=2*(i*n+e*r),c=1-2*(r*r+n*n);return{roll:Math.atan2(a,o),pitch:Math.abs(s)>=1?Math.PI/2*Math.sign(s):Math.asin(s),yaw:Math.atan2(u,c)}},t.prototype.isOpposite=function(t,e){var r=n.vec3.angle(t,e);return Math.abs(r-Math.PI)<.01},t.prototype.getCentroid=function(t){var e=t.reduce((function(t,e){return n.vec3.add(n.vec3.create(),t,e)}));return n.vec3.scale(n.vec3.create(),e,1/t.length)},t.prototype.addPointToResults=function(t,e,r){var n=t.filter((function(t){return t.plane===e})).pop();null==n&&(n={plane:e,points:[]},t.push(n)),n.points.push(r)},t.prototype.getDparam=function(t,e){return-t[0]*e[0]-t[1]*e[1]-t[2]*e[2]},t.prototype.areOrthogonal=function(t,e){var r=n.vec3.angle(i.VectorUtils.getVec3(t.direction),i.VectorUtils.getVec3(e.direction));return Math.abs(r-Math.PI/2)<.01},t.prototype.getBoundingBox=function(t){if(this._lastBBox&&this._lastWcs&&n.vec3.distance(this._lastWcs,t)<1e-6)return this._lastBBox;var e=this.lengthX/2,r=this.lengthY/2,a=this.lengthZ/2,o=[[-e,-r,-a],[-e,-r,+a],[-e,+r,-a],[-e,+r,+a],[+e,-r,-a],[+e,-r,+a],[+e,+r,-a],[+e,+r,+a]],s=n.vec3.subtract(n.vec3.create(),this.location,t),u=n.mat4.create();u=n.mat4.rotateX(n.mat4.create(),u,this.rotationX*Math.PI/180),u=n.mat4.rotateY(n.mat4.create(),u,this.rotationY*Math.PI/180),u=n.mat4.rotateZ(n.mat4.create(),u,this.rotationZ*Math.PI/180),u=n.mat4.translate(n.mat4.create(),u,s);var c=o.map((function(t){return n.vec3.transformMat4(n.vec3.create(),i.VectorUtils.getVec3(t),u)})),l=c.reduce((function(t,e){return n.vec3.fromValues(Math.min(t[0],e[0]),Math.min(t[1],e[1]),Math.min(t[2],e[2]))})),h=c.reduce((function(t,e){return n.vec3.fromValues(Math.max(t[0],e[0]),Math.max(t[1],e[1]),Math.max(t[2],e[2]))}));return this._lastWcs=t,this._lastBBox=new Float32Array([l[0],l[1],l[2],h[0]-l[0],h[1]-l[1],h[2]-l[2]]),this._lastBBox},t}();e.SectionBox=a},1205:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.DepthReader=void 0;var n=r(2411),i=r(1615),a=r(9499),o=function(){function t(t,e){this.gl=t,this.glVersion=e,this.vertices=new Float32Array([0,0,0,1,1,0,1,0,0,1,1,1]);var r=function(e,r){if(t.shaderSource(e,r),t.compileShader(e),!t.getShaderParameter(e,t.COMPILE_STATUS)){var n=t.getShaderInfoLog(e);return console.error(n),!1}return!0};if(this.fragmentShader=t.createShader(t.FRAGMENT_SHADER),!r(this.fragmentShader,n.depth_fragment_shader))throw new Error("Failed to compile depth reading fragment shader");if(this.vertexShader=t.createShader(t.VERTEX_SHADER),!r(this.vertexShader,i.depth_vertex_shader))throw new Error("Failed to compile depth reading vertex shader");this.program=t.createProgram(),t.attachShader(this.program,this.vertexShader),t.attachShader(this.program,this.fragmentShader),t.linkProgram(this.program),t.getProgramParameter(this.program,t.LINK_STATUS)?(t.useProgram(this.program),this.texUniform=t.getUniformLocation(this.program,"texture"),this.vertAttrs=t.getAttribLocation(this.program,"point"),this.vertBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.vertBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertices,t.STATIC_DRAW)):console.error("Could not initialise shaders ")}return t.prototype.draw=function(t){var e=this.gl;e.useProgram(this.program),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,t),e.uniform1i(this.texUniform,0),e.bindBuffer(e.ARRAY_BUFFER,this.vertBuffer),e.enableVertexAttribArray(this.vertAttrs),e.vertexAttribPointer(this.vertAttrs,2,e.FLOAT,!1,0,0),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),e.drawArrays(e.TRIANGLES,0,6)},t.prototype.getDepths=function(t,e,r,n){var i=this.gl;i.useProgram(this.program);var o=new a.Framebuffer(i,r,n,!1,this.glVersion);i.viewport(0,0,r,n),this.draw(e);var s=t.map((function(t){return o.getPixel(t.x,t.y)[0]}));return o.delete(),s},t.prototype.getDepth=function(t,e,r,n,i){return this.getDepths([{x:t,y:e}],r,n,i)[0]},t.prototype.delete=function(){var t=this.gl;t.deleteBuffer(this.vertBuffer),t.deleteShader(this.fragmentShader),t.deleteShader(this.vertexShader),t.deleteProgram(this.program)},t}();e.DepthReader=o},2411:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.depth_fragment_shader=void 0,e.depth_fragment_shader=" precision mediump float;\n \n varying vec2 position;\n \n uniform sampler2D texture;\n \n void main() {\n \n float depth = texture2D(texture, position).x; \n\n \n gl_FragColor = vec4(depth, depth, depth, 1.0);\n }"},1615:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.depth_vertex_shader=void 0,e.depth_vertex_shader="attribute highp vec2 point;\n\nvarying vec2 position;\n\nvoid main(void) {\n float x = (point.x * 2.0) - 1.0;\n float y = (point.y * 2.0) - 1.0;\n gl_Position = vec4(x, y, 0.0, 1.0);\n position = point;\n}"},380:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.fragment_shader=void 0,e.fragment_shader="precision highp float;\n\nuniform vec4 uClippingPlaneA;\nuniform vec4 uClippingPlaneB;\nuniform bool uClippingA;\nuniform bool uClippingB;\n\n\nuniform vec3 uGBC;\n\n\nuniform vec3 uLight;\n\n\nuniform mat4 uSectionBox;\n\nvarying vec4 vColor;\n\nvarying vec3 vPosition;\n\nvarying vec3 vNormal;\n\n\nvarying float vDiscard;\n\nvoid main(void) {\n \n if ( vDiscard > 0.5) discard;\n \n \n vec4 fp = uSectionBox * vec4(vPosition, 1);\n if (\n fp.x > 1.0 || fp.x < -1.0 || \n fp.y > 1.0 || fp.y < -1.0 || \n fp.z > 1.0 || fp.z < -1.0) \n discard;\n\n \n if (uClippingA)\n {\n \n vec4 p = uClippingPlaneA;\n vec3 x = vPosition;\n float distance = (dot(p.xyz, x) + p.w) / length(p.xyz);\n if (distance < 0.0){\n discard;\n return;\n }\n }\n\n \n if (uClippingB)\n {\n \n vec4 p = uClippingPlaneB;\n vec3 x = vPosition;\n float distance = (dot(p.xyz, x) + p.w) / length(p.xyz);\n if (distance < 0.0) {\n discard;\n return;\n }\n }\n \n \n if (length(vNormal) < 0.1) {\n gl_FragColor = vColor;\n return;\n }\n\n \n vec3 normalInterp = gl_FrontFacing ? vNormal : -vNormal;\n\n \n float Ka = 1.0; \n float Kd = 1.0; \n float Ks = 0.2; \n float shininessVal = 30.0; \n\n vec3 ambientColor = vColor.rgb * 0.2; \n vec3 diffuseColor = vColor.rgb;\n vec3 specularColor = vec3(1.0, 1.0, 1.0);\n\n vec3 N = normalize(normalInterp);\n vec3 L = normalize(uLight - vPosition);\n\n \n float lambertian = max(dot(N, L), 0.0);\n\n float specular = 0.0;\n\n if(lambertian > 0.0) {\n vec3 R = reflect(-L, N); \n \n vec3 V = L; \n\n \n float specAngle = max(dot(R, V), 0.0);\n specular = pow(specAngle, shininessVal);\n }\n\n vec4 fragColor = vec4(\n Ka * ambientColor +\n Kd * lambertian * diffuseColor +\n Ks * specular * specularColor\n , vColor.a\n );\n\n \n \n fragColor.r = (pow(fragColor.r,uGBC[0]) - 0.5)*uGBC[1] + uGBC[2] + 0.5;\n fragColor.g = (pow(fragColor.g,uGBC[0]) - 0.5)*uGBC[1] + uGBC[2] + 0.5;\n fragColor.b = (pow(fragColor.b,uGBC[0]) - 0.5)*uGBC[1] + uGBC[2] + 0.5;\n\n gl_FragColor = fragColor;\n}"},6907:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.fragment_shader_300=void 0,e.fragment_shader_300="#version 300 es\n\n\nprecision highp float;\n\nuniform vec4 uClippingPlaneA;\nuniform vec4 uClippingPlaneB;\nuniform bool uClippingA;\nuniform bool uClippingB;\n\nuniform vec3 uGBC;\n\n\nuniform vec3 uLight;\n\n\nuniform mat4 uSectionBox;\n\nin vec4 vColor;\n\nin vec3 vPosition;\n\nin vec3 vNormal;\n\n\nin float vDiscard;\n\n\nout vec4 vFragColor;\n\nvoid main(void) {\n \n if ( vDiscard > 0.5) discard;\n \n \n vec4 fp = uSectionBox * vec4(vPosition, 1);\n if (\n fp.x > 1.0 || fp.x < -1.0 || \n fp.y > 1.0 || fp.y < -1.0 || \n fp.z > 1.0 || fp.z < -1.0) \n discard;\n\n \n if (uClippingA)\n {\n \n vec4 p = uClippingPlaneA;\n vec3 x = vPosition;\n float distance = (dot(p.xyz, x) + p.w) / length(p.xyz);\n if (distance < 0.0){\n discard;\n return;\n }\n }\n\n \n if (uClippingB)\n {\n \n vec4 p = uClippingPlaneB;\n vec3 x = vPosition;\n float distance = (dot(p.xyz, x) + p.w) / length(p.xyz);\n if (distance < 0.0) {\n discard;\n return;\n }\n\n }\n\n \n if (length(vNormal) < 0.1) {\n vFragColor = vColor;\n return;\n }\n\n \n vec3 normalInterp = gl_FrontFacing ? vNormal : -vNormal;\n\n \n float Ka = 0.8; \n float Kd = 1.0; \n float Ks = 0.15; \n float shininessVal = 30.0; \n\n vec3 ambientColor = vColor.rgb * 0.5; \n vec3 diffuseColor = vColor.rgb;\n vec3 specularColor = vec3(1.0, 1.0, 1.0);\n\n vec3 N = normalize(normalInterp);\n vec3 L = normalize(uLight - vPosition);\n\n \n \n float lambertian = max(dot(N, L), 0.0);\n\n \n float specular = 0.0;\n\n \n if (lambertian > 0.0) {\n vec3 R = reflect(-L, N); \n vec3 V = L; \n\n \n float specAngle = max(dot(R, V), 0.0);\n specular = pow(specAngle, shininessVal);\n }\n\nvec4 fragColor = vec4(\n Ka * ambientColor +\n Kd * lambertian * diffuseColor +\n Ks * specular * specularColor\n , vColor.a\n );\n\n \n \n fragColor.r = (pow(fragColor.r,uGBC[0]) - 0.5)*uGBC[1] + uGBC[2] + 0.5;\n fragColor.g = (pow(fragColor.g,uGBC[0]) - 0.5)*uGBC[1] + uGBC[2] + 0.5;\n fragColor.b = (pow(fragColor.b,uGBC[0]) - 0.5)*uGBC[1] + uGBC[2] + 0.5;\n\n vFragColor = fragColor;\n}"},2241:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.vertex_shader=void 0,e.vertex_shader="attribute highp float aVertexIndex;\nattribute highp float aTransformationIndex;\nattribute highp float aStyleIndex;\nattribute highp float aProduct;\nattribute highp vec2 aState;\nattribute highp vec2 aNormal;\n\n\nuniform mat4 uMVMatrix;\nuniform mat4 uPMatrix;\n\n\nuniform vec4 uHighlightColour;\n\n\nuniform vec4 uHoverPickColour;\n\n\nuniform vec4 uXRayColour;\n\n\nuniform float uMeter;\n\n\nuniform vec3 uWcs;\n\n\n\nuniform int uColorCoding;\n\n\n\n\n\n\nuniform int uRenderingMode;\n\n\nuniform highp sampler2D uVertexSampler;\nuniform highp float uVertexTextureSize;\n\n\nuniform highp sampler2D uMatrixSampler;\nuniform highp float uMatrixTextureSize;\n\n\nuniform highp sampler2D uStyleSampler;\nuniform highp float uStyleTextureSize;\n\n\nuniform highp sampler2D uStateStyleSampler;\n\n\nvarying vec4 vColor;\n\nvarying vec3 vPosition;\n\nvarying vec3 vNormal;\n\nvarying mediump float vDiscard;\n\nconst float PI = 3.1415926535897932384626433832795;\n\nvec3 getNormal(mat4 transform) {\n float U = aNormal[0];\n float V = aNormal[1];\n float lon = U / 252.0 * 2.0 * PI;\n float lat = V / 252.0 * PI;\n\n float x = sin(lon) * sin(lat);\n float z = cos(lon) * sin(lat);\n float y = cos(lat);\n\n vec3 normal = vec3(x, y, z);\n if (aTransformationIndex < -0.5) {\n return normalize(normal);\n }\n\n \n \n \n \n mat3 normTrans = mat3(transform);\n\n return normalize(vec3(normTrans * normal));\n}\n\nvec4 getIdColor(float id) {\n float B = floor(id / (256.0*256.0));\n float G = floor((id - B * 256.0*256.0) / 256.0);\n float R = mod(id, 256.0);\n \n \n\n return vec4(R / 255.0, G / 255.0, B / 255.0, 1.0);\n}\n\nvec2 getTextureCoordinates(float index, float size)\n{\n float x = floor(mod(index + 0.5, size)); \n float y = floor((index + 0.5)/ size); \n \n return vec2((x + 0.5) / size, (y + 0.5) / size);\n}\n\n\nvec4 getColor() { \n \n float restyle = aState[1];\n if (restyle > 224.5) {\n vec2 coords = getTextureCoordinates(aStyleIndex, uStyleTextureSize);\n vec4 col = texture2D(uStyleSampler, coords);\n \n \n if (uRenderingMode == 1) {\n float intensity = (col.r + col.g + col.b) / 3.0;\n return vec4(intensity, intensity, intensity, col.a);\n }\n\n \n return col;\n }\n\n \n \n vec2 coords = getTextureCoordinates(restyle, 15.0);\n vec4 col2 = texture2D(uStateStyleSampler, coords);\n\n \n if (uRenderingMode == 1) {\n float intensity = (col2.r + col2.g + col2.b) / 3.0;\n return vec4(intensity, intensity, intensity, col2.a);\n }\n\n return col2;\n}\n\nvec4 getVertexPosition(mat4 transform) {\n vec2 coords = getTextureCoordinates(aVertexIndex, uVertexTextureSize);\n vec3 point = vec3(texture2D(uVertexSampler, coords));\n\n if (aTransformationIndex < -0.5) {\n return vec4(point, 1.0);\n }\n\n return transform * vec4(point, 1.0);\n}\n\nmat4 getTransform() {\n if (aTransformationIndex < -0.5) {\n return mat4(1.0);\n }\n\n float tIndex = aTransformationIndex * 4.0;\n\n \n vec2 c1 = getTextureCoordinates(tIndex, uMatrixTextureSize);\n vec2 c2 = getTextureCoordinates(tIndex + 1.0, uMatrixTextureSize);\n vec2 c3 = getTextureCoordinates(tIndex + 2.0, uMatrixTextureSize);\n vec2 c4 = getTextureCoordinates(tIndex + 3.0, uMatrixTextureSize);\n\n \n vec4 v1 = texture2D(uMatrixSampler, c1);\n vec4 v2 = texture2D(uMatrixSampler, c2);\n vec4 v3 = texture2D(uMatrixSampler, c3);\n vec4 v4 = texture2D(uMatrixSampler, c4);\n\n \n return mat4(v1, v2, v3, v4);\n}\n\nvoid main(void) {\n int state = int(floor(aState[0] + 0.5));\n vDiscard = 0.0;\n\n if (state == 254 || \n (uColorCoding == -1 && state == 251) || \n (uColorCoding == -1 && (\n (uRenderingMode == 2 && state != 253 && state != 252 && state != 250) || \n (uRenderingMode == 3 && (state == 253 || state == 252 || state == 250))) \n ))\n {\n vDiscard = 1.0;\n vColor = vec4(0.0, 0.0, 0.0, 0.0);\n vNormal = vec3(0.0, 0.0, 0.0);\n vPosition = vec3(0.0, 0.0, 0.0);\n gl_Position = vec4(0.0, 0.0, 0.0, 1.0);\n return;\n }\n\n \n mat4 transform = getTransform();\n \n vPosition = vec3(getVertexPosition(transform)) + uWcs;\n vNormal = getNormal(transform);\n\n \n vec4 baseColor = getColor();\n\n \n if (baseColor.a < 0.98)\n {\n float correction = -0.002;\n if (uColorCoding == -2 || uColorCoding >= 0) {\n correction = -0.02;\n }\n vec3 trans = correction * uMeter * normalize(vNormal);\n vPosition = vPosition + trans;\n }\n\n \n if (uColorCoding == -2) {\n \n if ((uRenderingMode == 2 || uRenderingMode == 4) && state != 252 && state != 253)\n {\n vDiscard = 1.0;\n vColor = vec4(0.0, 0.0, 0.0, 0.0);\n vNormal = vec3(0.0, 0.0, 0.0); \n } \n else\n {\n float id = floor(aProduct + 0.5);\n vColor = getIdColor(id);\n vNormal = vec3(0.0, 0.0, 0.0);\n }\n }\n \n else if (uColorCoding >= 0) {\n \n if ((uRenderingMode == 2 || uRenderingMode == 4) && state != 252 && state != 253)\n {\n vDiscard = 1.0;\n vColor = vec4(0.0, 0.0, 0.0, 0.0);\n vNormal = vec3(0.0, 0.0, 0.0); \n } \n else\n {\n float id = float(uColorCoding);\n vColor = getIdColor(id);\n vNormal = vec3(0.0, 0.0, 0.0);\n }\n }\n \n else {\n \n \n \n if (state == 250) {\n baseColor = uHoverPickColour;\n }\n else if (state == 253) {\n baseColor = uHighlightColour;\n }\n \n else if (uRenderingMode == 2 || uRenderingMode == 3) {\n \n if (state == 252) { \n baseColor = getColor();\n }\n \n else {\n baseColor = vec4(0.0, 0.0, 0.3, 0.5); \n }\n }\n\n \n vColor = baseColor;\n }\n\n \n gl_Position = uPMatrix * uMVMatrix * vec4(vPosition, 1.0);\n}"},5761:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.vertex_shader_300=void 0,e.vertex_shader_300="#version 300 es\nin highp float aVertexIndex;\nin highp float aTransformationIndex;\nin highp float aStyleIndex;\nin highp float aProduct;\nin highp vec2 aState;\nin highp vec2 aNormal;\n\n\nuniform mat4 uMVMatrix;\nuniform mat4 uPMatrix;\n\n\nuniform vec4 uHighlightColour;\n\n\nuniform vec4 uHoverPickColour;\n\n\nuniform vec4 uXRayColour;\n\n\nuniform float uMeter;\n\n\nuniform vec3 uWcs;\n\n\n\nuniform int uColorCoding;\n\n\n\n\n\n\nuniform int uRenderingMode;\n\n\nuniform highp sampler2D uVertexSampler;\nuniform highp float uVertexTextureSize;\n\n\nuniform highp sampler2D uMatrixSampler;\nuniform highp float uMatrixTextureSize;\n\n\nuniform highp sampler2D uStyleSampler;\nuniform highp float uStyleTextureSize;\n\n\nuniform highp sampler2D uStateStyleSampler;\n\n\nout vec4 vColor;\n\nout vec3 vPosition;\n\nout vec3 vNormal;\n\nout mediump float vDiscard;\n\nconst float PI = 3.1415926535897932384626433832795;\n\nvec3 getNormal(mat4 transform) {\n float U = aNormal[0];\n float V = aNormal[1];\n float lon = U / 252.0 * 2.0 * PI;\n float lat = V / 252.0 * PI;\n\n float x = sin(lon) * sin(lat);\n float z = cos(lon) * sin(lat);\n float y = cos(lat);\n\n vec3 normal = vec3(x, y, z);\n if (aTransformationIndex < -0.5) {\n return normalize(normal);\n }\n\n \n \n \n \n mat3 normTrans = mat3(transform);\n\n return normalize(vec3(normTrans * normal));\n}\n\nvec4 getIdColor(float id) {\n float B = floor(id / (256.0*256.0));\n float G = floor((id - B * 256.0*256.0) / 256.0);\n float R = mod(id, 256.0);\n \n \n\n return vec4(R / 255.0, G / 255.0, B / 255.0, 1.0);\n}\n\nvec2 getTextureCoordinates(float index, float size)\n{\n float x = floor(mod(index + 0.5, size)); \n float y = floor((index + 0.5)/ size); \n \n return vec2((x + 0.5) / size, (y + 0.5) / size);\n}\n\n\nvec4 getColor() { \n \n float restyle = aState[1];\n if (restyle > 224.5) {\n vec2 coords = getTextureCoordinates(aStyleIndex, uStyleTextureSize);\n vec4 col = texture(uStyleSampler, coords);\n \n \n if (uRenderingMode == 1) {\n float intensity = (col.r + col.g + col.b) / 3.0;\n return vec4(intensity, intensity, intensity, col.a);\n }\n\n \n return col;\n }\n\n \n \n vec2 coords = getTextureCoordinates(restyle, 15.0);\n vec4 col2 = texture(uStateStyleSampler, coords);\n\n \n if (uRenderingMode == 1) {\n float intensity = (col2.r + col2.g + col2.b) / 3.0;\n return vec4(intensity, intensity, intensity, col2.a);\n }\n\n return col2;\n}\n\nvec4 getVertexPosition(mat4 transform) {\n vec2 coords = getTextureCoordinates(aVertexIndex, uVertexTextureSize);\n vec3 point = vec3(texture(uVertexSampler, coords));\n\n if (aTransformationIndex < -0.5) {\n return vec4 (point, 1.0);\n }\n\n return transform * vec4(point, 1.0);\n}\n\nmat4 getTransform() {\n if (aTransformationIndex < -0.5) {\n return mat4(1.0);\n }\n\n float tIndex = aTransformationIndex * 4.0;\n\n \n vec2 c1 = getTextureCoordinates(tIndex, uMatrixTextureSize);\n vec2 c2 = getTextureCoordinates(tIndex + 1.0, uMatrixTextureSize);\n vec2 c3 = getTextureCoordinates(tIndex + 2.0, uMatrixTextureSize);\n vec2 c4 = getTextureCoordinates(tIndex + 3.0, uMatrixTextureSize);\n\n \n vec4 v1 = texture(uMatrixSampler, c1);\n vec4 v2 = texture(uMatrixSampler, c2);\n vec4 v3 = texture(uMatrixSampler, c3);\n vec4 v4 = texture(uMatrixSampler, c4);\n\n \n return mat4(v1, v2, v3, v4);\n}\n\nvoid main(void) {\n int state = int(floor(aState[0] + 0.5));\n vDiscard = 0.0;\n\n if (state == 254 || \n (uColorCoding == -1 && state == 251) || \n (uColorCoding == -1 && (\n (uRenderingMode == 2 && state != 253 && state != 252 && state != 250) || \n (uRenderingMode == 3 && (state == 253 || state == 252 || state == 250))) \n ))\n {\n vDiscard = 1.0;\n vColor = vec4(0.0, 0.0, 0.0, 0.0);\n vNormal = vec3(0.0, 0.0, 0.0);\n vPosition = vec3(0.0, 0.0, 0.0);\n gl_Position = vec4(0.0, 0.0, 0.0, 1.0);\n return;\n }\n\n \n mat4 transform = getTransform();\n \n vPosition = vec3(getVertexPosition(transform)) + uWcs;\n vNormal = getNormal(transform);\n\n \n vec4 baseColor = getColor();\n\n \n if (baseColor.a < 0.98)\n {\n float correction = -0.002;\n if (uColorCoding == -2 || uColorCoding >= 0) {\n correction = -0.02;\n }\n vec3 trans = correction * uMeter * normalize(vNormal);\n vPosition = vPosition + trans;\n }\n \n \n if (uColorCoding == -2) {\n \n if ((uRenderingMode == 2 || uRenderingMode == 4) && state != 252 && state != 253)\n {\n vDiscard = 1.0;\n vColor = vec4(0.0, 0.0, 0.0, 0.0);\n vNormal = vec3(0.0, 0.0, 0.0); \n } \n else\n {\n float id = floor(aProduct + 0.5);\n vColor = getIdColor(id);\n vNormal = vec3(0.0, 0.0, 0.0);\n }\n }\n \n else if (uColorCoding >= 0) {\n \n if ((uRenderingMode == 2 || uRenderingMode == 4) && state != 252 && state != 253)\n {\n vDiscard = 1.0;\n vColor = vec4(0.0, 0.0, 0.0, 0.0);\n vNormal = vec3(0.0, 0.0, 0.0); \n } \n else\n {\n float id = float(uColorCoding);\n vColor = getIdColor(id);\n vNormal = vec3(0.0, 0.0, 0.0);\n }\n }\n \n else {\n \n \n \n if (state == 250) {\n baseColor = uHoverPickColour;\n }\n else if (state == 253) {\n baseColor = uHighlightColour;\n }\n \n else if (uRenderingMode == 2 || uRenderingMode == 3) {\n \n if (state == 252) { \n baseColor = getColor();\n }\n \n else {\n baseColor = uXRayColour; \n }\n }\n \n vColor = baseColor;\n }\n\n \n gl_Position = uPMatrix * uMVMatrix * vec4(vPosition, 1.0);\n}"},8378:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ViewType=e.RenderingMode=e.Viewer=void 0;var n,i,a,o=r(8194),s=r(3948),u=r(4932),c=r(9499),l=r(2067),h=r(7751),f=r(380),d=r(2241),A=r(6907),p=r(5761),v=r(7997),I=r(6920),m=r(4802),g=r(810),E=r(5771),T=r(3810),C=r(9549),R=r(887),b=r(1675),M=r(6413),y=r(2607),F=r(5460),O=r(6235),_=r(8948),P=r(3425),N=r(269),S=function(){function t(t,e){var r=this;if(this.changed=!0,this._navigationMode="orbit",this.zoomDuration=1e3,this._camera=new M.CameraProperties((function(){r.changed=!0})),this._sectionBox=new y.SectionBox((function(){var t=r.getCurrentWcs(),e=r.getMergedRegion().bbox,n=r._sectionBox.getBoundingBox(t);null!=e&&null!=n&&F.BBox.areDisjoint(e,n)&&console.warn("Section box is disjoint with the current content"),r.changed=!0})),this._background=[230,230,230,255],this._highlightingColour=[255,173,33,255],this._hoverPickColour=[0,255,0,255],this._xrayColour=[80,80,80,150],this._mvMatrix=R.mat4.create(),this._pMatrix=R.mat4.create(),this._renderingMode=i.NORMAL,this._mvMatrixTimestamp=Date.now(),this._isRunning=!1,this._plugins=[],this._handles=[],this._shaderProgram=null,this._gamma=1,this._contrast=1,this._brightness=0,this._currentFps=60,this._performance=b.PerformanceRating.HIGH,this._adaptivePerformanceOn=!0,this._hoverPickEnabled=!1,this._events={},this._canvasListeners={},this._readerOptions={orderGeometryBySize:!1},null==t)throw new Error("Canvas has to be defined");if(void 0!==t.nodeName&&"CANVAS"===t.nodeName&&(this.canvas=t),"string"==typeof t&&(this.canvas=document.getElementById(t)),null==this.canvas)throw new Error("You have to specify canvas either as an ID of HTML element or the element itself");if(null!=e&&this.on("error",e),this.cameraProperties.fov=60,this.cameraProperties.near=1,this.cameraProperties.far=100,v.WebGLUtils.setupWebGL(this.canvas,(function(t,e){r.gl=t,r.glVersion=e}),{preserveDrawingBuffer:!0},(function(t){r.error(t)})),this.gl){this._requestAnimationFrame=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}).bind(window);var n=this.gl;if(this.glVersion<2){if(this._fptExtension=n.getExtension("OES_texture_float")||n.getExtension("MOZ_OES_texture_float")||n.getExtension("WEBKIT_OES_texture_float"),!this._fptExtension)throw new Error("Floating point texture support required.");this._depthTextureExtension=n.getExtension("WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture"),this._depthTextureExtension||console.warn("WebGL 1.0 Depth texture extension not available. Interaction might be constrained as 3D of the event won't be calculated.")}n.enable(n.DEPTH_TEST),n.blendFunc(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA),n.enable(n.BLEND),this.width=this.canvas.width=this.canvas.offsetWidth,this.height=this.canvas.height=this.canvas.offsetHeight,this._initShaders(),this._initAttributesAndUniforms(),m.MouseNavigation.initMouseEvents(this),g.KeyboardNavigation.initKeyboardEvents(this),E.TouchNavigation.initTouchNavigationEvents(this),E.TouchNavigation.initTouchTapEvents(this),this._disableContextMenu(),this._stateStyles=new Uint8Array(900),this._stateStyleTexture=n.createTexture(),n.activeTexture(n.TEXTURE4),n.bindTexture(n.TEXTURE_2D,this._stateStyleTexture),n.uniform1i(this._stateStyleSamplerUniform,4),u.ModelHandle.bufferTexture(n,this._stateStyleTexture,this._stateStyles);var a=this.height,o=this.width,s=function(){r.canvas.offsetHeight===a&&r.canvas.offsetWidth===o||(a=r.height=r.canvas.height=r.canvas.offsetHeight,o=r.width=r.canvas.width=r.canvas.offsetWidth),r._requestAnimationFrame(s)};s(),this._cameraAdjustment=new O.CameraAdjustment(this,this._requestAnimationFrame,20),this.animations=new C.Animations(this),this._fpsWatch=new N.FpsWatch(this._requestAnimationFrame),this.setupFpsReporting(),this._watchPerformance()}else this.error("Unable to set up WebGL")}return Object.defineProperty(t.prototype,"navigationMode",{get:function(){return this._navigationMode},set:function(t){this._navigationMode=t,this.adaptivePerformanceOn="walk"!==t&&"look-around"!==t&&"look-at"!==t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cameraProperties",{get:function(){return this._camera},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sectionBox",{get:function(){return this._sectionBox},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t,this.changed=!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t,this.changed=!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"camera",{get:function(){return this.cameraProperties.type},set:function(t){this.cameraProperties.type=t,this.changed=!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"background",{get:function(){return this._background},set:function(t){this._background=t,this.changed=!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"highlightingColour",{get:function(){return this._highlightingColour},set:function(t){this._highlightingColour=t,this.changed=!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hoverPickColour",{get:function(){return this._hoverPickColour},set:function(t){this._hoverPickColour=t,this.changed=!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"xrayColour",{get:function(){return this._xrayColour},set:function(t){this._xrayColour=t,this.changed=!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mvMatrix",{get:function(){return this._mvMatrix},set:function(t){this._mvMatrix=t,this.changed=!0,this._mvMatrixTimestamp=Date.now()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pMatrix",{get:function(){return this._pMatrix},set:function(t){this._pMatrix=t,this.changed=!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"renderingMode",{get:function(){return this._renderingMode},set:function(t){this._renderingMode=t,this.changed=!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"gamma",{get:function(){return this._gamma},set:function(t){this._gamma=t,this.changed=!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"contrast",{get:function(){return this._contrast},set:function(t){this._contrast=t,this.changed=!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"brightness",{get:function(){return this._brightness},set:function(t){this._brightness=t,this.changed=!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"mvMatrixAge",{get:function(){return Date.now()-this._mvMatrixTimestamp},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"performance",{get:function(){return this._performance},set:function(t){this._performance=t,this.changed=!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"adaptivePerformanceOn",{get:function(){return this._adaptivePerformanceOn},set:function(t){this._adaptivePerformanceOn=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hoverPickEnabled",{get:function(){return this._hoverPickEnabled},set:function(t){this._hoverPickEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"plugins",{get:function(){return this._plugins.slice()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"unitsInMeter",{get:function(){var t=this.activeHandles.map((function(t){return t.meter}));return 0===t.length?null:t[0]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"adjustments",{get:function(){return this._cameraAdjustment},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"activeHandles",{get:function(){return this._handles.filter((function(t){return null!=t&&!t.stopped&&!t.empty}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"readerOptions",{get:function(){return this._readerOptions},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasDepthSupport",{get:function(){return this.glVersion>1||null!=this._depthTextureExtension},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRunning",{get:function(){return this._isRunning},enumerable:!1,configurable:!0}),t.check=function(){return T.Abilities.check()},t.prototype.addPlugin=function(t){t.init&&(t.init(this),this._plugins.push(t),this.changed=!0)},t.prototype.removePlugin=function(t){var e=this._plugins.indexOf(t,0);e<0||(this._plugins.splice(e,1),this.changed=!0)},t.prototype.defineStyle=function(t,e){if(void 0===t||t<0&&t>224)throw new Error("Style index has to be defined as a number 0-224");if(void 0===e||!e.length||4!==e.length)throw new Error("Colour must be defined as an array of 4 bytes");var r=new Uint8Array(e);this._stateStyles.set(r,4*t);var n=this.setActive();n.activeTexture(n.TEXTURE4),n.bindTexture(n.TEXTURE_2D,this._stateStyleTexture),u.ModelHandle.bufferTexture(n,this._stateStyleTexture,this._stateStyles),this.changed=!0},t.prototype.addState=function(t,e,r){if(void 0===t||!(t>=225&&t<=255))throw new Error("State has to be defined as 225 - 255. Use State enum.");if(null==e)throw new Error("Target must be defined either as type ID or as a list of product IDs");this.forHandleOrAll((function(r){r.addState(t,e)}),r),this.changed=!0},t.prototype.setState=function(t,e,r){if(void 0===t||!(t>=225&&t<=255))throw new Error("State has to be defined as 225 - 255. Use State enum.");if(null==e)throw new Error("Target must be defined either as type ID or as a list of product IDs");this.forHandleOrAll((function(r){r.setState(t,e)}),r),this.changed=!0},t.prototype.removeState=function(t,e,r){if(void 0===t||!(t>=225&&t<=255))throw new Error("State has to be defined as 225 - 255. Use State enum.");if(null==e)throw new Error("Target must be defined either as type ID or as a list of product IDs");this.forHandleOrAll((function(r){r.removeState(t,e)}),r),this.changed=!0},t.prototype.setHoverPick=function(t,e){var r=this,n=this.getProductsWithState(o.State.HOVEROVER);if(t){if(n.some((function(r){return r.id===t&&r.model===e})))return;this.getProductType(t,e)!==P.ProductType.IFCSITE&&this.addState(o.State.HOVEROVER,[t],e)}n.forEach((function(n){t==n.id&&e==n.model||r.removeState(o.State.HOVEROVER,[n.id],n.model)}))},t.prototype.getProductsWithState=function(t){var e=[];return this._handles.filter((function(t){return!t.stopped&&!t.empty})).forEach((function(r){var n=r.getProductsWithState(t);null!=n&&n.length>0&&(e=e.concat(n))})),e},t.prototype.getState=function(t,e){return this.forHandleOrAll((function(e){return e.getState(t)}),e)},t.prototype.resetState=function(t,e){this.forHandleOrAll((function(e){e.resetState(t)}),e),this.changed=!0},t.prototype.clearHighlighting=function(){this._handles.filter((function(t){return!t.stopped&&!t.empty})).forEach((function(t){return t.clearHighlighting()}))},t.prototype.forHandleOrAll=function(t,e){if(null!=e){var r=this.getHandle(e);if(!r)throw new Error("Model with id '".concat(e,"' doesn't exist."));return t(r)}var n=null;return this._handles.forEach((function(e){if(e){var r=t(e);null!=r&&(n=r)}})),n},t.prototype.getHandle=function(t){return this._handles.filter((function(e){return null!=e&&e.id===t})).pop()},t.prototype.getCurrentImageHtml=function(t,e){void 0===t&&(t=this.width),void 0===e&&(e=this.height);var r=document.createElement("img");return r.src=this.getCurrentImageDataUrl(t,e),r},t.prototype.getCurrentImageDataUrl=function(t,e,r){if(void 0===t&&(t=this.width),void 0===e&&(e=this.height),void 0===r&&(r="png"),0===t||0===e)return null;var n=new c.Framebuffer(this.gl,t,e,!1,this.glVersion);this.draw(n);var i=n.getImageDataUrl(r);return n.delete(),i},t.prototype.getCurrentImageDataArray=function(t,e){if(void 0===t&&(t=this.width),void 0===e&&(e=this.height),0===t||0===e)return null;var r=new c.Framebuffer(this.gl,t,e,!1,this.glVersion);this.draw(r);var n=r.getImageDataArray();return r.delete(),n},t.prototype.getCurrentImageBlob=function(t){return this.canvas.toBlob(t,"image/png")},t.prototype.getProductsStates=function(t){var e=this.getHandle(t);if(null==e)throw new Error("Model '".concat(t,"' doesn't exist"));return e.getStates()},t.prototype.restoreProductsStates=function(t,e){var r=this.getHandle(t);if(null==r)throw new Error("Model '".concat(t,"' doesn't exist"));r.resetState(),e.forEach((function(t){t.states.forEach((function(e){r.addState(e,[t.id])}))}))},t.prototype.getModelState=function(t){var e=this.getHandle(t);if(null==e)throw new Error("Model '".concat(t,"' doesn't exist"));return e.getModelState()},t.prototype.restoreModelState=function(t,e){var r=this.getHandle(t);if(null==r)throw new Error("Model '".concat(t,"' doesn't exist"));r.restoreModelState(e),this.changed=!0},t.prototype.setStyle=function(t,e,r){if(void 0===t||!(t>=0&&t<=225))throw new Error("Style has to be defined as 0 - 225 where 225 is for default style.");var n=[this._stateStyles[4*t],this._stateStyles[4*t+1],this._stateStyles[4*t+2],this._stateStyles[4*t+3]];0===n[0]&&0===n[1]&&0===n[2]&&0===n[3]&&console.warn("You have used undefined colour for restyling. Elements with this style will have transparent black colour and hence will be invisible."),this.forHandleOrAll((function(r){r.setStyle(t,e)}),r),this.changed=!0},t.prototype.getStyle=function(t,e){var r=null;return this.forHandleOrAll((function(e){r=e.getStyle(t)}),e),r},t.prototype.resetStyles=function(t){this.forHandleOrAll((function(t){t.resetStyles()}),t),this.changed=!0},t.prototype.getProductType=function(t,e){return this.forHandleOrAll((function(e){var r=e.getProductMap(t);if(r)return r.type}),e)},t.prototype.getProductBoundingBox=function(t,e){var r=this;return this.forHandleOrAll((function(e){var n=r.getCurrentWcs(),i=e.getProductMap(t,n);if(i){var a=i.bBox;return new Float32Array([a[0]+n[0],a[1]+n[1],a[2]+n[2],a[3],a[4],a[5]])}}),e)},t.prototype.getDistanceAndHeight=function(t,e,r){var n=F.BBox.getSizeInView(t,e,r),i=n.width/n.height,a=this.width>0&&this.height>0?this.width/this.height:1,o=n.width,s=n.height;return i>a?s=o/a:i<a&&(o=s*a),{distance:1.5*(s/(2*Math.tan(this.cameraProperties.fov*Math.PI/180/2))+n.depth/2),height:1.5*s}},t.prototype.getTargetBoundingBox=function(t,e){var r=this.getCurrentWcs();if(null!=t)return this.forHandleOrAll((function(e){var n=e.getProductMap(t,r);if(n)return n.bBox}),e)||null;var n=this.getMergedRegion();return n&&n.population>0?n.bbox:null},t.prototype.getTargetsBoundingBox=function(t){var e=this,r=this.getCurrentWcs();return t.reduce((function(t,n){var i=e.forHandleOrAll((function(t){var e=t.getProductMap(n.id,r);if(e)return e.bBox}),n.model);return F.BBox.union(i,t)}),null)},t.prototype.getMergedRegion=function(){var t=new s.Region,e=this.getCurrentWcs();this.activeHandles.forEach((function(r){var n=r.getRegion(e);null!=n&&(t=t.merge(n))}));var r=t.bbox;return this.sectionBox.isSet&&(null==(r=F.BBox.intersection(t.bbox,this.sectionBox.getBoundingBox(e)))?console.debug("View will be empty because section box and actual content region are disjoint"):(t.bbox=new Float32Array(r),t.centre=new Float32Array(F.BBox.centre(r)))),t},t.prototype.getMergedRegionWcs=function(){var t=new s.Region,e=R.vec3.create();return this.activeHandles.forEach((function(r){var n=r.getRegion(e);null!=n&&(t=t.merge(n))})),t},t.prototype.set=function(t){var e=this;Object.getOwnPropertyNames(t).forEach((function(r){e[r]=t[r]}))},t.prototype.loadAsync=function(t,e,r,n){if(void 0===t)throw new Error("You have to specify model to load.");if("string"!=typeof t&&!(t instanceof Blob))throw new Error("Model has to be specified either as a URL to wexBIM file or Blob object representing the wexBIM file.");var i=this,a=n?function(t){t.type===I.MessageType.COMPLETED&&(t.type=I.MessageType.PROGRESS),n(t)}:function(t){};if("undefined"==typeof Worker)return this.load(t,e,r,n),void console.warn("Asynchronous model loading requires Web Worker support in the browser. Falling back to synchronous loading.");var o=new Blob([h.worker],{type:"application/javascript"}),s=new Worker(URL.createObjectURL(o));if(s.onmessage=function(t){var r=t.data;if(r.type===I.MessageType.COMPLETED){var o=r.result;r.result=null,a(r);var s=i.addHandle(o,e,a);n&&n({message:"Model load complete",type:I.MessageType.COMPLETED,percent:100,wexbimId:s,phase:I.LoadingPhase.LOADING})}else a(r)},s.onerror=function(t){i.error(t.message)},"string"==typeof t&&0!==t.indexOf("http")){var u=document.createElement("a");u.href=t,t=u.href}s.postMessage({model:t,headers:r,options:this.readerOptions})},t.prototype.load=function(t,e,r,n){if(null==t)throw new Error("You have to specify model to load.");if("string"!=typeof t&&!(t instanceof Blob))throw new Error("Model has to be specified either as a URL to wexBIM file or Blob object representing the wexBIM file.");var i=this,a=new s.ModelGeometry;a.onloaded=function(){i.addHandle(a,e,n)},a.onerror=function(t){i.error(t)};try{a.load(t,r,n,this.readerOptions)}catch(t){i.error(t)}},t.prototype.addHandle=function(t,e,r){var n=this.setActive(),i=new u.ModelHandle(n,t,r);return i.tag=e,this._handles.push(i),this.setNearAndFarFromCurrentModels(),this.changed=!0,this.fire("loaded",{model:i.id,tag:e}),i.id},t.prototype.setNearAndFarFromCurrentModels=function(){if(0!==this.activeHandles.length){var t=this.getMergedRegion();if(t&&t.bbox&&0!==t.bbox.length){var e=this.activeHandles[0].meter,r=F.BBox.getDiagonalSize(t.bbox);this.cameraProperties.far=10*r,this.cameraProperties.near=e/4}}},t.prototype.unload=function(t){var e=this.getHandle(t);if(null==e)throw new Error("Model with id: "+t+" doesn't exist or was unloaded already.");e.stopped=!0;var r=this._handles.indexOf(e);this._handles.splice(r,1),this.changed=!0,e.unload(),this.fire("unloaded",{tag:e.tag,model:e.id})},t.prototype._initShaders=function(){var t=this,e=this.gl,r=function(r,n){if(e.shaderSource(r,n),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS)){var i=e.getShaderInfoLog(r);return t.error(i),console.error(i),!1}return!0},n=e.createShader(e.FRAGMENT_SHADER);if(!(1===this.glVersion?r(n,f.fragment_shader):r(n,A.fragment_shader_300)))return!1;var i=e.createShader(e.VERTEX_SHADER);if(!(1===this.glVersion?r(i,d.vertex_shader):r(i,p.vertex_shader_300)))return!1;this._shaderProgram=e.createProgram(),e.attachShader(this._shaderProgram,i),e.attachShader(this._shaderProgram,n),e.linkProgram(this._shaderProgram),e.getProgramParameter(this._shaderProgram,e.LINK_STATUS)?e.useProgram(this._shaderProgram):(this.error("Could not initialise shaders "),console.error("Could not initialise shaders "))},t.prototype.setActive=function(){var t=this.gl;return t.useProgram(this._shaderProgram),t},t.prototype._initAttributesAndUniforms=function(){var t=this.setActive();this._pMatrixUniformPointer=t.getUniformLocation(this._shaderProgram,"uPMatrix"),this._mvMatrixUniformPointer=t.getUniformLocation(this._shaderProgram,"uMVMatrix"),this._lightUniformPointer=t.getUniformLocation(this._shaderProgram,"uLight"),this._colorCodingUniformPointer=t.getUniformLocation(this._shaderProgram,"uColorCoding"),this._renderingModeUniformPointer=t.getUniformLocation(this._shaderProgram,"uRenderingMode"),this._highlightingColourUniformPointer=t.getUniformLocation(this._shaderProgram,"uHighlightColour"),this._hoverPickColourUniformPointer=t.getUniformLocation(this._shaderProgram,"uHoverPickColour"),this._xrayColourUniformPointer=t.getUniformLocation(this._shaderProgram,"uXRayColour"),this._stateStyleSamplerUniform=t.getUniformLocation(this._shaderProgram,"uStateStyleSampler"),this._gammaContrastBrightnessUniform=t.getUniformLocation(this._shaderProgram,"uGBC"),this._sectionBoxUniform=t.getUniformLocation(this._shaderProgram,"uSectionBox"),this._pointers=new l.ModelPointers(t,this._shaderProgram)},t.prototype._disableContextMenu=function(){this.canvas.addEventListener("contextmenu",(function(t){return t.preventDefault(),"contextmenu"!==t.type}))},Object.defineProperty(t.prototype,"meter",{get:function(){var t=this._handles.find((function(t){return!t.stopped&&!t.empty}));return t?t.meter:1},enumerable:!1,configurable:!0}),t.prototype.navigate=function(t,e,r,n){if(0!==this.activeHandles.length){"locked-orbit"===t&&(n=this.lockedOrbitOrigin||n);var i=this.getCameraPosition(),a=R.vec3.distance(i,n);"look-around"===t&&(n=i,e=-e,r=-r),"look-at"===t&&(n=i);var o=R.vec3.transformMat4(R.vec3.create(),n,this.mvMatrix),s=R.mat4.translate(R.mat4.create(),R.mat4.create(),o),u=function(t){return t*Math.PI/180};switch(t){case"free-orbit":s=R.mat4.rotate(R.mat4.create(),s,u(r/4),[1,0,0]),s=R.mat4.rotate(R.mat4.create(),s,u(e/4),[0,1,0]);break;case"locked-orbit":case"fixed-orbit":case"look-around":case"look-at":case"orbit":R.mat4.rotate(s,s,u(r/4),[1,0,0]);var c=R.vec3.transformMat3(R.vec3.create(),[0,0,1],R.mat3.fromMat4(R.mat3.create(),this.mvMatrix));c=R.vec3.normalize(R.vec3.create(),c),s=R.mat4.rotate(R.mat4.create(),s,u(e/4),c);break;case"pan":var l=0;if(this.camera===M.CameraType.ORTHOGONAL)l=this.cameraProperties.height/this.height;else{var h=this.cameraProperties.fov*Math.PI/180;l=2*a*Math.tan(h/2)/this.height}s=R.mat4.translate(R.mat4.create(),s,[l*e,-l*r,0]);break;case"walk":var f=r*this.meter*.5/20;return void this.animations.addZoom(f,0);case"zoom":var d=R.vec3.subtract(R.vec3.create(),n,i),A=r*Math.max(a,2*this.meter)/20;return void this.animations.addZoom(A,0,d)}var p=R.vec3.negate(R.vec3.create(),o);s=R.mat4.translate(R.mat4.create(),s,p),this.mvMatrix=R.mat4.multiply(R.mat4.create(),s,this.mvMatrix)}},t.prototype.getCurrentWcs=function(){var t=function(t){return!t.empty&&!t.stopped};if(null!=this._lastWcs&&!0===t(this._lastWcs))return this._lastWcs.wcs;var e=this._handles.filter(t)[0];return null!=e?(this._lastWcs=e,this._lastWcs.wcs):R.vec3.create()},t.prototype.draw=function(t,e){var r=this;void 0===e&&(e=!1);var a=this.getCurrentWcs(),o=this.gl;o.clearColor(this.background[0]/255,this.background[1]/255,this.background[2]/255,this.background[3]/255),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT);var s=t?t.width:this.width,c=t?t.height:this.height;o.viewport(0,0,s,c),this.updatePMatrix(s,c),o.enable(o.BLEND),o.blendFunc(o.SRC_ALPHA,o.ONE_MINUS_SRC_ALPHA),e||this._plugins.forEach((function(t){t.onBeforeDraw&&t.onBeforeDraw(s,c)})),(o=this.setActive()).activeTexture(o.TEXTURE4),o.bindTexture(o.TEXTURE_2D,this._stateStyleTexture),o.uniform1i(this._stateStyleSamplerUniform,4),o.uniformMatrix4fv(this._pMatrixUniformPointer,!1,this.pMatrix),o.uniformMatrix4fv(this._mvMatrixUniformPointer,!1,this.mvMatrix);var l=this.getLightPosition(1*this.meter,1*this.meter);if(o.uniform3fv(this._lightUniformPointer,l),o.uniform3fv(this._gammaContrastBrightnessUniform,new Float32Array([this.gamma,this.contrast,this.brightness])),o.uniformMatrix4fv(this._sectionBoxUniform,!1,this.sectionBox.getMatrix(a)),o.uniform1i(this._colorCodingUniformPointer,n.NONE),o.uniform4fv(this._highlightingColourUniformPointer,new Float32Array([this.highlightingColour[0]/255,this.highlightingColour[1]/255,this.highlightingColour[2]/255,this.highlightingColour[3]/255])),o.uniform4fv(this._hoverPickColourUniformPointer,new Float32Array([this.hoverPickColour[0]/255,this.hoverPickColour[1]/255,this.hoverPickColour[2]/255,this.hoverPickColour[3]/255])),o.uniform4fv(this._xrayColourUniformPointer,new Float32Array([this.xrayColour[0]/255,this.xrayColour[1]/255,this.xrayColour[2]/255,this.xrayColour[3]/255])),t?o.bindFramebuffer(o.FRAMEBUFFER,t.framebuffer):o.bindFramebuffer(o.FRAMEBUFFER,null),o.uniform1i(this._renderingModeUniformPointer,this.renderingMode),this.renderingMode===i.XRAY||this.renderingMode===i.XRAY_ULTRA)this.drawXRAY(o);else{o.disable(o.CULL_FACE),o.enable(o.DEPTH_TEST);var h=100;switch(this.performance){case b.PerformanceRating.VERY_LOW:h=10;break;case b.PerformanceRating.LOW:h=30;break;case b.PerformanceRating.MEDIUM:h=50;break;case b.PerformanceRating.HIGH:default:h=100}this._handles.forEach((function(t){t.stopped||(t.setActive(r._pointers,a),t.draw(u.DrawMode.SOLID,t.pinned?100:h))})),this.performance>b.PerformanceRating.LOW&&this._handles.forEach((function(t){t.stopped||(t.setActive(r._pointers,a),t.draw(u.DrawMode.TRANSPARENT,t.pinned?100:h))}))}e||this._plugins.forEach((function(t){t.onAfterDraw&&t.onAfterDraw(s,c)}))},t.prototype.getLightPosition=function(t,e){var r=R.mat4.getRotation(R.quat.create(),this.mvMatrix),n=R.quat.invert(R.quat.create(),r),i=R.vec3.transformQuat(R.vec3.create(),[0,1,0],n),a=R.vec3.transformQuat(R.vec3.create(),[1,0,0],n),o=R.vec3.scale(R.vec3.create(),i,t),s=R.vec3.scale(R.vec3.create(),a,e),u=R.vec3.add(R.vec3.create(),o,s),c=this.getCameraPosition();return R.vec3.add(R.vec3.create(),c,u)},t.prototype.drawXRAY=function(t){var e=this,r=this.renderingMode,n=this.getCurrentWcs(),a=function(){t.enable(t.CULL_FACE),t.uniform1i(e._renderingModeUniformPointer,3),t.depthMask(!1),e._handles.forEach((function(t){t.stopped||(t.setActive(e._pointers,n),t.draw())})),t.depthMask(!0)},o=function(){t.disable(t.CULL_FACE),t.uniform1i(e._renderingModeUniformPointer,i.XRAY),t.enable(t.DEPTH_TEST),e._handles.forEach((function(t){t.stopped||(t.setActive(e._pointers,n),t.draw())}))};r===i.XRAY&&(o(),a()),r===i.XRAY_ULTRA&&(a(),o())},t.prototype.updatePMatrix=function(t,e){this.pMatrix=this.cameraProperties.getProjectionMatrix(t,e)},t.prototype.getCameraDistanceFromRegion=function(){var t=this.getMergedRegion();if(!t.bbox||0===t.bbox.length)return{near:0,far:0,size:0};var e=this.getCameraPosition(),r=R.vec3.normalize(R.vec3.create(),this.getCameraDirection()),n=F.BBox.getDiagonalSize(t.bbox),i=R.vec3.subtract(R.vec3.create(),t.centre,e),a=R.vec3.normalize(R.vec3.create(),i),o=R.vec3.length(i),s=R.vec3.scale(R.vec3.create(),a,o-n),u=R.vec3.scale(R.vec3.create(),a,o+n);return{near:R.vec3.dot(r,s),far:R.vec3.dot(r,u),size:n}},t.prototype.getCameraPosition=function(){var t=R.mat4.invert(R.mat4.create(),this.mvMatrix);return null==t?R.vec3.create():R.vec3.transformMat4(R.vec3.create(),R.vec3.create(),t)},t.prototype.getCameraPositionWcs=function(){var t=this.getCameraPosition(),e=this.getCurrentWcs();return R.vec3.add(R.vec3.create(),t,e)},t.prototype.getCameraDirection=function(){var t=R.mat4.invert(R.mat4.create(),this.mvMatrix),e=R.mat4.getRotation(R.quat.create(),t);return R.vec3.transformQuat(R.vec3.create(),R.vec3.fromValues(0,0,-1),e)},t.prototype.getCameraHeading=function(){var t=R.mat4.invert(R.mat4.create(),this.mvMatrix),e=R.mat4.getRotation(R.quat.create(),t);return R.vec3.transformQuat(R.vec3.create(),R.vec3.fromValues(0,1,0),e)},t.prototype.zoomTo=function(t,e,r,n){void 0===r&&(r=!0),void 0===n&&(n=!0);var i=r?this.zoomDuration:0,a=null;if(null==t||"number"==typeof t){if(a=this.getTargetBoundingBox(t,e),!0===n&&"number"==typeof t&&null!=(o=_.PreflightCheck.findView(this,[{id:t,model:e||1}],10)))return this.animations.viewTo(o,i)}else{var o;if(!0===n&&t.length>0&&null!=(o=_.PreflightCheck.findView(this,t,10)))return this.animations.viewTo(o,i);a=t.length>0?this.getTargetsBoundingBox(t):this.getTargetBoundingBox()}if(null==a)return new Promise((function(t,e){return t()}));var s=R.vec3.fromValues(a[0]+a[3]/2,a[1]+a[4]/2,a[2]+a[5]/2),u=this.getCameraPosition(),c=R.vec3.subtract(R.vec3.create(),u,s);c=R.vec3.normalize(R.vec3.create(),c);var l=R.vec3.angle(c,[0,0,1]),h=R.vec3.fromValues(0,0,1);(Math.abs(l)<1e-6||Math.abs(l-Math.PI)<1e-6)&&(h=this.getCameraHeading());var f=this.getDistanceAndHeight(a,c,h),d=R.vec3.create();R.vec3.scale(d,c,f.distance),R.vec3.add(u,d,s);var A=R.mat4.lookAt(R.mat4.create(),u,s,h);return this.animations.viewTo({mv:A,height:f.height},i)},t.prototype.show=function(t,e,r,n){void 0===n&&(n=!0);var i=this.getTargetBoundingBox(e,r);if(null==i)return new Promise((function(t,e){return e()}));var o=n?this.zoomDuration:0,s=R.vec3.fromValues(i[0]+i[3]/2,i[1]+i[4]/2,i[2]+i[5]/2),u=null,c=R.vec3.fromValues(0,0,1);switch(t){case a.TOP:u=R.vec3.fromValues(0,0,-1),c=R.vec3.fromValues(0,1,0);break;case a.BOTTOM:u=R.vec3.fromValues(0,0,1),c=R.vec3.fromValues(0,-1,0);break;case a.FRONT:u=R.vec3.fromValues(0,1,0);break;case a.BACK:u=R.vec3.fromValues(0,-1,0);break;case a.LEFT:u=R.vec3.fromValues(1,0,0);break;case a.RIGHT:u=R.vec3.fromValues(-1,0,0);break;case a.DEFAULT:u=R.vec3.normalize(R.vec3.create(),[1,1,-1])}var l=this.getDistanceAndHeight(i,u,c),h=R.vec3.negate(R.vec3.create(),u),f=R.vec3.scale(R.vec3.create(),h,l.distance),d=R.vec3.add(R.vec3.create(),s,f),A=R.mat4.lookAt(R.mat4.create(),d,s,c);return this.animations.viewTo({mv:A,height:l.height},o)},t.prototype.startRotation=function(){this.animations.startRotation()},t.prototype.stopRotation=function(){this.animations.stopRotation()},t.prototype.error=function(t){this.fire("error",{message:t}),"undefined"!=typeof console&&null!=console.error&&console.error(t)},t.prototype.getInteractionOrigin=function(t){var e=this.getEventDataFromEvent(t);if(null==e||null==e.id||null==e.model)return null;if(null!=e.xyz)return e.xyz;var r=this.getTargetBoundingBox(e.id,e.model);return R.vec3.fromValues(r[0]+r[3]/2,r[1]+r[4]/2,r[2]+r[5]/2)},t.prototype.getEventDataFromEvent=function(t,e){void 0===e&&(e=!1);var r=t.clientX,n=t.clientY,i=this.canvas.getBoundingClientRect(),a=r-i.left,o=this.height-(n-i.top);if(!e)return this.getEventData(a,o);var s=this.getEventDataRaw(a,o);return null==s?{id:null,model:null,xyz:null}:{id:s.renderId,model:s.modelId,xyz:s.location}},t.prototype.getEventData=function(e,r){var n=this.getEventDataRaw(e,r);if(null==n)return t.noData;var i=n.renderId,a=n.modelId,o=this.getHandle(a);return null!=o?{id:o.getProductId(i),model:a,xyz:n.location}:t.noData},t.prototype.getEventDataRaw=function(t,e){var r=this;if(0===this.width||0===this.height||0===this.activeHandles.length)return null;var i=this.setActive(),a=Math.floor(this.width/4),o=Math.floor(this.height/4),s=this.getCurrentWcs(),u=this.cameraProperties.near,l=this.cameraProperties.far,h=this._isRunning;t=Math.floor(t/4),e=Math.floor(e/4),this._isRunning=!1,null==this._eventFB&&(this._eventFB=new c.Framebuffer(i,a,o,this.hasDepthSupport,this.glVersion)),(Math.abs(a-this._eventFB.width)>1||Math.abs(o-this._eventFB.height)>1)&&(this._eventFB.delete(),this._eventFB=new c.Framebuffer(i,a,o,this.hasDepthSupport,this.glVersion));var f=this._eventFB;f.bind();try{this.setActive(),i.viewport(0,0,a,o),i.enable(i.DEPTH_TEST),i.disable(i.BLEND),i.enable(i.SCISSOR_TEST),i.scissor(t,e,1,1),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT),this._plugins.forEach((function(t){t.onBeforeDrawId&&t.onBeforeDrawId()})),this.setActive(),i.uniform1i(this._colorCodingUniformPointer,n.PRODUCTS),i.uniform1i(this._renderingModeUniformPointer,this.renderingMode),this._handles.forEach((function(t){!t.stopped&&t.pickable&&(t.setActive(r._pointers,s),t.draw())})),this._plugins.forEach((function(t){t.onAfterDrawId&&t.onAfterDrawId()}));var d=f.getId(t,e);if(null==d)return null;var A=f.getXYZRange(t,e);if(null!=A){var p=R.mat4.invert(R.mat4.create(),this.pMatrix),v=R.vec3.transformMat4(R.vec3.create(),A.near,p),I=R.vec3.transformMat4(R.vec3.create(),A.far,p),m=-1*v[2],g=-1*I[2];this.cameraProperties.near=m,this.cameraProperties.far=g}this.setActive(),i.bindFramebuffer(i.FRAMEBUFFER,f.framebuffer),this.updatePMatrix(a,o),i.uniformMatrix4fv(this._pMatrixUniformPointer,!1,this.pMatrix),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT),this._handles.forEach((function(t){!t.stopped&&t.pickable&&(i.uniform1i(r._colorCodingUniformPointer,t.id),t.setActive(r._pointers,s),t.draw())})),this._plugins.forEach((function(t){t.onAfterDrawModelId&&t.onAfterDrawModelId()}));var E=f.getId(t,e),T=f.getXYZ(t,e),C=null;if(null!=T){var b=R.mat4.multiply(R.mat4.create(),this.pMatrix,this.mvMatrix),M=R.mat4.invert(R.mat4.create(),b);C=R.vec3.transformMat4(R.vec3.create(),T,M)}return{location:C,modelId:E,renderId:d}}catch(t){this.error(t)}finally{this.setActive(),i.bindFramebuffer(i.FRAMEBUFFER,null),i.blendFunc(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA),i.enable(i.BLEND),i.disable(i.SCISSOR_TEST),this.cameraProperties.near=u,this.cameraProperties.far=l,this.updatePMatrix(a,o),i.uniformMatrix4fv(this._pMatrixUniformPointer,!1,this.pMatrix),this._isRunning=h}},t.prototype.getData=function(t){var e=this;if(0===this.width||0===this.height||0===this.activeHandles.length)return null;var r=this.setActive(),i=Math.floor(this.width/4),a=Math.floor(this.height/4),o=this.getCurrentWcs(),s=this._isRunning;t=t.map((function(t){return{x:Math.floor(t.x/4),y:Math.floor(t.y/4)}})),this._isRunning=!1;var u=new c.Framebuffer(r,i,a,!1,this.glVersion);u.bind();try{this.setActive(),r.viewport(0,0,i,a),r.enable(r.DEPTH_TEST),r.disable(r.BLEND),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT),this.setActive(),r.uniform1i(this._colorCodingUniformPointer,n.PRODUCTS),this.updatePMatrix(i,a),r.uniformMatrix4fv(this._pMatrixUniformPointer,!1,this.pMatrix),r.uniformMatrix4fv(this._mvMatrixUniformPointer,!1,this.mvMatrix),this._handles.forEach((function(t){t.stopped||(t.setActive(e._pointers,o),t.draw())}));var l=u.getIds(t);this.setActive(),r.bindFramebuffer(r.FRAMEBUFFER,u.framebuffer),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT),this._handles.forEach((function(t){t.stopped||(r.uniform1i(e._colorCodingUniformPointer,t.id),t.setActive(e._pointers,o),t.draw())}));var h=u.getIds(t);return l.map((function(t,r){if(null==t)return null;var n=h[r];if(null==n)return null;var i=e.getHandle(n);return null==i?null:{id:i.getProductId(t),model:n}}))}catch(t){this.error(t)}finally{this.setActive(),r.bindFramebuffer(r.FRAMEBUFFER,null),r.blendFunc(r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA),r.enable(r.BLEND),this._isRunning=s}},t.prototype.isolate=function(t,e){if(null==e)this._handles.forEach((function(e){e.isolatedProducts=t}));else{var r=this.getHandle(e);if(!r)throw new Error("Model with id ".concat(e," doesn't exist."));r.isolatedProducts=t}},t.prototype.getIsolated=function(t){var e=this.getHandle(t);if(!e)throw new Error("Model with id ".concat(t," doesn't exist."));return e.isolatedProducts},t.prototype.setupFpsReporting=function(){var t=this,e=function(){var r=t._fpsWatch.fps;Math.abs(t._currentFps-r)>=1&&(t._currentFps=r,t.fire("fps",Math.floor(r))),t._requestAnimationFrame(e)};e()},t.prototype._watchPerformance=function(){var t=this,e=!1,r=function(){if(!t._adaptivePerformanceOn)return t.performance=b.PerformanceRating.HIGH,void t._requestAnimationFrame(r);var n=t.mvMatrixAge,i=t._fpsWatch.fps;if(n>2e3&&!e)t._requestAnimationFrame(r);else if(n>2e3){if(e=!1,t.performance=b.PerformanceRating.HIGH,t.fire("navigationEnd",!0),t.activeHandles.length>0){var a=t.getCameraDistanceFromRegion(),o=a.near,s=a.far,u=a.size;o>0&&s>0&&(t.cameraProperties.near=o,t.cameraProperties.far=s),t.draw()}t._requestAnimationFrame(r)}else{if(!1===e){e=!0;var c=t.getCameraDistanceFromRegion();o=c.near,s=c.far,u=c.size,t.cameraProperties.near=.2*t.meter,t.cameraProperties.far=5*u,t.fire("navigationStart",!0)}i<10&&t.performance>b.PerformanceRating.VERY_LOW?t.performance=b.PerformanceRating.VERY_LOW:i<20&&t.performance>b.PerformanceRating.LOW?t.performance=b.PerformanceRating.LOW:i<30&&t.performance>b.PerformanceRating.MEDIUM?t.performance=b.PerformanceRating.MEDIUM:i>=30&&t.performance<=b.PerformanceRating.MEDIUM&&(t.performance=b.PerformanceRating.HIGH),t._requestAnimationFrame(r)}};r()},t.prototype.start=function(t){var e=this;if(null!=t){var r=this.getHandle(t);if(void 0===r)throw new Error("Model doesn't exist.");if(r.stopped=!1,r.empty||this.setNearAndFarFromCurrentModels(),this._isRunning)return}if(this.changed=!0,this.setNearAndFarFromCurrentModels(),!this._isRunning){this._isRunning=!0;var n=function(){e._isRunning&&(0===e._handles.length||!e.changed&&0===e.activeHandles.filter((function(t){return t.changed})).length||(e.draw(),e.changed=!1),e._requestAnimationFrame(n))};n()}},t.prototype.stop=function(t){if(null!=t){var e=this.getHandle(t);if(null==e)throw new Error("Model doesn't exist.");e.stopped=!0,this.changed=!0,this.setNearAndFarFromCurrentModels()}else this._isRunning=!1},t.prototype.stopAll=function(){var t=this;this._handles.forEach((function(e){e.stopped=!0,t.changed=!0})),this._isRunning=!1},t.prototype.isModelOn=function(t){var e=this.getHandle(t);return!!e&&!e.stopped},t.prototype.isProductInModel=function(t,e){var r=this.getHandle(e);return!!r&&null!=r.getState(t)},t.prototype.isModelLoaded=function(t){return!!this.getHandle(t)},t.prototype.startAll=function(){var t=this;this._handles.forEach((function(e){e.stopped=!1,t.changed=!0})),this._isRunning=!0},t.prototype.stopPicking=function(t){var e=this.getHandle(t);if(null==e)throw new Error("Model doesn't exist.");e.pickable=!1},t.prototype.startPicking=function(t){var e=this.getHandle(t);if(void 0===e)throw new Error("Model doesn't exist.");e.pickable=!0},t.prototype.isPickable=function(t){return this.getHandle(t).pickable},t.prototype.on=function(t,e){var r=this,n=this._events;n[t]||(n[t]=[]),n[t].push(e);var i="on".concat(t);if((void 0!==this.canvas[i]||void 0!==document[i])&&null==this._canvasListeners[t]){var a=function(e){if("pointerlockchange"!==e.type){var n,i=t;e instanceof MouseEvent?null!=(n=r.getEventDataFromEvent(e))&&r.fire(i,{event:e,id:n.id,model:n.model,xyz:n.xyz}):e instanceof TouchEvent&&null!=(n=r.getEventDataFromEvent(e.touches[e.touches.length-1]))&&r.fire(i,{event:e,id:n.id,model:n.model,xyz:n.xyz})}else r.fire("pointerlockchange",{target:document.pointerLockElement})};"pointerlockchange"===t||"pointerlockerror"===t?document.addEventListener(t,a,!1):this.canvas.addEventListener(t,a),this._canvasListeners[t]=a}},t.prototype.off=function(t,e){var r=this._events[t];if(r){var n=r.indexOf(e);if(n>=0){r.splice(n,1);var i=this._canvasListeners[t];0===r.length&&null!==i&&("pointerlockchange"===t||"pointerlockerror"===t?document.removeEventListener(t,i):this.canvas.removeEventListener(t,i),this._canvasListeners[t]=null)}}},t.prototype.fire=function(t,e){var r=this._events[t];r&&r.slice().forEach((function(t){try{t(e)}catch(t){console.error(t)}}))},t.prototype.disableTextSelection=function(){document.documentElement.style["-webkit-touch-callout"]="none",document.documentElement.style["-webkit-user-select"]="none",document.documentElement.style["-khtml-user-select"]="none",document.documentElement.style["-moz-user-select"]="none",document.documentElement.style["-ms-user-select"]="none",document.documentElement.style["user-select"]="none"},t.prototype.enableTextSelection=function(){document.documentElement.style["-webkit-touch-callout"]="text",document.documentElement.style["-webkit-user-select"]="text",document.documentElement.style["-khtml-user-select"]="text",document.documentElement.style["-moz-user-select"]="text",document.documentElement.style["-ms-user-select"]="text",document.documentElement.style["user-select"]="text"},t.prototype.clip=function(t,e){if(null==t||null==e)throw new Error("Cutting plane not well defined");var r=0-e[0]*t[0]-e[1]*t[1]-e[2]*t[2];this._handles.forEach((function(t){t.clippingPlaneA=[e[0],e[1],e[2],r],t.clippingPlaneB=null}))},t.prototype.setClippingPlaneA=function(t,e){if(null!=e){var r=this.getHandle(e);r&&(r.clippingPlaneA=t)}else this._handles.forEach((function(e){e.clippingPlaneA=t}))},t.prototype.setClippingPlaneB=function(t,e){if(null!=e){var r=this.getHandle(e);r&&(r.clippingPlaneB=t)}else this._handles.forEach((function(e){e.clippingPlaneB=t}))},t.prototype.unclip=function(t){if(null!=t){var e=this.getHandle(t);e&&(e.clippingPlaneA=null,e.clippingPlaneB=null)}else this._handles.forEach((function(t){t.clippingPlaneA=null,t.clippingPlaneB=null}))},t.prototype.getClip=function(t){var e;return(e=null==t?this._handles.filter((function(t){return t.clippable&&!t.stopped&&(null!=t.clippingPlaneA||null!=t.clippingPlaneB)})).pop():this.getHandle(t))?{PlaneA:e.clippingPlaneA,PlaneB:e.clippingPlaneB}:null},t.prototype.getProductAnalysis=function(t){void 0===t&&(t="triangles");var e="triangles"===t?function(t){return t.numberOfTriangles}:function(t){return t.density};return this.activeHandles.reduce((function(t,e){return e.getProductAnalysis(t)}),[]).sort((function(t,r){return e(r)-e(t)}))},t.prototype.isolateHeavyProducts=function(t,e){var r=this;void 0===t&&(t="triangles"),void 0===e&&(e=.2);for(var n="triangles"===t?function(t){return t.numberOfTriangles}:function(t){return t.density},i=this.getProductAnalysis(t),a=i.reduce((function(t,e){return t+n(e)}),0)*e,o=0,s=[],u=0;o<a;u++){var c=i[u];o+=n(c),s.push(c)}var l={};return s.reduce((function(t,e){var r=t[e.modelId];return null==r&&(r=[],t[e.modelId]=r),r.push(e.productId),t}),l),this.activeHandles.forEach((function(t){r.isolate([0],t.id)})),Object.getOwnPropertyNames(l).forEach((function(t){var e=l[t],n=+t;r.isolate(e,n)})),s},t.prototype.getHTMLPositionOfProductCentroid=function(t,e){var r=this.getHandle(e).getProductMap(t,this.getCurrentWcs()).bBox,n=R.vec3.fromValues(r[0]+r[3]/2,r[1]+r[4]/2,r[2]+r[5]/2);return this.getHtmlCoordinatesOfVector(n)},t.prototype.getHtmlCoordinatesOfVector=function(t){if(!t)return[];var e=R.mat4.multiply(R.mat4.create(),this.pMatrix,this.mvMatrix),r=R.vec3.transformMat4(R.vec3.create(),t,e),n=r[0],i=r[1];return[(n+1)/2*this.width,this.height-(i+1)/2*this.height]},t.prototype.setLockedOrbitOrigin=function(t,e){var r=this.getHandle(e);if(null==r)throw new Error("Invalid model ID");var n=r.getProductMap(t,this.getCurrentWcs()).bBox;this.lockedOrbitOrigin=R.vec3.fromValues(n[0]+n[3]/2,n[1]+n[4]/2,n[2]+n[5]/2)},t.noData={id:null,model:null,xyz:null},t}();e.Viewer=S,function(t){t[t.NONE=-1]="NONE",t[t.PRODUCTS=-2]="PRODUCTS"}(n||(n={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.GRAYSCALE=1]="GRAYSCALE",t[t.XRAY=2]="XRAY",t[t.XRAY_ULTRA=4]="XRAY_ULTRA"}(i=e.RenderingMode||(e.RenderingMode={})),function(t){t[t.TOP=0]="TOP",t[t.BOTTOM=1]="BOTTOM",t[t.FRONT=2]="FRONT",t[t.BACK=3]="BACK",t[t.LEFT=4]="LEFT",t[t.RIGHT=5]="RIGHT",t[t.DEFAULT=6]="DEFAULT"}(a=e.ViewType||(e.ViewType={}))},7751:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.worker=void 0,e.worker='(()=>{"use strict";var e={747:(e,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.LoadingPhase=r.MessageType=r.MessageProgress=r.Message=void 0;var t,I;r.Message=function(){},r.MessageProgress=function(e){var r=100/3;return r*e.phase+r*e.percent/100},(I=r.MessageType||(r.MessageType={}))[I.PROGRESS=0]="PROGRESS",I[I.COMPLETED=1]="COMPLETED",I[I.FAILED=2]="FAILED",(t=r.LoadingPhase||(r.LoadingPhase={}))[t.DOWNLOADING=0]="DOWNLOADING",t[t.READING=1]="READING",t[t.LOADING=2]="LOADING"},18:(e,r,t)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.ProductMap=void 0;var I=t(486),a=function(){function e(){this.states=[]}return e.clone=function(r){var t=new e;return t.productID=r.productID,t.renderId=r.renderId,t.type=r.type,t.bBox=new Float32Array(r.bBox),t.spans=r.spans,t.states=r.states.slice(0),t},e.addState=function(e,r){null==e.states.find((function(e){return e===r}))&&e.states.push(r)},e.removeState=function(e,r){var t=e.states.indexOf(r);t<0||e.states.splice(t,1)},e.getState=function(e){return null==e.states||0===e.states.length?I.State.UNDEFINED:I.StatePriorities.getHighestPriority(e.states)},e}();r.ProductMap=a},486:(e,r)=>{var t;Object.defineProperty(r,"__esModule",{value:!0}),r.StatePriorities=r.State=void 0,function(e){e[e.UNDEFINED=255]="UNDEFINED",e[e.HIDDEN=254]="HIDDEN",e[e.HIGHLIGHTED=253]="HIGHLIGHTED",e[e.XRAYVISIBLE=252]="XRAYVISIBLE",e[e.PICKING_ONLY=251]="PICKING_ONLY",e[e.HOVEROVER=250]="HOVEROVER",e[e.UNSTYLED=225]="UNSTYLED"}(t=r.State||(r.State={}));var I=function(){function e(){}return e.getPriority=function(e){switch(e){case t.HIGHLIGHTED:return 1;case t.PICKING_ONLY:return 2;case t.HIDDEN:return 3;case t.XRAYVISIBLE:return 4;default:return 100}},e.getHighestPriority=function(e){var r=this;if(null==e||0===e.length)return null;if(1===e.length)return e[0];var I=e.map((function(e){return{state:e,priority:r.getPriority(e)}}));I.sort((function(e,r){return e.priority-r.priority}));var a=I[0];return a.priority>50?t.UNDEFINED:a.state},e}();r.StatePriorities=I},66:(e,r)=>{var t;Object.defineProperty(r,"__esModule",{value:!0}),r.ProductType=void 0,(t=r.ProductType||(r.ProductType={}))[t.IFCPRODUCT=20]="IFCPRODUCT",t[t.IFCELEMENT=19]="IFCELEMENT",t[t.IFCBUILDINGELEMENT=26]="IFCBUILDINGELEMENT",t[t.IFCFOOTING=120]="IFCFOOTING",t[t.IFCPILE=572]="IFCPILE",t[t.IFCBEAM=171]="IFCBEAM",t[t.IFCBEAMSTANDARDCASE=1104]="IFCBEAMSTANDARDCASE",t[t.IFCBUILDINGELEMENTPROXY=560]="IFCBUILDINGELEMENTPROXY",t[t.IFCCHIMNEY=1120]="IFCCHIMNEY",t[t.IFCCOLUMN=383]="IFCCOLUMN",t[t.IFCCOLUMNSTANDARDCASE=1126]="IFCCOLUMNSTANDARDCASE",t[t.IFCCOVERING=382]="IFCCOVERING",t[t.IFCCURTAINWALL=456]="IFCCURTAINWALL",t[t.IFCDOOR=213]="IFCDOOR",t[t.IFCDOORSTANDARDCASE=1151]="IFCDOORSTANDARDCASE",t[t.IFCMEMBER=310]="IFCMEMBER",t[t.IFCMEMBERSTANDARDCASE=1214]="IFCMEMBERSTANDARDCASE",t[t.IFCPLATE=351]="IFCPLATE",t[t.IFCPLATESTANDARDCASE=1224]="IFCPLATESTANDARDCASE",t[t.IFCRAILING=350]="IFCRAILING",t[t.IFCRAMP=414]="IFCRAMP",t[t.IFCRAMPFLIGHT=348]="IFCRAMPFLIGHT",t[t.IFCROOF=347]="IFCROOF",t[t.IFCSHADINGDEVICE=1265]="IFCSHADINGDEVICE",t[t.IFCSLAB=99]="IFCSLAB",t[t.IFCSLABELEMENTEDCASE=1268]="IFCSLABELEMENTEDCASE",t[t.IFCSLABSTANDARDCASE=1269]="IFCSLABSTANDARDCASE",t[t.IFCSTAIR=346]="IFCSTAIR",t[t.IFCSTAIRFLIGHT=25]="IFCSTAIRFLIGHT",t[t.IFCWALL=452]="IFCWALL",t[t.IFCWALLELEMENTEDCASE=1314]="IFCWALLELEMENTEDCASE",t[t.IFCWALLSTANDARDCASE=453]="IFCWALLSTANDARDCASE",t[t.IFCWINDOW=667]="IFCWINDOW",t[t.IFCWINDOWSTANDARDCASE=1316]="IFCWINDOWSTANDARDCASE",t[t.IFCELEMENTCOMPONENT=424]="IFCELEMENTCOMPONENT",t[t.IFCREINFORCINGELEMENT=262]="IFCREINFORCINGELEMENT",t[t.IFCREINFORCINGBAR=571]="IFCREINFORCINGBAR",t[t.IFCREINFORCINGMESH=531]="IFCREINFORCINGMESH",t[t.IFCTENDON=261]="IFCTENDON",t[t.IFCTENDONANCHOR=675]="IFCTENDONANCHOR",t[t.IFCBUILDINGELEMENTPART=220]="IFCBUILDINGELEMENTPART",t[t.IFCDISCRETEACCESSORY=423]="IFCDISCRETEACCESSORY",t[t.IFCFASTENER=535]="IFCFASTENER",t[t.IFCMECHANICALFASTENER=536]="IFCMECHANICALFASTENER",t[t.IFCVIBRATIONISOLATOR=1312]="IFCVIBRATIONISOLATOR",t[t.IFCFEATUREELEMENT=386]="IFCFEATUREELEMENT",t[t.IFCSURFACEFEATURE=1287]="IFCSURFACEFEATURE",t[t.IFCFEATUREELEMENTSUBTRACTION=499]="IFCFEATUREELEMENTSUBTRACTION",t[t.IFCVOIDINGFEATURE=1313]="IFCVOIDINGFEATURE",t[t.IFCOPENINGELEMENT=498]="IFCOPENINGELEMENT",t[t.IFCOPENINGSTANDARDCASE=1217]="IFCOPENINGSTANDARDCASE",t[t.IFCFEATUREELEMENTADDITION=385]="IFCFEATUREELEMENTADDITION",t[t.IFCPROJECTIONELEMENT=384]="IFCPROJECTIONELEMENT",t[t.IFCFURNISHINGELEMENT=253]="IFCFURNISHINGELEMENT",t[t.IFCFURNITURE=1184]="IFCFURNITURE",t[t.IFCSYSTEMFURNITUREELEMENT=1291]="IFCSYSTEMFURNITUREELEMENT",t[t.IFCDISTRIBUTIONELEMENT=44]="IFCDISTRIBUTIONELEMENT",t[t.IFCDISTRIBUTIONFLOWELEMENT=45]="IFCDISTRIBUTIONFLOWELEMENT",t[t.IFCDISTRIBUTIONCHAMBERELEMENT=180]="IFCDISTRIBUTIONCHAMBERELEMENT",t[t.IFCENERGYCONVERSIONDEVICE=175]="IFCENERGYCONVERSIONDEVICE",t[t.IFCAIRTOAIRHEATRECOVERY=1097]="IFCAIRTOAIRHEATRECOVERY",t[t.IFCBOILER=1105]="IFCBOILER",t[t.IFCBURNER=1109]="IFCBURNER",t[t.IFCCHILLER=1119]="IFCCHILLER",t[t.IFCCOIL=1124]="IFCCOIL",t[t.IFCCONDENSER=1132]="IFCCONDENSER",t[t.IFCCOOLEDBEAM=1141]="IFCCOOLEDBEAM",t[t.IFCCOOLINGTOWER=1142]="IFCCOOLINGTOWER",t[t.IFCENGINE=1164]="IFCENGINE",t[t.IFCEVAPORATIVECOOLER=1166]="IFCEVAPORATIVECOOLER",t[t.IFCEVAPORATOR=1167]="IFCEVAPORATOR",t[t.IFCHEATEXCHANGER=1187]="IFCHEATEXCHANGER",t[t.IFCHUMIDIFIER=1188]="IFCHUMIDIFIER",t[t.IFCTUBEBUNDLE=1305]="IFCTUBEBUNDLE",t[t.IFCUNITARYEQUIPMENT=1310]="IFCUNITARYEQUIPMENT",t[t.IFCELECTRICGENERATOR=1160]="IFCELECTRICGENERATOR",t[t.IFCELECTRICMOTOR=1161]="IFCELECTRICMOTOR",t[t.IFCMOTORCONNECTION=1216]="IFCMOTORCONNECTION",t[t.IFCSOLARDEVICE=1270]="IFCSOLARDEVICE",t[t.IFCTRANSFORMER=1303]="IFCTRANSFORMER",t[t.IFCFLOWCONTROLLER=121]="IFCFLOWCONTROLLER",t[t.IFCAIRTERMINALBOX=1096]="IFCAIRTERMINALBOX",t[t.IFCDAMPER=1148]="IFCDAMPER",t[t.IFCFLOWMETER=1182]="IFCFLOWMETER",t[t.IFCVALVE=1311]="IFCVALVE",t[t.IFCELECTRICDISTRIBUTIONBOARD=1157]="IFCELECTRICDISTRIBUTIONBOARD",t[t.IFCELECTRICTIMECONTROL=1162]="IFCELECTRICTIMECONTROL",t[t.IFCPROTECTIVEDEVICE=1235]="IFCPROTECTIVEDEVICE",t[t.IFCSWITCHINGDEVICE=1290]="IFCSWITCHINGDEVICE",t[t.IFCFLOWFITTING=467]="IFCFLOWFITTING",t[t.IFCDUCTFITTING=1153]="IFCDUCTFITTING",t[t.IFCPIPEFITTING=1222]="IFCPIPEFITTING",t[t.IFCCABLECARRIERFITTING=1111]="IFCCABLECARRIERFITTING",t[t.IFCCABLEFITTING=1113]="IFCCABLEFITTING",t[t.IFCJUNCTIONBOX=1195]="IFCJUNCTIONBOX",t[t.IFCFLOWMOVINGDEVICE=502]="IFCFLOWMOVINGDEVICE",t[t.IFCCOMPRESSOR=1131]="IFCCOMPRESSOR",t[t.IFCFAN=1177]="IFCFAN",t[t.IFCPUMP=1238]="IFCPUMP",t[t.IFCFLOWSEGMENT=574]="IFCFLOWSEGMENT",t[t.IFCDUCTSEGMENT=1154]="IFCDUCTSEGMENT",t[t.IFCPIPESEGMENT=1223]="IFCPIPESEGMENT",t[t.IFCCABLECARRIERSEGMENT=1112]="IFCCABLECARRIERSEGMENT",t[t.IFCCABLESEGMENT=1115]="IFCCABLESEGMENT",t[t.IFCFLOWSTORAGEDEVICE=371]="IFCFLOWSTORAGEDEVICE",t[t.IFCTANK=1293]="IFCTANK",t[t.IFCELECTRICFLOWSTORAGEDEVICE=1159]="IFCELECTRICFLOWSTORAGEDEVICE",t[t.IFCFLOWTERMINAL=46]="IFCFLOWTERMINAL",t[t.IFCFIRESUPPRESSIONTERMINAL=1179]="IFCFIRESUPPRESSIONTERMINAL",t[t.IFCSANITARYTERMINAL=1262]="IFCSANITARYTERMINAL",t[t.IFCSTACKTERMINAL=1277]="IFCSTACKTERMINAL",t[t.IFCWASTETERMINAL=1315]="IFCWASTETERMINAL",t[t.IFCAIRTERMINAL=1095]="IFCAIRTERMINAL",t[t.IFCMEDICALDEVICE=1212]="IFCMEDICALDEVICE",t[t.IFCSPACEHEATER=1272]="IFCSPACEHEATER",t[t.IFCAUDIOVISUALAPPLIANCE=1099]="IFCAUDIOVISUALAPPLIANCE",t[t.IFCCOMMUNICATIONSAPPLIANCE=1127]="IFCCOMMUNICATIONSAPPLIANCE",t[t.IFCELECTRICAPPLIANCE=1156]="IFCELECTRICAPPLIANCE",t[t.IFCLAMP=1198]="IFCLAMP",t[t.IFCLIGHTFIXTURE=1199]="IFCLIGHTFIXTURE",t[t.IFCOUTLET=1219]="IFCOUTLET",t[t.IFCFLOWTREATMENTDEVICE=425]="IFCFLOWTREATMENTDEVICE",t[t.IFCINTERCEPTOR=1193]="IFCINTERCEPTOR",t[t.IFCDUCTSILENCER=1155]="IFCDUCTSILENCER",t[t.IFCFILTER=1178]="IFCFILTER",t[t.IFCDISTRIBUTIONCONTROLELEMENT=468]="IFCDISTRIBUTIONCONTROLELEMENT",t[t.IFCPROTECTIVEDEVICETRIPPINGUNIT=1236]="IFCPROTECTIVEDEVICETRIPPINGUNIT",t[t.IFCACTUATOR=1091]="IFCACTUATOR",t[t.IFCALARM=1098]="IFCALARM",t[t.IFCCONTROLLER=1139]="IFCCONTROLLER",t[t.IFCFLOWINSTRUMENT=1181]="IFCFLOWINSTRUMENT",t[t.IFCSENSOR=1264]="IFCSENSOR",t[t.IFCUNITARYCONTROLELEMENT=1308]="IFCUNITARYCONTROLELEMENT",t[t.IFCCIVILELEMENT=1122]="IFCCIVILELEMENT",t[t.IFCELEMENTASSEMBLY=18]="IFCELEMENTASSEMBLY",t[t.IFCGEOGRAPHICELEMENT=1185]="IFCGEOGRAPHICELEMENT",t[t.IFCTRANSPORTELEMENT=416]="IFCTRANSPORTELEMENT",t[t.IFCVIRTUALELEMENT=168]="IFCVIRTUALELEMENT",t[t.IFCSTRUCTURALACTIVITY=41]="IFCSTRUCTURALACTIVITY",t[t.IFCSTRUCTURALACTION=40]="IFCSTRUCTURALACTION",t[t.IFCSTRUCTURALCURVEACTION=1279]="IFCSTRUCTURALCURVEACTION",t[t.IFCSTRUCTURALLINEARACTION=463]="IFCSTRUCTURALLINEARACTION",t[t.IFCSTRUCTURALSURFACEACTION=1284]="IFCSTRUCTURALSURFACEACTION",t[t.IFCSTRUCTURALPLANARACTION=39]="IFCSTRUCTURALPLANARACTION",t[t.IFCSTRUCTURALPOINTACTION=356]="IFCSTRUCTURALPOINTACTION",t[t.IFCSTRUCTURALREACTION=355]="IFCSTRUCTURALREACTION",t[t.IFCSTRUCTURALCURVEREACTION=1280]="IFCSTRUCTURALCURVEREACTION",t[t.IFCSTRUCTURALPOINTREACTION=354]="IFCSTRUCTURALPOINTREACTION",t[t.IFCSTRUCTURALSURFACEREACTION=1285]="IFCSTRUCTURALSURFACEREACTION",t[t.IFCSTRUCTURALITEM=226]="IFCSTRUCTURALITEM",t[t.IFCSTRUCTURALCONNECTION=265]="IFCSTRUCTURALCONNECTION",t[t.IFCSTRUCTURALCURVECONNECTION=534]="IFCSTRUCTURALCURVECONNECTION",t[t.IFCSTRUCTURALPOINTCONNECTION=533]="IFCSTRUCTURALPOINTCONNECTION",t[t.IFCSTRUCTURALSURFACECONNECTION=264]="IFCSTRUCTURALSURFACECONNECTION",t[t.IFCSTRUCTURALMEMBER=225]="IFCSTRUCTURALMEMBER",t[t.IFCSTRUCTURALCURVEMEMBER=224]="IFCSTRUCTURALCURVEMEMBER",t[t.IFCSTRUCTURALCURVEMEMBERVARYING=227]="IFCSTRUCTURALCURVEMEMBERVARYING",t[t.IFCSTRUCTURALSURFACEMEMBER=420]="IFCSTRUCTURALSURFACEMEMBER",t[t.IFCSTRUCTURALSURFACEMEMBERVARYING=421]="IFCSTRUCTURALSURFACEMEMBERVARYING",t[t.IFCPORT=179]="IFCPORT",t[t.IFCDISTRIBUTIONPORT=178]="IFCDISTRIBUTIONPORT",t[t.IFCANNOTATION=634]="IFCANNOTATION",t[t.IFCSPATIALELEMENT=1273]="IFCSPATIALELEMENT",t[t.IFCSPATIALSTRUCTUREELEMENT=170]="IFCSPATIALSTRUCTUREELEMENT",t[t.IFCBUILDING=169]="IFCBUILDING",t[t.IFCBUILDINGSTOREY=459]="IFCBUILDINGSTOREY",t[t.IFCSITE=349]="IFCSITE",t[t.IFCSPACE=454]="IFCSPACE",t[t.IFCEXTERNALSPATIALSTRUCTUREELEMENT=1175]="IFCEXTERNALSPATIALSTRUCTUREELEMENT",t[t.IFCEXTERNALSPATIALELEMENT=1174]="IFCEXTERNALSPATIALELEMENT",t[t.IFCSPATIALZONE=1275]="IFCSPATIALZONE",t[t.IFCGRID=564]="IFCGRID",t[t.IFCPROXY=447]="IFCPROXY"},241:(e,r,t)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.BinaryReader=void 0;var I=t(747),a=function(){function e(){this._buffer=null,this._view=null,this._position=0,this._progress=function(e){},this._lastProgress=0}return Object.defineProperty(e.prototype,"Position",{get:function(){return this._position},enumerable:!1,configurable:!0}),e.prototype.getSubReader=function(r){var t=new e,I=this._buffer.slice(this._position,this._position+r);return t.load(I,null,null),this._position+=r,t},e.prototype.load=function(e,r,t){this._position=0;var a=this;if(t=t||function(e){},this._progress=t,void 0===e||null==e)throw"Source must be defined";if("string"==typeof e){var n=new XMLHttpRequest;n.open("GET",e,!0),n.onreadystatechange=function(){if(4==n.readyState&&200==n.status){var e=new FileReader;e.onloadend=function(){e.result&&"string"!=typeof e.result&&(a._buffer=e.result,a._view=new DataView(a._buffer),a.onloaded&&a.onloaded(a))},e.onprogress=function(e){t({message:"Downloading geometry",percent:Math.floor(e.loaded/e.total*100),type:I.MessageType.PROGRESS,phase:I.LoadingPhase.DOWNLOADING})},e.readAsArrayBuffer(n.response)}if(4==n.readyState&&200!=n.status){var r="Failed to fetch binary data from server. Server code: "+n.status+". This might be due to CORS policy of your browser if you run this as a local file.";throw t({message:"Downloading geometry",percent:0,type:I.MessageType.FAILED,phase:I.LoadingPhase.DOWNLOADING}),a.onerror&&a.onerror(r),r}},n.responseType="blob",null!=r&&Object.keys(r).forEach((function(e){var t=r[e];n.setRequestHeader(e,t)})),n.send()}else if(e instanceof Blob||"undefined"!=typeof File&&e instanceof File){var E=new FileReader;E.onloadend=function(){E.result&&"string"!=typeof E.result&&(a._buffer=E.result,a._view=new DataView(a._buffer),a.onloaded&&a.onloaded(a))},E.onprogress=function(e){t({message:"Loading binary data",percent:Math.floor(e.loaded/e.total*100),type:I.MessageType.PROGRESS,phase:I.LoadingPhase.DOWNLOADING})},E.readAsArrayBuffer(e)}else e instanceof ArrayBuffer&&(this._buffer=e,this._view=new DataView(a._buffer),a.onloaded&&a.onloaded(a))},e.prototype.seek=function(e){if(e<0||e>this._buffer.byteLength)throw"Position out of range.";this._position=e},e.prototype.isEOF=function(){if(null==this._position)throw"Position is not defined";return this._position==this._buffer.byteLength},e.prototype.readArray=function(e,r,t){null==r&&(r=1);var I=e*r,a=this._position;return this._position+=I,this.reportProgress(),1===r?new t(this._buffer.slice(a,a+I))[0]:new t(this._buffer.slice(a,a+I))},e.prototype.move=function(e){var r=this._position;return this._position+=e,this.reportProgress(),r},e.prototype.reportProgress=function(){null!=this._progress&&this._position-this._lastProgress>5e5&&(this._lastProgress=this._position,this._progress({type:I.MessageType.PROGRESS,message:"Reading data",percent:Math.floor(100*this._position/this._buffer.byteLength),phase:I.LoadingPhase.READING}))},e.prototype.readByte=function(){return this.readUint8()},e.prototype.readByteArray=function(e){return this.readUint8Array(e)},e.prototype.readUint8=function(){var e=this.move(1);return this._view.getUint8(e)},e.prototype.readUint8Array=function(e){return this.readArray(1,e,Uint8Array)},e.prototype.readInt16=function(){var e=this.move(2);return this._view.getInt16(e,!0)},e.prototype.readInt16Array=function(e){return this.readArray(2,e,Int16Array)},e.prototype.readUInt16=function(){var e=this.move(2);return this._view.getUint16(e,!0)},e.prototype.readUint16Array=function(e){return this.readArray(2,e,Uint16Array)},e.prototype.readInt32=function(){var e=this.move(4);return this._view.getInt32(e,!0)},e.prototype.readInt32Array=function(e){return this.readArray(4,e,Int32Array)},e.prototype.readUint32=function(){var e=this.move(4);return this._view.getUint32(e,!0)},e.prototype.readUint32Array=function(e){return this.readArray(4,e,Uint32Array)},e.prototype.readFloat32=function(){var e=this.move(4);return this._view.getFloat32(e,!0)},e.prototype.readFloat32Array=function(e){return this.readArray(4,e,Float32Array)},e.prototype.readFloat64=function(){var e=this.move(8);return this._view.getFloat64(e,!0)},e.prototype.readFloat64Array=function(e){return this.readArray(8,e,Float64Array)},e.prototype.readChar=function(e){null==e&&(e=1);var r=this.readByteArray(e),t=new Array(e);for(var I in r)t[I]=String.fromCharCode(r[I]);return 1===e?t[0]:t},e.prototype.readPoint=function(e){null==e&&(e=1);for(var r=this.readFloat32Array(3*e),t=new Array(e),I=0;I<e;I++){var a=3*I*4,n=new Float32Array(r.buffer,a,3);t[I]=n}return 1===e?t[0]:t},e.prototype.readRgba=function(e){null==e&&(e=1);for(var r=this.readByteArray(4*e),t=new Array(e),I=0;I<e;I++){var a=4*I,n=new Uint8Array(r.buffer,a,4);t[I]=n}return 1===e?t[0]:t},e.prototype.readPackedNormal=function(e){null==e&&(e=1);for(var r=this.readUint8Array(2*e),t=new Array(e),I=0;I<e;I++){var a=new Uint8Array(r.buffer,2*I,2);t[I]=a}return 1===e?t[0]:t},e.prototype.readMatrix4x4=function(e){null==e&&(e=1);for(var r=this.readFloat32Array(16*e),t=new Array(e),I=0;I<e;I++){var a=16*I*4,n=new Float32Array(r.buffer,a,16);t[I]=n}return 1===e?t[0]:t},e.prototype.readMatrix4x4_64=function(e){null==e&&(e=1);for(var r=this.readFloat64Array(16*e),t=new Array(e),I=0;I<e;I++){var a=16*I*8,n=new Float64Array(r.buffer,a,16);t[I]=n}return 1===e?t[0]:t},e.prototype.readData=function(e){var r=this.move(e);return this._buffer.slice(r,r+e)},e}();r.BinaryReader=a},360:(e,r,t)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.Region=r.ModelGeometry=void 0;var I=t(241),a=t(623),n=t(486),E=t(66),o=t(747),C=t(18),i=function(){function e(){this.normals=new Uint8Array(0),this.indices=new Float32Array(0),this.products=new Float32Array(0),this.transformations=new Float32Array(0),this.styleIndices=new Uint16Array(0),this.states=new Uint8Array(0),this.vertices=new Float32Array(0),this.matrices=new Float32Array(0),this.styles=new Uint8Array(0),this.meter=1e3,this.wcs=[0,0,0],this._iVertex=0,this._iIndexForward=0,this._iIndexBackward=0,this._iTransform=0,this._iMatrix=0,this._maxVersionSupported=4,this.productMaps={},this.productIdLookup=[],this.breaks={10:[],20:[],40:[],30:[],50:[],60:[],70:[],80:[],90:[],100:[]},this._styleMap=new T}return e.prototype.parse=function(e,r){var t=this;if(e&&!e.isEOF()){this._reader=e;var I=e;if(94132117!==I.readInt32())throw new Error("Magic number mismatch. This is not a wexBIM file.");var i=I.readByte();if(i>this._maxVersionSupported)throw new Error("Viewer doesn\'t support version ".concat(i," of the wexBIM stream"));var T=I.readInt32(),F=I.readInt32(),A=I.readInt32(),R=I.readInt32(),N=I.readInt32(),d=I.readInt32();this.meter=I.readFloat32(),i>3&&(this.wcs=[I.readFloat64(),I.readFloat64(),I.readFloat64()]);var L=I.readInt16();this.vertices=new Float32Array(this.square(4,3*F)),this.normals=new Uint8Array(6*A),this.indices=new Float32Array(3*A),this.styleIndices=new Uint16Array(3*A),this.styles=new Uint8Array(this.square(1,4*(d+2))),this.products=new Float32Array(3*A),this.states=new Uint8Array(3*A*2),this.transformations=new Float32Array(3*A),this.matrices=new Float32Array(this.square(4,16*R)),this.productMaps={},this.regions=new Array(L),this._iVertex=0,this._iIndexForward=0,this._iIndexBackward=3*A,this._iTransform=0,this._iMatrix=0;for(var u=0;u<L;u++)(P=new s).population=I.readInt32(),P.centre=I.readFloat32Array(3),P.bbox=I.readFloat32Array(6),this.regions[u]=P;for(var O=0;O<d;O++){var p=I.readInt32(),l=255*I.readFloat32(),h=255*I.readFloat32(),S=255*I.readFloat32(),y=255*I.readFloat32();this.styles.set([l,h,S,y],4*O),this._styleMap.Add({id:p,index:O,transparent:y<254})}for(this.styles.set([255,255,255,255],4*O),this._styleMap.Add({id:-1,index:O,transparent:!1}),O++,this.styles.set([0,255,255,100],4*O),this._styleMap.Add({id:-2,index:O,transparent:!1}),u=0;u<N;u++){var M=I.readInt32(),f=I.readInt16(),c=I.readFloat32Array(6),U=new C.ProductMap;U.productID=M,U.renderId=u+1,U.type=f,U.bBox=c,U.spans=[],this.productMaps[M]=U,this.productIdLookup[u+1]=M,f!==E.ProductType.IFCSPACE&&f!==E.ProductType.IFCOPENINGELEMENT||U.states.push(n.State.HIDDEN)}if(i>=3)for(var D=0;D<L;D++){for(var P=this.regions[D],v=I.readInt32(),b=new Array(v),G=0;G<v;G++){var g=this.readShape(i),w=I.readInt32();if(0!==w){var B=I.getSubReader(w);if((V=new a.TriangulatedShape).parse(B),!B.isEOF())throw new Error("Incomplete reading of geometry for shape instance ".concat(g[0].iLabel));b[G]={shapes:g,geometry:V}}}for(r.orderGeometryBySize&&b.sort((function(e,r){var I,a,n=null===(I=e.shapes[0])||void 0===I?void 0:I.pLabel,E=null===(a=r.shapes[0])||void 0===a?void 0:a.pLabel;if(null==n||null==E)return 0;var o=t.productMaps[n],C=t.productMaps[E];if(null==o)return 1;if(null==C)return-1;var i=o.bBox[3]*o.bBox[4]*o.bBox[5];return C.bBox[3]*o.bBox[4]*o.bBox[5]-i})),G=0;G<v;G++){var _=b[G];this.feedDataArrays(_.shapes,_.geometry)}}else for(var x=0;x<T;x++){var V;g=this.readShape(i),(V=new a.TriangulatedShape).parse(I),this.feedDataArrays(g,V)}if(!I.isEOF())throw this.progress({type:o.MessageType.FAILED,message:"Processed data",percent:0,phase:o.LoadingPhase.READING}),new Error("Binary reader is not at the end of the file.");this.progress({type:o.MessageType.PROGRESS,message:"Processed data",percent:100,phase:o.LoadingPhase.READING}),this.transparentIndex=this._iIndexForward,this.breaks[100]=[this.transparentIndex-1,this.transparentIndex]}},e.prototype.square=function(e,r){if(null==e||null==r)throw new Error(\'Wrong arguments for "square" function.\');if(0===r)return 0;for(var t=r*e,I=Math.ceil(Math.sqrt(t/4));4*I%e!=0;)I++;return I*I*4/e},e.prototype.feedDataArrays=function(e,r){var t=this;e.forEach((function(e){var I=0,a=I=e.transparent?t._iIndexBackward-r.indices.length:t._iIndexForward,o=t.productMaps[e.pLabel];void 0===o&&((o=new C.ProductMap).productID=0,o.renderId=0,o.type=E.ProductType.IFCOPENINGELEMENT,o.bBox=new Float32Array(6),o.spans=[],o.states.push(n.State.HIDDEN),t.productMaps[e.pLabel]=o),t.normals.set(r.normals,2*I);var i=o.type===E.ProductType.IFCSPACE||o.type===E.ProductType.IFCOPENINGELEMENT?n.State.HIDDEN:255;r.indices.forEach((function(r){t.indices[I]=r+t._iVertex/3,t.products[I]=o.renderId,t.styleIndices[I]=e.style,t.transformations[I]=e.transform,t.states[2*I]=i,t.states[2*I+1]=255,I++}));var s=I;o.spans.push(new Int32Array([a,s])),e.transparent?t._iIndexBackward-=r.indices.length:t._iIndexForward+=r.indices.length;var T=(t._iIndexForward+t.indices.length-t._iIndexBackward)/t.indices.length*100;Object.getOwnPropertyNames(t.breaks).forEach((function(e){var r=+e;0===t.breaks[r].length&&T>r&&(t.breaks[r]=[t._iIndexForward,t._iIndexBackward])}))}),this),this.vertices.set(r.vertices,this._iVertex),this._iVertex+=r.vertices.length},e.prototype.readShape=function(e){for(var r=this._reader,t=r.readInt32(),I=new Array,a=0;a<t;a++){var n=r.readInt32(),o=(r.readInt16(),r.readInt32()),C=r.readInt32(),i=null;t>1&&(i=1===e?r.readFloat32Array(16):r.readFloat64Array(16),this.matrices.set(i,this._iMatrix),this._iMatrix+=16);var s=this._styleMap.GetStyle(C);null===s&&(s=this._styleMap.GetStyle(-1));var T=this.productMaps[n]?this.productMaps[n].type:E.ProductType.IFCPRODUCT;T!==E.ProductType.IFCSPACE&&T!==E.ProductType.IFCOPENINGELEMENT||(s=this._styleMap.GetStyle(-2)),I.push({pLabel:n,iLabel:o,style:s.index,transparent:s.transparent,transform:null!=i?this._iTransform++:-1})}return I},e.prototype.load=function(e,r,t,a){var n=this;void 0===a&&(a={}),this.progress=t||function(e){};var E=new I.BinaryReader,o=this;E.onloaded=function(){o.parse(E,a),o.onloaded&&o.onloaded(n)},E.onerror=function(e){o.onerror&&o.onerror(e)},E.load(e,r,t)},e}();r.ModelGeometry=i;var s=function(){function e(e){this.population=-1,this.centre=null,this.bbox=null,e&&(this.population=e.population,e.centre&&(this.centre=new Float32Array(e.centre)),e.bbox&&(this.bbox=new Float32Array(e.bbox)))}return e.clone=function(r){var t=new e;return t.population=r.population,r.centre&&(t.centre=new Float32Array(r.centre)),r.bbox&&(t.bbox=new Float32Array(r.bbox)),t},e.prototype.merge=function(r){if(-1===this.population&&null===this.centre&&null===this.bbox)return new e(r);var t=new e;if(t.population=this.population+r.population,this.bbox&&r.bbox){var I=Math.min(this.bbox[0],r.bbox[0]),a=Math.min(this.bbox[1],r.bbox[1]),n=Math.min(this.bbox[2],r.bbox[2]),E=Math.max(this.bbox[0]+this.bbox[3],r.bbox[0]+r.bbox[3]),o=Math.max(this.bbox[1]+this.bbox[4],r.bbox[1]+r.bbox[4]),C=Math.max(this.bbox[2]+this.bbox[5],r.bbox[2]+r.bbox[5]),i=E-I,s=o-a,T=C-n,F=(I+E)/2,A=(a+o)/2,R=(n+C)/2;t.bbox=new Float32Array([I,a,n,i,s,T]),t.centre=new Float32Array([F,A,R])}else this.bbox?(t.bbox=new Float32Array(this.bbox),t.centre=new Float32Array(this.centre)):(t.bbox=new Float32Array(r.bbox),t.centre=new Float32Array(r.centre));return t},e}();r.Region=s;var T=function(){function e(){this._internal={}}return e.prototype.Add=function(e){this._internal[e.id]=e},e.prototype.GetStyle=function(e){return this._internal[e]||null},e}()},623:(e,r,t)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.TriangulatedShape=void 0;var I=t(241),a=function(){function e(){var e=this;this.load=function(r){var t=new I.BinaryReader,a=e;t.onloaded=function(){a.parse(t),a.onloaded&&a.onloaded(e)},t.load(r,null,null)}}return e.prototype.parse=function(e){var r=this,t=(e.readByte(),e.readInt32()),I=e.readInt32();r.vertices=e.readFloat32Array(3*t),r.indices=new Uint32Array(3*I),r.normals=new Uint8Array(6*I);var a,n=0;a=t<=255?function(r){return e.readByteArray(r)}:t<=65535?function(r){return e.readUint16Array(r)}:function(r){return e.readInt32Array(r)};var E=e.readInt32();if(0!==t&&0!==I)for(var o=0;o<E;o++){var C=e.readInt32();if(0!=C){var i=C>0;if(C=Math.abs(C),i){var s=e.readByteArray(2),T=a(3*C);r.indices.set(T,n);for(var F=0;F<3*C;F++)r.normals[2*n]=s[0],r.normals[2*n+1]=s[1],n++}else for(F=0;F<C;F++)r.indices[n]=a(),r.normals.set(e.readByteArray(2),2*n),n++,r.indices[n]=a(),r.normals.set(e.readByteArray(2),2*n),n++,r.indices[n]=a(),r.normals.set(e.readByteArray(2),2*n),n++}}},e}();r.TriangulatedShape=a}},r={};function t(I){var a=r[I];if(void 0!==a)return a.exports;var n=r[I]={exports:{}};return e[I](n,n.exports,t),n.exports}var I={};for(var a in(()=>{var e=I;Object.defineProperty(e,"__esModule",{value:!0});var r=t(747),a=t(360);if(self&&self instanceof DedicatedWorkerGlobalScope){var n=self;n.onmessage=function(e){var t=e.data.model,I=e.data.headers,E=e.data.options,o=new a.ModelGeometry;o.onerror=function(e){var t={type:r.MessageType.FAILED,message:e,percent:0,phase:r.LoadingPhase.DOWNLOADING};n.postMessage(t),console.error(e),n.close()},o.onloaded=function(){try{var e={},t=[];for(var I in o)if(o.hasOwnProperty(I)){var a=o[I];"function"==typeof a||I.startsWith("_")||(e[I]=a,ArrayBuffer.isView(a)?t.push(a.buffer):null!=(C=a).width&&null!=C.height&&null!=C.close&&t.push(a))}var E={type:r.MessageType.COMPLETED,message:"Read Completed",percent:100,result:e,phase:r.LoadingPhase.READING};n.postMessage(E,t),n.close()}catch(e){E={type:r.MessageType.FAILED,message:e,percent:0,phase:r.LoadingPhase.READING},n.postMessage(E),console.error(e),n.close()}var C},o.load(t,I,(function(e){n.postMessage(e)}),E)}}})(),I)this[a]=I[a];I.__esModule&&Object.defineProperty(this,"__esModule",{value:!0})})();'}},e={};function r(n){var i=e[n];if(void 0!==i)return i.exports;var a=e[n]={exports:{}};return t[n].call(a.exports,a,a.exports,r),a.exports}return r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r(831)})()));
//# sourceMappingURL=index.js.map